diff --git a/README b/README
index d2f1c4a..735d28b 100644
--- a/README
+++ b/README
@@ -1,3 +1,5 @@
+This is a fork of GNU Enscript v1.6.6
+
 
 			     GNU Enscript
 			     ============
@@ -118,19 +120,19 @@ Enscript supports following character sets:
   - ISO-8859-7		ISO Greek
   - ascii		7 bit ascii
   - ascii fi se		7 bit ascii with following encodings:
-			  '{'  = ä (adieresis)
-			  '|'  = ö (odieresis)
-			  '}'  = å (aring)
-			  '['  = Ä (Adieresis)
-			  '\\' = Ö (Odieresis)
-			  ']'  = Å (Aring)
+			  '{'  = ï¿½ (adieresis)
+			  '|'  = ï¿½ (odieresis)
+			  '}'  = ï¿½ (aring)
+			  '['  = ï¿½ (Adieresis)
+			  '\\' = ï¿½ (Odieresis)
+			  ']'  = ï¿½ (Aring)
   - ascii dk no		7 bit ascii with following encodings:
-			  '{'  = æ (ae)
-			  '|'  = ø (oslash)
-			  '}'  = å (aring)
-			  '['  = Æ (AE)
-			  '\\' = Ø (Oslash)
-			  ']'  = Å (Aring)
+			  '{'  = ï¿½ (ae)
+			  '|'  = ï¿½ (oslash)
+			  '}'  = ï¿½ (aring)
+			  '['  = ï¿½ (AE)
+			  '\\' = ï¿½ (Oslash)
+			  ']'  = ï¿½ (Aring)
   - IBM/PC		standard PC/DOS character set
   - Mac			Macintosh character set
   - VMS			VMS multinational charset
diff --git a/config.h.in b/config.h.in
index a8625ff..34b495b 100644
--- a/config.h.in
+++ b/config.h.in
@@ -1,22 +1,16 @@
 /* config.h.in.  Generated from configure.ac by autoheader.  */
 
-/* Define to one of `_getb67', `GETB67', `getb67' for Cray-2 and Cray-YMP
-   systems. This function is required for `alloca.c' support on those systems.
-   */
-#undef CRAY_STACKSEG_END
-
-/* Define to 1 if using `alloca.c'. */
+/* Define to 1 if using 'alloca.c'. */
 #undef C_ALLOCA
 
 /* Define to 1 if translation of program messages to the user's native
    language is requested. */
 #undef ENABLE_NLS
 
-/* Define to 1 if you have `alloca', as a function or macro. */
+/* Define to 1 if you have 'alloca', as a function or macro. */
 #undef HAVE_ALLOCA
 
-/* Define to 1 if you have <alloca.h> and it should be used (not on Ultrix).
-   */
+/* Define to 1 if <alloca.h> works. */
 #undef HAVE_ALLOCA_H
 
 /* Define to 1 if you have the `argz_count' function. */
@@ -136,12 +130,12 @@
 /* Define to 1 if you have the `memmove' function. */
 #undef HAVE_MEMMOVE
 
-/* Define to 1 if you have the <memory.h> header file. */
-#undef HAVE_MEMORY_H
-
 /* Define to 1 if you have the `mempcpy' function. */
 #undef HAVE_MEMPCPY
 
+/* Define to 1 if you have the <minix/config.h> header file. */
+#undef HAVE_MINIX_CONFIG_H
+
 /* Define to 1 if you have a working `mmap' system call. */
 #undef HAVE_MMAP
 
@@ -189,6 +183,9 @@
    uintmax_t. */
 #undef HAVE_STDINT_H_WITH_UINTMAX
 
+/* Define to 1 if you have the <stdio.h> header file. */
+#undef HAVE_STDIO_H
+
 /* Define to 1 if you have the <stdlib.h> header file. */
 #undef HAVE_STDLIB_H
 
@@ -244,6 +241,9 @@
 /* Define to 1 if you have the `vprintf' function. */
 #undef HAVE_VPRINTF
 
+/* Define to 1 if you have the <wchar.h> header file. */
+#undef HAVE_WCHAR_H
+
 /* Define if you have the 'wchar_t' type. */
 #undef HAVE_WCHAR_T
 
@@ -310,7 +310,9 @@
 	STACK_DIRECTION = 0 => direction of growth unknown */
 #undef STACK_DIRECTION
 
-/* Define to 1 if you have the ANSI C header files. */
+/* Define to 1 if all of the C90 standard headers exist (not just the ones
+   required in a freestanding environment). This macro is provided for
+   backward compatibility; new code need not use it. */
 #undef STDC_HEADERS
 
 /* Define if the POSIX multithreading library can be used. */
@@ -338,21 +340,87 @@
 #ifndef _ALL_SOURCE
 # undef _ALL_SOURCE
 #endif
+/* Enable general extensions on macOS.  */
+#ifndef _DARWIN_C_SOURCE
+# undef _DARWIN_C_SOURCE
+#endif
+/* Enable general extensions on Solaris.  */
+#ifndef __EXTENSIONS__
+# undef __EXTENSIONS__
+#endif
 /* Enable GNU extensions on systems that have them.  */
 #ifndef _GNU_SOURCE
 # undef _GNU_SOURCE
 #endif
-/* Enable threading extensions on Solaris.  */
+/* Enable X/Open compliant socket functions that do not require linking
+   with -lxnet on HP-UX 11.11.  */
+#ifndef _HPUX_ALT_XOPEN_SOCKET_API
+# undef _HPUX_ALT_XOPEN_SOCKET_API
+#endif
+/* Identify the host operating system as Minix.
+   This macro does not affect the system headers' behavior.
+   A future release of Autoconf may stop defining this macro.  */
+#ifndef _MINIX
+# undef _MINIX
+#endif
+/* Enable general extensions on NetBSD.
+   Enable NetBSD compatibility extensions on Minix.  */
+#ifndef _NETBSD_SOURCE
+# undef _NETBSD_SOURCE
+#endif
+/* Enable OpenBSD compatibility extensions on NetBSD.
+   Oddly enough, this does nothing on OpenBSD.  */
+#ifndef _OPENBSD_SOURCE
+# undef _OPENBSD_SOURCE
+#endif
+/* Define to 1 if needed for POSIX-compatible behavior.  */
+#ifndef _POSIX_SOURCE
+# undef _POSIX_SOURCE
+#endif
+/* Define to 2 if needed for POSIX-compatible behavior.  */
+#ifndef _POSIX_1_SOURCE
+# undef _POSIX_1_SOURCE
+#endif
+/* Enable POSIX-compatible threading on Solaris.  */
 #ifndef _POSIX_PTHREAD_SEMANTICS
 # undef _POSIX_PTHREAD_SEMANTICS
 #endif
+/* Enable extensions specified by ISO/IEC TS 18661-5:2014.  */
+#ifndef __STDC_WANT_IEC_60559_ATTRIBS_EXT__
+# undef __STDC_WANT_IEC_60559_ATTRIBS_EXT__
+#endif
+/* Enable extensions specified by ISO/IEC TS 18661-1:2014.  */
+#ifndef __STDC_WANT_IEC_60559_BFP_EXT__
+# undef __STDC_WANT_IEC_60559_BFP_EXT__
+#endif
+/* Enable extensions specified by ISO/IEC TS 18661-2:2015.  */
+#ifndef __STDC_WANT_IEC_60559_DFP_EXT__
+# undef __STDC_WANT_IEC_60559_DFP_EXT__
+#endif
+/* Enable extensions specified by ISO/IEC TS 18661-4:2015.  */
+#ifndef __STDC_WANT_IEC_60559_FUNCS_EXT__
+# undef __STDC_WANT_IEC_60559_FUNCS_EXT__
+#endif
+/* Enable extensions specified by ISO/IEC TS 18661-3:2015.  */
+#ifndef __STDC_WANT_IEC_60559_TYPES_EXT__
+# undef __STDC_WANT_IEC_60559_TYPES_EXT__
+#endif
+/* Enable extensions specified by ISO/IEC TR 24731-2:2010.  */
+#ifndef __STDC_WANT_LIB_EXT2__
+# undef __STDC_WANT_LIB_EXT2__
+#endif
+/* Enable extensions specified by ISO/IEC 24747:2009.  */
+#ifndef __STDC_WANT_MATH_SPEC_FUNCS__
+# undef __STDC_WANT_MATH_SPEC_FUNCS__
+#endif
 /* Enable extensions on HP NonStop.  */
 #ifndef _TANDEM_SOURCE
 # undef _TANDEM_SOURCE
 #endif
-/* Enable general extensions on Solaris.  */
-#ifndef __EXTENSIONS__
-# undef __EXTENSIONS__
+/* Enable X/Open extensions.  Define to 500 only if necessary
+   to make mbstate_t available.  */
+#ifndef _XOPEN_SOURCE
+# undef _XOPEN_SOURCE
 #endif
 
 
@@ -366,16 +434,6 @@
    `char[]'. */
 #undef YYTEXT_POINTER
 
-/* Define to 1 if on MINIX. */
-#undef _MINIX
-
-/* Define to 2 if the system does not provide POSIX.1 features except with
-   this defined. */
-#undef _POSIX_1_SOURCE
-
-/* Define to 1 if you need to in order for `stat' and other things to work. */
-#undef _POSIX_SOURCE
-
 /* Define like PROTOTYPES; this can be used by system headers. */
 #undef __PROTOTYPES
 
diff --git a/configure b/configure
index f1dbbb4..f2dd622 100755
--- a/configure
+++ b/configure
@@ -1,11 +1,12 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.69 for GNU Enscript 1.6.6.
+# Generated by GNU Autoconf 2.71 for GNU Enscript 1.6.6.
 #
 # Report bugs to <bug-enscript@gnu.org>.
 #
 #
-# Copyright (C) 1992-1996, 1998-2012 Free Software Foundation, Inc.
+# Copyright (C) 1992-1996, 1998-2017, 2020-2021 Free Software Foundation,
+# Inc.
 #
 #
 # This configure script is free software; the Free Software Foundation
@@ -16,14 +17,16 @@
 
 # Be more Bourne compatible
 DUALCASE=1; export DUALCASE # for MKS sh
-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
+as_nop=:
+if test ${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
+then :
   emulate sh
   NULLCMD=:
   # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
   # is contrary to our usage.  Disable this feature.
   alias -g '${1+"$@"}'='"$@"'
   setopt NO_GLOB_SUBST
-else
+else $as_nop
   case `(set -o) 2>/dev/null` in #(
   *posix*) :
     set -o posix ;; #(
@@ -33,46 +36,46 @@ esac
 fi
 
 
+
+# Reset variables that may have inherited troublesome values from
+# the environment.
+
+# IFS needs to be set, to space, tab, and newline, in precisely that order.
+# (If _AS_PATH_WALK were called with IFS unset, it would have the
+# side effect of setting IFS to empty, thus disabling word splitting.)
+# Quoting is to prevent editors from complaining about space-tab.
 as_nl='
 '
 export as_nl
-# Printing a long string crashes Solaris 7 /usr/bin/printf.
-as_echo='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
-as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo
-as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo$as_echo
-# Prefer a ksh shell builtin over an external printf program on Solaris,
-# but without wasting forks for bash or zsh.
-if test -z "$BASH_VERSION$ZSH_VERSION" \
-    && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
-  as_echo='print -r --'
-  as_echo_n='print -rn --'
-elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
-  as_echo='printf %s\n'
-  as_echo_n='printf %s'
-else
-  if test "X`(/usr/ucb/echo -n -n $as_echo) 2>/dev/null`" = "X-n $as_echo"; then
-    as_echo_body='eval /usr/ucb/echo -n "$1$as_nl"'
-    as_echo_n='/usr/ucb/echo -n'
-  else
-    as_echo_body='eval expr "X$1" : "X\\(.*\\)"'
-    as_echo_n_body='eval
-      arg=$1;
-      case $arg in #(
-      *"$as_nl"*)
-	expr "X$arg" : "X\\(.*\\)$as_nl";
-	arg=`expr "X$arg" : ".*$as_nl\\(.*\\)"`;;
-      esac;
-      expr "X$arg" : "X\\(.*\\)" | tr -d "$as_nl"
-    '
-    export as_echo_n_body
-    as_echo_n='sh -c $as_echo_n_body as_echo'
-  fi
-  export as_echo_body
-  as_echo='sh -c $as_echo_body as_echo'
-fi
+IFS=" ""	$as_nl"
+
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# Ensure predictable behavior from utilities with locale-dependent output.
+LC_ALL=C
+export LC_ALL
+LANGUAGE=C
+export LANGUAGE
+
+# We cannot yet rely on "unset" to work, but we need these variables
+# to be unset--not just set to an empty or harmless value--now, to
+# avoid bugs in old shells (e.g. pre-3.0 UWIN ksh).  This construct
+# also avoids known problems related to "unset" and subshell syntax
+# in other old shells (e.g. bash 2.01 and pdksh 5.2.14).
+for as_var in BASH_ENV ENV MAIL MAILPATH CDPATH
+do eval test \${$as_var+y} \
+  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
+done
+
+# Ensure that fds 0, 1, and 2 are open.
+if (exec 3>&0) 2>/dev/null; then :; else exec 0</dev/null; fi
+if (exec 3>&1) 2>/dev/null; then :; else exec 1>/dev/null; fi
+if (exec 3>&2)            ; then :; else exec 2>/dev/null; fi
 
 # The user is always right.
-if test "${PATH_SEPARATOR+set}" != set; then
+if ${PATH_SEPARATOR+false} :; then
   PATH_SEPARATOR=:
   (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
     (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
@@ -81,13 +84,6 @@ if test "${PATH_SEPARATOR+set}" != set; then
 fi
 
 
-# IFS
-# We need space, tab and new line, in precisely that order.  Quoting is
-# there to prevent editors from complaining about space-tab.
-# (If _AS_PATH_WALK were called with IFS unset, it would disable word
-# splitting by setting IFS to empty value.)
-IFS=" ""	$as_nl"
-
 # Find who we are.  Look in the path if we contain no directory separator.
 as_myself=
 case $0 in #((
@@ -96,8 +92,12 @@ case $0 in #((
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    test -r "$as_dir$0" && as_myself=$as_dir$0 && break
   done
 IFS=$as_save_IFS
 
@@ -109,30 +109,10 @@ if test "x$as_myself" = x; then
   as_myself=$0
 fi
 if test ! -f "$as_myself"; then
-  $as_echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+  printf "%s\n" "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
   exit 1
 fi
 
-# Unset variables that we do not need and which cause bugs (e.g. in
-# pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
-# suppresses any "Segmentation fault" message there.  '((' could
-# trigger a bug in pdksh 5.2.14.
-for as_var in BASH_ENV ENV MAIL MAILPATH
-do eval test x\${$as_var+set} = xset \
-  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
-done
-PS1='$ '
-PS2='> '
-PS4='+ '
-
-# NLS nuisances.
-LC_ALL=C
-export LC_ALL
-LANGUAGE=C
-export LANGUAGE
-
-# CDPATH.
-(unset CDPATH) >/dev/null 2>&1 && unset CDPATH
 
 # Use a proper internal environment variable to ensure we don't fall
   # into an infinite loop, continuously re-executing ourselves.
@@ -154,20 +134,22 @@ esac
 exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
 # Admittedly, this is quite paranoid, since all the known shells bail
 # out after a failed `exec'.
-$as_echo "$0: could not re-execute with $CONFIG_SHELL" >&2
-as_fn_exit 255
+printf "%s\n" "$0: could not re-execute with $CONFIG_SHELL" >&2
+exit 255
   fi
   # We don't want this to propagate to other subprocesses.
           { _as_can_reexec=; unset _as_can_reexec;}
 if test "x$CONFIG_SHELL" = x; then
-  as_bourne_compatible="if test -n \"\${ZSH_VERSION+set}\" && (emulate sh) >/dev/null 2>&1; then :
+  as_bourne_compatible="as_nop=:
+if test \${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
+then :
   emulate sh
   NULLCMD=:
   # Pre-4.2 versions of Zsh do word splitting on \${1+\"\$@\"}, which
   # is contrary to our usage.  Disable this feature.
   alias -g '\${1+\"\$@\"}'='\"\$@\"'
   setopt NO_GLOB_SUBST
-else
+else \$as_nop
   case \`(set -o) 2>/dev/null\` in #(
   *posix*) :
     set -o posix ;; #(
@@ -187,42 +169,53 @@ as_fn_success || { exitcode=1; echo as_fn_success failed.; }
 as_fn_failure && { exitcode=1; echo as_fn_failure succeeded.; }
 as_fn_ret_success || { exitcode=1; echo as_fn_ret_success failed.; }
 as_fn_ret_failure && { exitcode=1; echo as_fn_ret_failure succeeded.; }
-if ( set x; as_fn_ret_success y && test x = \"\$1\" ); then :
+if ( set x; as_fn_ret_success y && test x = \"\$1\" )
+then :
 
-else
+else \$as_nop
   exitcode=1; echo positional parameters were not saved.
 fi
 test x\$exitcode = x0 || exit 1
+blah=\$(echo \$(echo blah))
+test x\"\$blah\" = xblah || exit 1
 test -x / || exit 1"
   as_suggested="  as_lineno_1=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_1a=\$LINENO
   as_lineno_2=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_2a=\$LINENO
   eval 'test \"x\$as_lineno_1'\$as_run'\" != \"x\$as_lineno_2'\$as_run'\" &&
   test \"x\`expr \$as_lineno_1'\$as_run' + 1\`\" = \"x\$as_lineno_2'\$as_run'\"' || exit 1
 test \$(( 1 + 1 )) = 2 || exit 1"
-  if (eval "$as_required") 2>/dev/null; then :
+  if (eval "$as_required") 2>/dev/null
+then :
   as_have_required=yes
-else
+else $as_nop
   as_have_required=no
 fi
-  if test x$as_have_required = xyes && (eval "$as_suggested") 2>/dev/null; then :
+  if test x$as_have_required = xyes && (eval "$as_suggested") 2>/dev/null
+then :
 
-else
+else $as_nop
   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 as_found=false
 for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
   as_found=:
   case $as_dir in #(
 	 /*)
 	   for as_base in sh bash ksh sh5; do
 	     # Try only shells that exist, to save several forks.
-	     as_shell=$as_dir/$as_base
+	     as_shell=$as_dir$as_base
 	     if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
-		    { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$as_shell"; } 2>/dev/null; then :
+		    as_run=a "$as_shell" -c "$as_bourne_compatible""$as_required" 2>/dev/null
+then :
   CONFIG_SHELL=$as_shell as_have_required=yes
-		   if { $as_echo "$as_bourne_compatible""$as_suggested" | as_run=a "$as_shell"; } 2>/dev/null; then :
+		   if as_run=a "$as_shell" -c "$as_bourne_compatible""$as_suggested" 2>/dev/null
+then :
   break 2
 fi
 fi
@@ -230,14 +223,21 @@ fi
        esac
   as_found=false
 done
-$as_found || { if { test -f "$SHELL" || test -f "$SHELL.exe"; } &&
-	      { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$SHELL"; } 2>/dev/null; then :
-  CONFIG_SHELL=$SHELL as_have_required=yes
-fi; }
 IFS=$as_save_IFS
+if $as_found
+then :
+
+else $as_nop
+  if { test -f "$SHELL" || test -f "$SHELL.exe"; } &&
+	      as_run=a "$SHELL" -c "$as_bourne_compatible""$as_required" 2>/dev/null
+then :
+  CONFIG_SHELL=$SHELL as_have_required=yes
+fi
+fi
 
 
-      if test "x$CONFIG_SHELL" != x; then :
+      if test "x$CONFIG_SHELL" != x
+then :
   export CONFIG_SHELL
              # We cannot yet assume a decent shell, so we have to provide a
 # neutralization value for shells without unset; and this also
@@ -255,18 +255,19 @@ esac
 exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
 # Admittedly, this is quite paranoid, since all the known shells bail
 # out after a failed `exec'.
-$as_echo "$0: could not re-execute with $CONFIG_SHELL" >&2
+printf "%s\n" "$0: could not re-execute with $CONFIG_SHELL" >&2
 exit 255
 fi
 
-    if test x$as_have_required = xno; then :
-  $as_echo "$0: This script requires a shell more modern than all"
-  $as_echo "$0: the shells that I found on your system."
-  if test x${ZSH_VERSION+set} = xset ; then
-    $as_echo "$0: In particular, zsh $ZSH_VERSION has bugs and should"
-    $as_echo "$0: be upgraded to zsh 4.3.4 or later."
+    if test x$as_have_required = xno
+then :
+  printf "%s\n" "$0: This script requires a shell more modern than all"
+  printf "%s\n" "$0: the shells that I found on your system."
+  if test ${ZSH_VERSION+y} ; then
+    printf "%s\n" "$0: In particular, zsh $ZSH_VERSION has bugs and should"
+    printf "%s\n" "$0: be upgraded to zsh 4.3.4 or later."
   else
-    $as_echo "$0: Please tell bug-autoconf@gnu.org and
+    printf "%s\n" "$0: Please tell bug-autoconf@gnu.org and
 $0: bug-enscript@gnu.org about your system, including any
 $0: error possibly output before this message. Then install
 $0: a modern shell, or manually run the script under such a
@@ -294,6 +295,7 @@ as_fn_unset ()
 }
 as_unset=as_fn_unset
 
+
 # as_fn_set_status STATUS
 # -----------------------
 # Set $? to STATUS, without forking.
@@ -311,6 +313,14 @@ as_fn_exit ()
   as_fn_set_status $1
   exit $1
 } # as_fn_exit
+# as_fn_nop
+# ---------
+# Do nothing but, unlike ":", preserve the value of $?.
+as_fn_nop ()
+{
+  return $?
+}
+as_nop=as_fn_nop
 
 # as_fn_mkdir_p
 # -------------
@@ -325,7 +335,7 @@ as_fn_mkdir_p ()
     as_dirs=
     while :; do
       case $as_dir in #(
-      *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
+      *\'*) as_qdir=`printf "%s\n" "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
       *) as_qdir=$as_dir;;
       esac
       as_dirs="'$as_qdir' $as_dirs"
@@ -334,7 +344,7 @@ $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$as_dir" : 'X\(//\)[^/]' \| \
 	 X"$as_dir" : 'X\(//\)$' \| \
 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$as_dir" |
+printf "%s\n" X"$as_dir" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -373,12 +383,13 @@ as_fn_executable_p ()
 # advantage of any shell optimizations that allow amortized linear growth over
 # repeated appends, instead of the typical quadratic growth present in naive
 # implementations.
-if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
+if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null
+then :
   eval 'as_fn_append ()
   {
     eval $1+=\$2
   }'
-else
+else $as_nop
   as_fn_append ()
   {
     eval $1=\$$1\$2
@@ -390,18 +401,27 @@ fi # as_fn_append
 # Perform arithmetic evaluation on the ARGs, and store the result in the
 # global $as_val. Take advantage of shells that can avoid forks. The arguments
 # must be portable across $(()) and expr.
-if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
+if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null
+then :
   eval 'as_fn_arith ()
   {
     as_val=$(( $* ))
   }'
-else
+else $as_nop
   as_fn_arith ()
   {
     as_val=`expr "$@" || test $? -eq 1`
   }
 fi # as_fn_arith
 
+# as_fn_nop
+# ---------
+# Do nothing but, unlike ":", preserve the value of $?.
+as_fn_nop ()
+{
+  return $?
+}
+as_nop=as_fn_nop
 
 # as_fn_error STATUS ERROR [LINENO LOG_FD]
 # ----------------------------------------
@@ -413,9 +433,9 @@ as_fn_error ()
   as_status=$1; test $as_status -eq 0 && as_status=1
   if test "$4"; then
     as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $2" >&2
+  printf "%s\n" "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
@@ -442,7 +462,7 @@ as_me=`$as_basename -- "$0" ||
 $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
 	 X"$0" : 'X\(//\)$' \| \
 	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X/"$0" |
+printf "%s\n" X/"$0" |
     sed '/^.*\/\([^/][^/]*\)\/*$/{
 	    s//\1/
 	    q
@@ -486,7 +506,7 @@ as_cr_alnum=$as_cr_Letters$as_cr_digits
       s/-\n.*//
     ' >$as_me.lineno &&
   chmod +x "$as_me.lineno" ||
-    { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
+    { printf "%s\n" "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
 
   # If we had to re-execute with $CONFIG_SHELL, we're ensured to have
   # already done that, so ensure we don't try to do so again and fall
@@ -500,6 +520,10 @@ as_cr_alnum=$as_cr_Letters$as_cr_digits
   exit
 }
 
+
+# Determine whether it's possible to make 'echo' print without a newline.
+# These variables are no longer used directly by Autoconf, but are AC_SUBSTed
+# for compatibility with existing Makefiles.
 ECHO_C= ECHO_N= ECHO_T=
 case `echo -n x` in #(((((
 -n*)
@@ -513,6 +537,13 @@ case `echo -n x` in #(((((
   ECHO_N='-n';;
 esac
 
+# For backward compatibility with old third-party macros, we provide
+# the shell variables $as_echo and $as_echo_n.  New code should use
+# AS_ECHO(["message"]) and AS_ECHO_N(["message"]), respectively.
+as_echo='printf %s\n'
+as_echo_n='printf %s'
+
+
 rm -f conf$$ conf$$.exe conf$$.file
 if test -d conf$$.dir; then
   rm -f conf$$.dir/conf$$.file
@@ -583,47 +614,43 @@ PACKAGE_TARNAME='enscript'
 PACKAGE_VERSION='1.6.6'
 PACKAGE_STRING='GNU Enscript 1.6.6'
 PACKAGE_BUGREPORT='bug-enscript@gnu.org'
-PACKAGE_URL='http://www.gnu.org/software/enscript/'
+PACKAGE_URL='https://www.gnu.org/software/enscript/'
 
 ac_unique_file="src/gsint.h"
 # Factoring default headers for most tests.
 ac_includes_default="\
-#include <stdio.h>
-#ifdef HAVE_SYS_TYPES_H
-# include <sys/types.h>
-#endif
-#ifdef HAVE_SYS_STAT_H
-# include <sys/stat.h>
+#include <stddef.h>
+#ifdef HAVE_STDIO_H
+# include <stdio.h>
 #endif
-#ifdef STDC_HEADERS
+#ifdef HAVE_STDLIB_H
 # include <stdlib.h>
-# include <stddef.h>
-#else
-# ifdef HAVE_STDLIB_H
-#  include <stdlib.h>
-# endif
 #endif
 #ifdef HAVE_STRING_H
-# if !defined STDC_HEADERS && defined HAVE_MEMORY_H
-#  include <memory.h>
-# endif
 # include <string.h>
 #endif
-#ifdef HAVE_STRINGS_H
-# include <strings.h>
-#endif
 #ifdef HAVE_INTTYPES_H
 # include <inttypes.h>
 #endif
 #ifdef HAVE_STDINT_H
 # include <stdint.h>
 #endif
+#ifdef HAVE_STRINGS_H
+# include <strings.h>
+#endif
+#ifdef HAVE_SYS_TYPES_H
+# include <sys/types.h>
+#endif
+#ifdef HAVE_SYS_STAT_H
+# include <sys/stat.h>
+#endif
 #ifdef HAVE_UNISTD_H
 # include <unistd.h>
 #endif"
 
+ac_header_c_list=
+ac_func_c_list=
 gt_needs=
-ac_header_list=
 ac_subst_vars='am__EXEEXT_FALSE
 am__EXEEXT_TRUE
 LTLIBOBJS
@@ -664,6 +691,7 @@ PRI_MACROS_BROKEN
 HAVE_VISIBILITY
 CFLAG_VISIBILITY
 GLIBC2
+CPP
 host_os
 host_vendor
 host_cpu
@@ -697,7 +725,6 @@ ANSI2KNR
 U
 EGREP
 GREP
-CPP
 am__fastdepCC_FALSE
 am__fastdepCC_TRUE
 CCDEPMODE
@@ -757,6 +784,7 @@ infodir
 docdir
 oldincludedir
 includedir
+runstatedir
 localstatedir
 sharedstatedir
 sysconfdir
@@ -801,9 +829,9 @@ CFLAGS
 LDFLAGS
 LIBS
 CPPFLAGS
-CPP
 YACC
-YFLAGS'
+YFLAGS
+CPP'
 
 
 # Initialize some variables set by options.
@@ -842,6 +870,7 @@ datadir='${datarootdir}'
 sysconfdir='${prefix}/etc'
 sharedstatedir='${prefix}/com'
 localstatedir='${prefix}/var'
+runstatedir='${localstatedir}/run'
 includedir='${prefix}/include'
 oldincludedir='/usr/include'
 docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
@@ -871,8 +900,6 @@ do
   *)    ac_optarg=yes ;;
   esac
 
-  # Accept the important Cygnus configure options, so we can diagnose typos.
-
   case $ac_dashdash$ac_option in
   --)
     ac_dashdash=yes ;;
@@ -913,9 +940,9 @@ do
     ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: \`$ac_useropt'"
     ac_useropt_orig=$ac_useropt
-    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "enable_$ac_useropt"
@@ -939,9 +966,9 @@ do
     ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: \`$ac_useropt'"
     ac_useropt_orig=$ac_useropt
-    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "enable_$ac_useropt"
@@ -1094,6 +1121,15 @@ do
   | -silent | --silent | --silen | --sile | --sil)
     silent=yes ;;
 
+  -runstatedir | --runstatedir | --runstatedi | --runstated \
+  | --runstate | --runstat | --runsta | --runst | --runs \
+  | --run | --ru | --r)
+    ac_prev=runstatedir ;;
+  -runstatedir=* | --runstatedir=* | --runstatedi=* | --runstated=* \
+  | --runstate=* | --runstat=* | --runsta=* | --runst=* | --runs=* \
+  | --run=* | --ru=* | --r=*)
+    runstatedir=$ac_optarg ;;
+
   -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
     ac_prev=sbindir ;;
   -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
@@ -1143,9 +1179,9 @@ do
     ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: \`$ac_useropt'"
     ac_useropt_orig=$ac_useropt
-    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "with_$ac_useropt"
@@ -1159,9 +1195,9 @@ do
     ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: \`$ac_useropt'"
     ac_useropt_orig=$ac_useropt
-    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "with_$ac_useropt"
@@ -1205,9 +1241,9 @@ Try \`$0 --help' for more information"
 
   *)
     # FIXME: should be removed in autoconf 3.0.
-    $as_echo "$as_me: WARNING: you should use --build, --host, --target" >&2
+    printf "%s\n" "$as_me: WARNING: you should use --build, --host, --target" >&2
     expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
-      $as_echo "$as_me: WARNING: invalid host type: $ac_option" >&2
+      printf "%s\n" "$as_me: WARNING: invalid host type: $ac_option" >&2
     : "${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}"
     ;;
 
@@ -1223,7 +1259,7 @@ if test -n "$ac_unrecognized_opts"; then
   case $enable_option_checking in
     no) ;;
     fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
-    *)     $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
+    *)     printf "%s\n" "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
   esac
 fi
 
@@ -1231,7 +1267,7 @@ fi
 for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
 		datadir sysconfdir sharedstatedir localstatedir includedir \
 		oldincludedir docdir infodir htmldir dvidir pdfdir psdir \
-		libdir localedir mandir
+		libdir localedir mandir runstatedir
 do
   eval ac_val=\$$ac_var
   # Remove trailing slashes.
@@ -1287,7 +1323,7 @@ $as_expr X"$as_myself" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$as_myself" : 'X\(//\)[^/]' \| \
 	 X"$as_myself" : 'X\(//\)$' \| \
 	 X"$as_myself" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$as_myself" |
+printf "%s\n" X"$as_myself" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -1384,6 +1420,7 @@ Fine tuning of the installation directories:
   --sysconfdir=DIR        read-only single-machine data [PREFIX/etc]
   --sharedstatedir=DIR    modifiable architecture-independent data [PREFIX/com]
   --localstatedir=DIR     modifiable single-machine data [PREFIX/var]
+  --runstatedir=DIR       modifiable per-process data [LOCALSTATEDIR/run]
   --libdir=DIR            object code libraries [EPREFIX/lib]
   --includedir=DIR        C header files [PREFIX/include]
   --oldincludedir=DIR     C header files for non-gcc [/usr/include]
@@ -1454,20 +1491,20 @@ Some influential environment variables:
   LIBS        libraries to pass to the linker, e.g. -l<library>
   CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if
               you have headers in a nonstandard directory <include dir>
-  CPP         C preprocessor
   YACC        The `Yet Another Compiler Compiler' implementation to use.
               Defaults to the first program found out of: `bison -y', `byacc',
               `yacc'.
   YFLAGS      The list of arguments that will be passed by default to $YACC.
               This script will default YFLAGS to the empty string to avoid a
               default value of `-d' given by some make applications.
+  CPP         C preprocessor
 
 Use these variables to override the choices made by `configure' or to help
 it to find libraries and programs with nonstandard names/locations.
 
 Report bugs to <bug-enscript@gnu.org>.
-GNU Enscript home page: <http://www.gnu.org/software/enscript/>.
-General help using GNU software: <http://www.gnu.org/gethelp/>.
+GNU Enscript home page: <https://www.gnu.org/software/enscript/>.
+General help using GNU software: <https://www.gnu.org/gethelp/>.
 _ACEOF
 ac_status=$?
 fi
@@ -1483,9 +1520,9 @@ if test "$ac_init_help" = "recursive"; then
 case "$ac_dir" in
 .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
 *)
-  ac_dir_suffix=/`$as_echo "$ac_dir" | sed 's|^\.[\\/]||'`
+  ac_dir_suffix=/`printf "%s\n" "$ac_dir" | sed 's|^\.[\\/]||'`
   # A ".." for each directory in $ac_dir_suffix.
-  ac_top_builddir_sub=`$as_echo "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
+  ac_top_builddir_sub=`printf "%s\n" "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
   case $ac_top_builddir_sub in
   "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
   *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
@@ -1513,7 +1550,8 @@ esac
 ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
 
     cd "$ac_dir" || { ac_status=$?; continue; }
-    # Check for guested configure.
+    # Check for configure.gnu first; this name is used for a wrapper for
+    # Metaconfig's "Configure" on case-insensitive file systems.
     if test -f "$ac_srcdir/configure.gnu"; then
       echo &&
       $SHELL "$ac_srcdir/configure.gnu" --help=recursive
@@ -1521,7 +1559,7 @@ ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
       echo &&
       $SHELL "$ac_srcdir/configure" --help=recursive
     else
-      $as_echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
+      printf "%s\n" "$as_me: WARNING: no configuration information is in $ac_dir" >&2
     fi || ac_status=$?
     cd "$ac_pwd" || { ac_status=$?; break; }
   done
@@ -1531,9 +1569,9 @@ test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
 GNU Enscript configure 1.6.6
-generated by GNU Autoconf 2.69
+generated by GNU Autoconf 2.71
 
-Copyright (C) 2012 Free Software Foundation, Inc.
+Copyright (C) 2021 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
@@ -1550,14 +1588,14 @@ fi
 ac_fn_c_try_compile ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  rm -f conftest.$ac_objext
+  rm -f conftest.$ac_objext conftest.beam
   if { { ac_try="$ac_compile"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_compile") 2>conftest.err
   ac_status=$?
   if test -s conftest.err; then
@@ -1565,14 +1603,15 @@ $as_echo "$ac_try_echo"; } >&5
     cat conftest.er1 >&5
     mv -f conftest.er1 conftest.err
   fi
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; } && {
 	 test -z "$ac_c_werror_flag" ||
 	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then :
+       } && test -s conftest.$ac_objext
+then :
   ac_retval=0
-else
-  $as_echo "$as_me: failed program was:" >&5
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
 	ac_retval=1
@@ -1582,176 +1621,6 @@ fi
 
 } # ac_fn_c_try_compile
 
-# ac_fn_c_try_cpp LINENO
-# ----------------------
-# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
-ac_fn_c_try_cpp ()
-{
-  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if { { ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
-  ac_status=$?
-  if test -s conftest.err; then
-    grep -v '^ *+' conftest.err >conftest.er1
-    cat conftest.er1 >&5
-    mv -f conftest.er1 conftest.err
-  fi
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; } > conftest.i && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then :
-  ac_retval=0
-else
-  $as_echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-    ac_retval=1
-fi
-  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
-  as_fn_set_status $ac_retval
-
-} # ac_fn_c_try_cpp
-
-# ac_fn_c_check_header_mongrel LINENO HEADER VAR INCLUDES
-# -------------------------------------------------------
-# Tests whether HEADER exists, giving a warning if it cannot be compiled using
-# the include files in INCLUDES and setting the cache variable VAR
-# accordingly.
-ac_fn_c_check_header_mongrel ()
-{
-  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if eval \${$3+:} false; then :
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
-$as_echo_n "checking for $2... " >&6; }
-if eval \${$3+:} false; then :
-  $as_echo_n "(cached) " >&6
-fi
-eval ac_res=\$$3
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 usability" >&5
-$as_echo_n "checking $2 usability... " >&6; }
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-$4
-#include <$2>
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_header_compiler=yes
-else
-  ac_header_compiler=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_compiler" >&5
-$as_echo "$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 presence" >&5
-$as_echo_n "checking $2 presence... " >&6; }
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <$2>
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
-  ac_header_preproc=yes
-else
-  ac_header_preproc=no
-fi
-rm -f conftest.err conftest.i conftest.$ac_ext
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
-$as_echo "$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((
-  yes:no: )
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&5
-$as_echo "$as_me: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
-$as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
-    ;;
-  no:yes:* )
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: present but cannot be compiled" >&5
-$as_echo "$as_me: WARNING: $2: present but cannot be compiled" >&2;}
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     check for missing prerequisite headers?" >&5
-$as_echo "$as_me: WARNING: $2:     check for missing prerequisite headers?" >&2;}
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: see the Autoconf documentation" >&5
-$as_echo "$as_me: WARNING: $2: see the Autoconf documentation" >&2;}
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&5
-$as_echo "$as_me: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
-$as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
-( $as_echo "## ----------------------------------- ##
-## Report this to bug-enscript@gnu.org ##
-## ----------------------------------- ##"
-     ) | sed "s/^/$as_me: WARNING:     /" >&2
-    ;;
-esac
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
-$as_echo_n "checking for $2... " >&6; }
-if eval \${$3+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  eval "$3=\$ac_header_compiler"
-fi
-eval ac_res=\$$3
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
-fi
-  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
-
-} # ac_fn_c_check_header_mongrel
-
-# ac_fn_c_try_run LINENO
-# ----------------------
-# Try to link conftest.$ac_ext, and return whether this succeeded. Assumes
-# that executables *can* be run.
-ac_fn_c_try_run ()
-{
-  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if { { ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_link") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; } && { ac_try='./conftest$ac_exeext'
-  { { case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_try") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; }; then :
-  ac_retval=0
-else
-  $as_echo "$as_me: program exited with status $ac_status" >&5
-       $as_echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-       ac_retval=$ac_status
-fi
-  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
-  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
-  as_fn_set_status $ac_retval
-
-} # ac_fn_c_try_run
-
 # ac_fn_c_check_header_compile LINENO HEADER VAR INCLUDES
 # -------------------------------------------------------
 # Tests whether HEADER exists and can be compiled using the include files in
@@ -1759,26 +1628,28 @@ fi
 ac_fn_c_check_header_compile ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
-$as_echo_n "checking for $2... " >&6; }
-if eval \${$3+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
+printf %s "checking for $2... " >&6; }
+if eval test \${$3+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 #include <$2>
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   eval "$3=yes"
-else
+else $as_nop
   eval "$3=no"
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
 eval ac_res=\$$3
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_header_compile
@@ -1790,17 +1661,18 @@ $as_echo "$ac_res" >&6; }
 ac_fn_c_check_type ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
-$as_echo_n "checking for $2... " >&6; }
-if eval \${$3+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
+printf %s "checking for $2... " >&6; }
+if eval test \${$3+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   eval "$3=no"
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 int
-main ()
+main (void)
 {
 if (sizeof ($2))
 	 return 0;
@@ -1808,12 +1680,13 @@ if (sizeof ($2))
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 int
-main ()
+main (void)
 {
 if (sizeof (($2)))
 	    return 0;
@@ -1821,18 +1694,19 @@ if (sizeof (($2)))
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
 
-else
+else $as_nop
   eval "$3=yes"
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
 eval ac_res=\$$3
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_type
@@ -1843,14 +1717,14 @@ $as_echo "$ac_res" >&6; }
 ac_fn_c_try_link ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  rm -f conftest.$ac_objext conftest$ac_exeext
+  rm -f conftest.$ac_objext conftest.beam conftest$ac_exeext
   if { { ac_try="$ac_link"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_link") 2>conftest.err
   ac_status=$?
   if test -s conftest.err; then
@@ -1858,17 +1732,18 @@ $as_echo "$ac_try_echo"; } >&5
     cat conftest.er1 >&5
     mv -f conftest.er1 conftest.err
   fi
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; } && {
 	 test -z "$ac_c_werror_flag" ||
 	 test ! -s conftest.err
        } && test -s conftest$ac_exeext && {
 	 test "$cross_compiling" = yes ||
 	 test -x conftest$ac_exeext
-       }; then :
+       }
+then :
   ac_retval=0
-else
-  $as_echo "$as_me: failed program was:" >&5
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
 	ac_retval=1
@@ -1883,17 +1758,61 @@ fi
 
 } # ac_fn_c_try_link
 
+# ac_fn_c_try_run LINENO
+# ----------------------
+# Try to run conftest.$ac_ext, and return whether this succeeded. Assumes that
+# executables *can* be run.
+ac_fn_c_try_run ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  if { { ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_link") 2>&5
+  ac_status=$?
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } && { ac_try='./conftest$ac_exeext'
+  { { case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_try") 2>&5
+  ac_status=$?
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }; }
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: program exited with status $ac_status" >&5
+       printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+       ac_retval=$ac_status
+fi
+  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_c_try_run
+
 # ac_fn_c_check_func LINENO FUNC VAR
 # ----------------------------------
 # Tests whether FUNC exists, setting the cache variable VAR accordingly
 ac_fn_c_check_func ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
-$as_echo_n "checking for $2... " >&6; }
-if eval \${$3+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
+printf %s "checking for $2... " >&6; }
+if eval test \${$3+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 /* Define $2 to an innocuous variant, in case <limits.h> declares $2.
@@ -1901,16 +1820,9 @@ else
 #define $2 innocuous_$2
 
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $2 (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
+   which can conflict with char $2 (); below.  */
 
+#include <limits.h>
 #undef $2
 
 /* Override any GCC internal prototype to avoid an error.
@@ -1928,60 +1840,100 @@ choke me
 #endif
 
 int
-main ()
+main (void)
 {
 return $2 ();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$3=yes"
-else
+else $as_nop
   eval "$3=no"
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
 eval ac_res=\$$3
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_func
 
-# ac_fn_c_compute_int LINENO EXPR VAR INCLUDES
-# --------------------------------------------
-# Tries to find the compile-time value of EXPR in a program that includes
-# INCLUDES, setting VAR accordingly. Returns whether the value could be
-# computed
-ac_fn_c_compute_int ()
+# ac_fn_c_try_cpp LINENO
+# ----------------------
+# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
+ac_fn_c_try_cpp ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if test "$cross_compiling" = yes; then
-    # Depending upon the size, compute the lo and hi bounds.
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-$4
-int
-main ()
-{
-static int test_array [1 - 2 * !(($2) >= 0)];
-test_array [0] = 0;
-return test_array [0];
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+  if { { ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    grep -v '^ *+' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+    mv -f conftest.er1 conftest.err
+  fi
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } > conftest.i && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+    ac_retval=1
+fi
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_c_try_cpp
+
+# ac_fn_c_compute_int LINENO EXPR VAR INCLUDES
+# --------------------------------------------
+# Tries to find the compile-time value of EXPR in a program that includes
+# INCLUDES, setting VAR accordingly. Returns whether the value could be
+# computed
+ac_fn_c_compute_int ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  if test "$cross_compiling" = yes; then
+    # Depending upon the size, compute the lo and hi bounds.
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$4
+int
+main (void)
+{
+static int test_array [1 - 2 * !(($2) >= 0)];
+test_array [0] = 0;
+return test_array [0];
+
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_lo=0 ac_mid=0
   while :; do
     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 int
-main ()
+main (void)
 {
 static int test_array [1 - 2 * !(($2) <= $ac_mid)];
 test_array [0] = 0;
@@ -1991,9 +1943,10 @@ return test_array [0];
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_hi=$ac_mid; break
-else
+else $as_nop
   as_fn_arith $ac_mid + 1 && ac_lo=$as_val
 			if test $ac_lo -le $ac_mid; then
 			  ac_lo= ac_hi=
@@ -2001,14 +1954,14 @@ else
 			fi
 			as_fn_arith 2 '*' $ac_mid + 1 && ac_mid=$as_val
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
   done
-else
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 int
-main ()
+main (void)
 {
 static int test_array [1 - 2 * !(($2) < 0)];
 test_array [0] = 0;
@@ -2018,14 +1971,15 @@ return test_array [0];
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_hi=-1 ac_mid=-1
   while :; do
     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 int
-main ()
+main (void)
 {
 static int test_array [1 - 2 * !(($2) >= $ac_mid)];
 test_array [0] = 0;
@@ -2035,9 +1989,10 @@ return test_array [0];
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_lo=$ac_mid; break
-else
+else $as_nop
   as_fn_arith '(' $ac_mid ')' - 1 && ac_hi=$as_val
 			if test $ac_mid -le $ac_hi; then
 			  ac_lo= ac_hi=
@@ -2045,14 +2000,14 @@ else
 			fi
 			as_fn_arith 2 '*' $ac_mid && ac_mid=$as_val
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
   done
-else
+else $as_nop
   ac_lo= ac_hi=
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 # Binary search between lo and hi bounds.
 while test "x$ac_lo" != "x$ac_hi"; do
   as_fn_arith '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo && ac_mid=$as_val
@@ -2060,7 +2015,7 @@ while test "x$ac_lo" != "x$ac_hi"; do
 /* end confdefs.h.  */
 $4
 int
-main ()
+main (void)
 {
 static int test_array [1 - 2 * !(($2) <= $ac_mid)];
 test_array [0] = 0;
@@ -2070,12 +2025,13 @@ return test_array [0];
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_hi=$ac_mid
-else
+else $as_nop
   as_fn_arith '(' $ac_mid ')' + 1 && ac_lo=$as_val
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 done
 case $ac_lo in #((
 ?*) eval "$3=\$ac_lo"; ac_retval=0 ;;
@@ -2085,12 +2041,12 @@ esac
     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
-static long int longval () { return $2; }
-static unsigned long int ulongval () { return $2; }
+static long int longval (void) { return $2; }
+static unsigned long int ulongval (void) { return $2; }
 #include <stdio.h>
 #include <stdlib.h>
 int
-main ()
+main (void)
 {
 
   FILE *f = fopen ("conftest.val", "w");
@@ -2118,9 +2074,10 @@ main ()
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   echo >>conftest.val; read $3 <conftest.val; ac_retval=0
-else
+else $as_nop
   ac_retval=1
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -2132,14 +2089,34 @@ rm -f conftest.val
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_compute_int
+ac_configure_args_raw=
+for ac_arg
+do
+  case $ac_arg in
+  *\'*)
+    ac_arg=`printf "%s\n" "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+  esac
+  as_fn_append ac_configure_args_raw " '$ac_arg'"
+done
+
+case $ac_configure_args_raw in
+  *$as_nl*)
+    ac_safe_unquote= ;;
+  *)
+    ac_unsafe_z='|&;<>()$`\\"*?[ ''	' # This string ends in space, tab.
+    ac_unsafe_a="$ac_unsafe_z#~"
+    ac_safe_unquote="s/ '\\([^$ac_unsafe_a][^$ac_unsafe_z]*\\)'/ \\1/g"
+    ac_configure_args_raw=`      printf "%s\n" "$ac_configure_args_raw" | sed "$ac_safe_unquote"`;;
+esac
+
 cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
 It was created by GNU Enscript $as_me 1.6.6, which was
-generated by GNU Autoconf 2.69.  Invocation command line was
+generated by GNU Autoconf 2.71.  Invocation command line was
 
-  $ $0 $@
+  $ $0$ac_configure_args_raw
 
 _ACEOF
 exec 5>>config.log
@@ -2172,8 +2149,12 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    $as_echo "PATH: $as_dir"
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    printf "%s\n" "PATH: $as_dir"
   done
 IFS=$as_save_IFS
 
@@ -2208,7 +2189,7 @@ do
     | -silent | --silent | --silen | --sile | --sil)
       continue ;;
     *\'*)
-      ac_arg=`$as_echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+      ac_arg=`printf "%s\n" "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
     esac
     case $ac_pass in
     1) as_fn_append ac_configure_args0 " '$ac_arg'" ;;
@@ -2243,11 +2224,13 @@ done
 # WARNING: Use '\'' to represent an apostrophe within the trap.
 # WARNING: Do not start the trap code with a newline, due to a FreeBSD 4.0 bug.
 trap 'exit_status=$?
+  # Sanitize IFS.
+  IFS=" ""	$as_nl"
   # Save into config.log some information that might help in debugging.
   {
     echo
 
-    $as_echo "## ---------------- ##
+    printf "%s\n" "## ---------------- ##
 ## Cache variables. ##
 ## ---------------- ##"
     echo
@@ -2258,8 +2241,8 @@ trap 'exit_status=$?
     case $ac_val in #(
     *${as_nl}*)
       case $ac_var in #(
-      *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
-$as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
+      *_cv_*) { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
+printf "%s\n" "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
       esac
       case $ac_var in #(
       _ | IFS | as_nl) ;; #(
@@ -2283,7 +2266,7 @@ $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
 )
     echo
 
-    $as_echo "## ----------------- ##
+    printf "%s\n" "## ----------------- ##
 ## Output variables. ##
 ## ----------------- ##"
     echo
@@ -2291,14 +2274,14 @@ $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
     do
       eval ac_val=\$$ac_var
       case $ac_val in
-      *\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
+      *\'\''*) ac_val=`printf "%s\n" "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
       esac
-      $as_echo "$ac_var='\''$ac_val'\''"
+      printf "%s\n" "$ac_var='\''$ac_val'\''"
     done | sort
     echo
 
     if test -n "$ac_subst_files"; then
-      $as_echo "## ------------------- ##
+      printf "%s\n" "## ------------------- ##
 ## File substitutions. ##
 ## ------------------- ##"
       echo
@@ -2306,15 +2289,15 @@ $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
       do
 	eval ac_val=\$$ac_var
 	case $ac_val in
-	*\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
+	*\'\''*) ac_val=`printf "%s\n" "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
 	esac
-	$as_echo "$ac_var='\''$ac_val'\''"
+	printf "%s\n" "$ac_var='\''$ac_val'\''"
       done | sort
       echo
     fi
 
     if test -s confdefs.h; then
-      $as_echo "## ----------- ##
+      printf "%s\n" "## ----------- ##
 ## confdefs.h. ##
 ## ----------- ##"
       echo
@@ -2322,8 +2305,8 @@ $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
       echo
     fi
     test "$ac_signal" != 0 &&
-      $as_echo "$as_me: caught signal $ac_signal"
-    $as_echo "$as_me: exit $exit_status"
+      printf "%s\n" "$as_me: caught signal $ac_signal"
+    printf "%s\n" "$as_me: exit $exit_status"
   } >&5
   rm -f core *.core core.conftest.* &&
     rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
@@ -2337,63 +2320,48 @@ ac_signal=0
 # confdefs.h avoids OS command line length limits that DEFS can exceed.
 rm -f -r conftest* confdefs.h
 
-$as_echo "/* confdefs.h */" > confdefs.h
+printf "%s\n" "/* confdefs.h */" > confdefs.h
 
 # Predefined preprocessor variables.
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_NAME "$PACKAGE_NAME"
-_ACEOF
+printf "%s\n" "#define PACKAGE_NAME \"$PACKAGE_NAME\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_TARNAME "$PACKAGE_TARNAME"
-_ACEOF
+printf "%s\n" "#define PACKAGE_TARNAME \"$PACKAGE_TARNAME\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_VERSION "$PACKAGE_VERSION"
-_ACEOF
+printf "%s\n" "#define PACKAGE_VERSION \"$PACKAGE_VERSION\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_STRING "$PACKAGE_STRING"
-_ACEOF
+printf "%s\n" "#define PACKAGE_STRING \"$PACKAGE_STRING\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
-_ACEOF
+printf "%s\n" "#define PACKAGE_BUGREPORT \"$PACKAGE_BUGREPORT\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_URL "$PACKAGE_URL"
-_ACEOF
+printf "%s\n" "#define PACKAGE_URL \"$PACKAGE_URL\"" >>confdefs.h
 
 
 # Let the site file select an alternate cache file if it wants to.
 # Prefer an explicitly selected file to automatically selected ones.
-ac_site_file1=NONE
-ac_site_file2=NONE
 if test -n "$CONFIG_SITE"; then
-  # We do not want a PATH search for config.site.
-  case $CONFIG_SITE in #((
-    -*)  ac_site_file1=./$CONFIG_SITE;;
-    */*) ac_site_file1=$CONFIG_SITE;;
-    *)   ac_site_file1=./$CONFIG_SITE;;
-  esac
+  ac_site_files="$CONFIG_SITE"
 elif test "x$prefix" != xNONE; then
-  ac_site_file1=$prefix/share/config.site
-  ac_site_file2=$prefix/etc/config.site
+  ac_site_files="$prefix/share/config.site $prefix/etc/config.site"
 else
-  ac_site_file1=$ac_default_prefix/share/config.site
-  ac_site_file2=$ac_default_prefix/etc/config.site
+  ac_site_files="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
 fi
-for ac_site_file in "$ac_site_file1" "$ac_site_file2"
+
+for ac_site_file in $ac_site_files
 do
-  test "x$ac_site_file" = xNONE && continue
-  if test /dev/null != "$ac_site_file" && test -r "$ac_site_file"; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
-$as_echo "$as_me: loading site script $ac_site_file" >&6;}
+  case $ac_site_file in #(
+  */*) :
+     ;; #(
+  *) :
+    ac_site_file=./$ac_site_file ;;
+esac
+  if test -f "$ac_site_file" && test -r "$ac_site_file"; then
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
+printf "%s\n" "$as_me: loading site script $ac_site_file" >&6;}
     sed 's/^/| /' "$ac_site_file" >&5
     . "$ac_site_file" \
-      || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+      || { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "failed to load site script $ac_site_file
 See \`config.log' for more details" "$LINENO" 5; }
   fi
@@ -2403,23 +2371,440 @@ if test -r "$cache_file"; then
   # Some versions of bash will fail to source /dev/null (special files
   # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
   if test /dev/null != "$cache_file" && test -f "$cache_file"; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
-$as_echo "$as_me: loading cache $cache_file" >&6;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
+printf "%s\n" "$as_me: loading cache $cache_file" >&6;}
     case $cache_file in
       [\\/]* | ?:[\\/]* ) . "$cache_file";;
       *)                      . "./$cache_file";;
     esac
   fi
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: creating cache $cache_file" >&5
-$as_echo "$as_me: creating cache $cache_file" >&6;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating cache $cache_file" >&5
+printf "%s\n" "$as_me: creating cache $cache_file" >&6;}
   >$cache_file
 fi
 
+# Test code for whether the C compiler supports C89 (global declarations)
+ac_c_conftest_c89_globals='
+/* Does the compiler advertise C89 conformance?
+   Do not test the value of __STDC__, because some compilers set it to 0
+   while being otherwise adequately conformant. */
+#if !defined __STDC__
+# error "Compiler does not advertise C89 conformance"
+#endif
+
+#include <stddef.h>
+#include <stdarg.h>
+struct stat;
+/* Most of the following tests are stolen from RCS 5.7 src/conf.sh.  */
+struct buf { int x; };
+struct buf * (*rcsopen) (struct buf *, struct stat *, int);
+static char *e (p, i)
+     char **p;
+     int i;
+{
+  return p[i];
+}
+static char *f (char * (*g) (char **, int), char **p, ...)
+{
+  char *s;
+  va_list v;
+  va_start (v,p);
+  s = g (p, va_arg (v,int));
+  va_end (v);
+  return s;
+}
+
+/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
+   function prototypes and stuff, but not \xHH hex character constants.
+   These do not provoke an error unfortunately, instead are silently treated
+   as an "x".  The following induces an error, until -std is added to get
+   proper ANSI mode.  Curiously \x00 != x always comes out true, for an
+   array size at least.  It is necessary to write \x00 == 0 to get something
+   that is true only with -std.  */
+int osf4_cc_array ['\''\x00'\'' == 0 ? 1 : -1];
+
+/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
+   inside strings and character constants.  */
+#define FOO(x) '\''x'\''
+int xlc6_cc_array[FOO(a) == '\''x'\'' ? 1 : -1];
+
+int test (int i, double x);
+struct s1 {int (*f) (int a);};
+struct s2 {int (*f) (double a);};
+int pairnames (int, char **, int *(*)(struct buf *, struct stat *, int),
+               int, int);'
+
+# Test code for whether the C compiler supports C89 (body of main).
+ac_c_conftest_c89_main='
+ok |= (argc == 0 || f (e, argv, 0) != argv[0] || f (e, argv, 1) != argv[1]);
+'
+
+# Test code for whether the C compiler supports C99 (global declarations)
+ac_c_conftest_c99_globals='
+// Does the compiler advertise C99 conformance?
+#if !defined __STDC_VERSION__ || __STDC_VERSION__ < 199901L
+# error "Compiler does not advertise C99 conformance"
+#endif
+
+#include <stdbool.h>
+extern int puts (const char *);
+extern int printf (const char *, ...);
+extern int dprintf (int, const char *, ...);
+extern void *malloc (size_t);
+
+// Check varargs macros.  These examples are taken from C99 6.10.3.5.
+// dprintf is used instead of fprintf to avoid needing to declare
+// FILE and stderr.
+#define debug(...) dprintf (2, __VA_ARGS__)
+#define showlist(...) puts (#__VA_ARGS__)
+#define report(test,...) ((test) ? puts (#test) : printf (__VA_ARGS__))
+static void
+test_varargs_macros (void)
+{
+  int x = 1234;
+  int y = 5678;
+  debug ("Flag");
+  debug ("X = %d\n", x);
+  showlist (The first, second, and third items.);
+  report (x>y, "x is %d but y is %d", x, y);
+}
+
+// Check long long types.
+#define BIG64 18446744073709551615ull
+#define BIG32 4294967295ul
+#define BIG_OK (BIG64 / BIG32 == 4294967297ull && BIG64 % BIG32 == 0)
+#if !BIG_OK
+  #error "your preprocessor is broken"
+#endif
+#if BIG_OK
+#else
+  #error "your preprocessor is broken"
+#endif
+static long long int bignum = -9223372036854775807LL;
+static unsigned long long int ubignum = BIG64;
+
+struct incomplete_array
+{
+  int datasize;
+  double data[];
+};
+
+struct named_init {
+  int number;
+  const wchar_t *name;
+  double average;
+};
+
+typedef const char *ccp;
+
+static inline int
+test_restrict (ccp restrict text)
+{
+  // See if C++-style comments work.
+  // Iterate through items via the restricted pointer.
+  // Also check for declarations in for loops.
+  for (unsigned int i = 0; *(text+i) != '\''\0'\''; ++i)
+    continue;
+  return 0;
+}
+
+// Check varargs and va_copy.
+static bool
+test_varargs (const char *format, ...)
+{
+  va_list args;
+  va_start (args, format);
+  va_list args_copy;
+  va_copy (args_copy, args);
+
+  const char *str = "";
+  int number = 0;
+  float fnumber = 0;
+
+  while (*format)
+    {
+      switch (*format++)
+	{
+	case '\''s'\'': // string
+	  str = va_arg (args_copy, const char *);
+	  break;
+	case '\''d'\'': // int
+	  number = va_arg (args_copy, int);
+	  break;
+	case '\''f'\'': // float
+	  fnumber = va_arg (args_copy, double);
+	  break;
+	default:
+	  break;
+	}
+    }
+  va_end (args_copy);
+  va_end (args);
+
+  return *str && number && fnumber;
+}
+'
+
+# Test code for whether the C compiler supports C99 (body of main).
+ac_c_conftest_c99_main='
+  // Check bool.
+  _Bool success = false;
+  success |= (argc != 0);
+
+  // Check restrict.
+  if (test_restrict ("String literal") == 0)
+    success = true;
+  char *restrict newvar = "Another string";
+
+  // Check varargs.
+  success &= test_varargs ("s, d'\'' f .", "string", 65, 34.234);
+  test_varargs_macros ();
+
+  // Check flexible array members.
+  struct incomplete_array *ia =
+    malloc (sizeof (struct incomplete_array) + (sizeof (double) * 10));
+  ia->datasize = 10;
+  for (int i = 0; i < ia->datasize; ++i)
+    ia->data[i] = i * 1.234;
+
+  // Check named initializers.
+  struct named_init ni = {
+    .number = 34,
+    .name = L"Test wide string",
+    .average = 543.34343,
+  };
+
+  ni.number = 58;
+
+  int dynamic_array[ni.number];
+  dynamic_array[0] = argv[0][0];
+  dynamic_array[ni.number - 1] = 543;
+
+  // work around unused variable warnings
+  ok |= (!success || bignum == 0LL || ubignum == 0uLL || newvar[0] == '\''x'\''
+	 || dynamic_array[ni.number - 1] != 543);
+'
+
+# Test code for whether the C compiler supports C11 (global declarations)
+ac_c_conftest_c11_globals='
+// Does the compiler advertise C11 conformance?
+#if !defined __STDC_VERSION__ || __STDC_VERSION__ < 201112L
+# error "Compiler does not advertise C11 conformance"
+#endif
+
+// Check _Alignas.
+char _Alignas (double) aligned_as_double;
+char _Alignas (0) no_special_alignment;
+extern char aligned_as_int;
+char _Alignas (0) _Alignas (int) aligned_as_int;
+
+// Check _Alignof.
+enum
+{
+  int_alignment = _Alignof (int),
+  int_array_alignment = _Alignof (int[100]),
+  char_alignment = _Alignof (char)
+};
+_Static_assert (0 < -_Alignof (int), "_Alignof is signed");
+
+// Check _Noreturn.
+int _Noreturn does_not_return (void) { for (;;) continue; }
+
+// Check _Static_assert.
+struct test_static_assert
+{
+  int x;
+  _Static_assert (sizeof (int) <= sizeof (long int),
+                  "_Static_assert does not work in struct");
+  long int y;
+};
+
+// Check UTF-8 literals.
+#define u8 syntax error!
+char const utf8_literal[] = u8"happens to be ASCII" "another string";
+
+// Check duplicate typedefs.
+typedef long *long_ptr;
+typedef long int *long_ptr;
+typedef long_ptr long_ptr;
+
+// Anonymous structures and unions -- taken from C11 6.7.2.1 Example 1.
+struct anonymous
+{
+  union {
+    struct { int i; int j; };
+    struct { int k; long int l; } w;
+  };
+  int m;
+} v1;
+'
+
+# Test code for whether the C compiler supports C11 (body of main).
+ac_c_conftest_c11_main='
+  _Static_assert ((offsetof (struct anonymous, i)
+		   == offsetof (struct anonymous, w.k)),
+		  "Anonymous union alignment botch");
+  v1.i = 2;
+  v1.w.k = 5;
+  ok |= v1.i != 5;
+'
+
+# Test code for whether the C compiler supports C11 (complete).
+ac_c_conftest_c11_program="${ac_c_conftest_c89_globals}
+${ac_c_conftest_c99_globals}
+${ac_c_conftest_c11_globals}
+
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_c_conftest_c89_main}
+  ${ac_c_conftest_c99_main}
+  ${ac_c_conftest_c11_main}
+  return ok;
+}
+"
+
+# Test code for whether the C compiler supports C99 (complete).
+ac_c_conftest_c99_program="${ac_c_conftest_c89_globals}
+${ac_c_conftest_c99_globals}
+
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_c_conftest_c89_main}
+  ${ac_c_conftest_c99_main}
+  return ok;
+}
+"
+
+# Test code for whether the C compiler supports C89 (complete).
+ac_c_conftest_c89_program="${ac_c_conftest_c89_globals}
+
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_c_conftest_c89_main}
+  return ok;
+}
+"
+
+as_fn_append ac_header_c_list " stdio.h stdio_h HAVE_STDIO_H"
+as_fn_append ac_header_c_list " stdlib.h stdlib_h HAVE_STDLIB_H"
+as_fn_append ac_header_c_list " string.h string_h HAVE_STRING_H"
+as_fn_append ac_header_c_list " inttypes.h inttypes_h HAVE_INTTYPES_H"
+as_fn_append ac_header_c_list " stdint.h stdint_h HAVE_STDINT_H"
+as_fn_append ac_header_c_list " strings.h strings_h HAVE_STRINGS_H"
+as_fn_append ac_header_c_list " sys/stat.h sys_stat_h HAVE_SYS_STAT_H"
+as_fn_append ac_header_c_list " sys/types.h sys_types_h HAVE_SYS_TYPES_H"
+as_fn_append ac_header_c_list " unistd.h unistd_h HAVE_UNISTD_H"
+as_fn_append ac_header_c_list " wchar.h wchar_h HAVE_WCHAR_H"
+as_fn_append ac_header_c_list " minix/config.h minix_config_h HAVE_MINIX_CONFIG_H"
+as_fn_append ac_func_c_list " vprintf HAVE_VPRINTF"
 gt_needs="$gt_needs "
-as_fn_append ac_header_list " stdlib.h"
-as_fn_append ac_header_list " unistd.h"
-as_fn_append ac_header_list " sys/param.h"
+as_fn_append ac_header_c_list " sys/param.h sys_param_h HAVE_SYS_PARAM_H"
+as_fn_append ac_func_c_list " getpagesize HAVE_GETPAGESIZE"
+
+# Auxiliary files required by this configure script.
+ac_aux_files="config.rpath config.guess config.sub missing install-sh"
+
+# Locations in which to look for auxiliary files.
+ac_aux_dir_candidates="${srcdir}${PATH_SEPARATOR}${srcdir}/..${PATH_SEPARATOR}${srcdir}/../.."
+
+# Search for a directory containing all of the required auxiliary files,
+# $ac_aux_files, from the $PATH-style list $ac_aux_dir_candidates.
+# If we don't find one directory that contains all the files we need,
+# we report the set of missing files from the *first* directory in
+# $ac_aux_dir_candidates and give up.
+ac_missing_aux_files=""
+ac_first_candidate=:
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: looking for aux files: $ac_aux_files" >&5
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+as_found=false
+for as_dir in $ac_aux_dir_candidates
+do
+  IFS=$as_save_IFS
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+  as_found=:
+
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}:  trying $as_dir" >&5
+  ac_aux_dir_found=yes
+  ac_install_sh=
+  for ac_aux in $ac_aux_files
+  do
+    # As a special case, if "install-sh" is required, that requirement
+    # can be satisfied by any of "install-sh", "install.sh", or "shtool",
+    # and $ac_install_sh is set appropriately for whichever one is found.
+    if test x"$ac_aux" = x"install-sh"
+    then
+      if test -f "${as_dir}install-sh"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}install-sh found" >&5
+        ac_install_sh="${as_dir}install-sh -c"
+      elif test -f "${as_dir}install.sh"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}install.sh found" >&5
+        ac_install_sh="${as_dir}install.sh -c"
+      elif test -f "${as_dir}shtool"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}shtool found" >&5
+        ac_install_sh="${as_dir}shtool install -c"
+      else
+        ac_aux_dir_found=no
+        if $ac_first_candidate; then
+          ac_missing_aux_files="${ac_missing_aux_files} install-sh"
+        else
+          break
+        fi
+      fi
+    else
+      if test -f "${as_dir}${ac_aux}"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}${ac_aux} found" >&5
+      else
+        ac_aux_dir_found=no
+        if $ac_first_candidate; then
+          ac_missing_aux_files="${ac_missing_aux_files} ${ac_aux}"
+        else
+          break
+        fi
+      fi
+    fi
+  done
+  if test "$ac_aux_dir_found" = yes; then
+    ac_aux_dir="$as_dir"
+    break
+  fi
+  ac_first_candidate=false
+
+  as_found=false
+done
+IFS=$as_save_IFS
+if $as_found
+then :
+
+else $as_nop
+  as_fn_error $? "cannot find required auxiliary files:$ac_missing_aux_files" "$LINENO" 5
+fi
+
+
+# These three variables are undocumented and unsupported,
+# and are intended to be withdrawn in a future Autoconf release.
+# They can cause serious problems if a builder's source tree is in a directory
+# whose full name contains unusual characters.
+if test -f "${ac_aux_dir}config.guess"; then
+  ac_config_guess="$SHELL ${ac_aux_dir}config.guess"
+fi
+if test -f "${ac_aux_dir}config.sub"; then
+  ac_config_sub="$SHELL ${ac_aux_dir}config.sub"
+fi
+if test -f "$ac_aux_dir/configure"; then
+  ac_configure="$SHELL ${ac_aux_dir}configure"
+fi
+
 # Check that the precious variables saved in the cache have kept the same
 # value.
 ac_cache_corrupted=false
@@ -2430,12 +2815,12 @@ for ac_var in $ac_precious_vars; do
   eval ac_new_val=\$ac_env_${ac_var}_value
   case $ac_old_set,$ac_new_set in
     set,)
-      { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
-$as_echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
+printf "%s\n" "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
       ac_cache_corrupted=: ;;
     ,set)
-      { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was not set in the previous run" >&5
-$as_echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was not set in the previous run" >&5
+printf "%s\n" "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
       ac_cache_corrupted=: ;;
     ,);;
     *)
@@ -2444,24 +2829,24 @@ $as_echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
 	ac_old_val_w=`echo x $ac_old_val`
 	ac_new_val_w=`echo x $ac_new_val`
 	if test "$ac_old_val_w" != "$ac_new_val_w"; then
-	  { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' has changed since the previous run:" >&5
-$as_echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
+	  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' has changed since the previous run:" >&5
+printf "%s\n" "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
 	  ac_cache_corrupted=:
 	else
-	  { $as_echo "$as_me:${as_lineno-$LINENO}: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
-$as_echo "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
+	  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
+printf "%s\n" "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
 	  eval $ac_var=\$ac_old_val
 	fi
-	{ $as_echo "$as_me:${as_lineno-$LINENO}:   former value:  \`$ac_old_val'" >&5
-$as_echo "$as_me:   former value:  \`$ac_old_val'" >&2;}
-	{ $as_echo "$as_me:${as_lineno-$LINENO}:   current value: \`$ac_new_val'" >&5
-$as_echo "$as_me:   current value: \`$ac_new_val'" >&2;}
+	{ printf "%s\n" "$as_me:${as_lineno-$LINENO}:   former value:  \`$ac_old_val'" >&5
+printf "%s\n" "$as_me:   former value:  \`$ac_old_val'" >&2;}
+	{ printf "%s\n" "$as_me:${as_lineno-$LINENO}:   current value: \`$ac_new_val'" >&5
+printf "%s\n" "$as_me:   current value: \`$ac_new_val'" >&2;}
       fi;;
   esac
   # Pass precious variables to config.status.
   if test "$ac_new_set" = set; then
     case $ac_new_val in
-    *\'*) ac_arg=$ac_var=`$as_echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
+    *\'*) ac_arg=$ac_var=`printf "%s\n" "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
     *) ac_arg=$ac_var=$ac_new_val ;;
     esac
     case " $ac_configure_args " in
@@ -2471,11 +2856,12 @@ $as_echo "$as_me:   current value: \`$ac_new_val'" >&2;}
   fi
 done
 if $ac_cache_corrupted; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-  { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
-$as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
-  as_fn_error $? "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
+printf "%s\n" "$as_me: error: changes in the environment can compromise the build" >&2;}
+  as_fn_error $? "run \`${MAKE-make} distclean' and/or \`rm $cache_file'
+	    and start over" "$LINENO" 5
 fi
 ## -------------------- ##
 ## Main body of script. ##
@@ -2495,36 +2881,9 @@ ac_config_headers="$ac_config_headers config.h"
 
 am__api_version='1.11'
 
-ac_aux_dir=
-for ac_dir in "$srcdir" "$srcdir/.." "$srcdir/../.."; do
-  if test -f "$ac_dir/install-sh"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/install-sh -c"
-    break
-  elif test -f "$ac_dir/install.sh"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/install.sh -c"
-    break
-  elif test -f "$ac_dir/shtool"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/shtool install -c"
-    break
-  fi
-done
-if test -z "$ac_aux_dir"; then
-  as_fn_error $? "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
-fi
-
-# These three variables are undocumented and unsupported,
-# and are intended to be withdrawn in a future Autoconf release.
-# They can cause serious problems if a builder's source tree is in a directory
-# whose full name contains unusual characters.
-ac_config_guess="$SHELL $ac_aux_dir/config.guess"  # Please don't use this var.
-ac_config_sub="$SHELL $ac_aux_dir/config.sub"  # Please don't use this var.
-ac_configure="$SHELL $ac_aux_dir/configure"  # Please don't use this var.
 
 
-# Find a good install program.  We prefer a C program (faster),
+  # Find a good install program.  We prefer a C program (faster),
 # so one script is as good as another.  But avoid the broken or
 # incompatible versions:
 # SysV /etc/install, /usr/sbin/install
@@ -2538,20 +2897,25 @@ ac_configure="$SHELL $ac_aux_dir/configure"  # Please don't use this var.
 # OS/2's system install, which has a completely different semantic
 # ./install, which can be erroneously created by make from ./install.sh.
 # Reject install programs that cannot install multiple files.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for a BSD-compatible install" >&5
-$as_echo_n "checking for a BSD-compatible install... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for a BSD-compatible install" >&5
+printf %s "checking for a BSD-compatible install... " >&6; }
 if test -z "$INSTALL"; then
-if ${ac_cv_path_install+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+if test ${ac_cv_path_install+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    # Account for people who put trailing slashes in PATH elements.
-case $as_dir/ in #((
-  ./ | .// | /[cC]/* | \
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    # Account for fact that we put trailing slashes in our PATH walk.
+case $as_dir in #((
+  ./ | /[cC]/* | \
   /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
   ?:[\\/]os2[\\/]install[\\/]* | ?:[\\/]OS2[\\/]INSTALL[\\/]* | \
   /usr/ucb/* ) ;;
@@ -2561,13 +2925,13 @@ case $as_dir/ in #((
     # by default.
     for ac_prog in ginstall scoinst install; do
       for ac_exec_ext in '' $ac_executable_extensions; do
-	if as_fn_executable_p "$as_dir/$ac_prog$ac_exec_ext"; then
+	if as_fn_executable_p "$as_dir$ac_prog$ac_exec_ext"; then
 	  if test $ac_prog = install &&
-	    grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+	    grep dspmsg "$as_dir$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
 	    # AIX install.  It has an incompatible calling convention.
 	    :
 	  elif test $ac_prog = install &&
-	    grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+	    grep pwplus "$as_dir$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
 	    # program-specific install script used by HP pwplus--don't use.
 	    :
 	  else
@@ -2575,12 +2939,12 @@ case $as_dir/ in #((
 	    echo one > conftest.one
 	    echo two > conftest.two
 	    mkdir conftest.dir
-	    if "$as_dir/$ac_prog$ac_exec_ext" -c conftest.one conftest.two "`pwd`/conftest.dir" &&
+	    if "$as_dir$ac_prog$ac_exec_ext" -c conftest.one conftest.two "`pwd`/conftest.dir/" &&
 	      test -s conftest.one && test -s conftest.two &&
 	      test -s conftest.dir/conftest.one &&
 	      test -s conftest.dir/conftest.two
 	    then
-	      ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
+	      ac_cv_path_install="$as_dir$ac_prog$ac_exec_ext -c"
 	      break 3
 	    fi
 	  fi
@@ -2596,7 +2960,7 @@ IFS=$as_save_IFS
 rm -rf conftest.one conftest.two conftest.dir
 
 fi
-  if test "${ac_cv_path_install+set}" = set; then
+  if test ${ac_cv_path_install+y}; then
     INSTALL=$ac_cv_path_install
   else
     # As a last resort, use the slow shell script.  Don't cache a
@@ -2606,8 +2970,8 @@ fi
     INSTALL=$ac_install_sh
   fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $INSTALL" >&5
-$as_echo "$INSTALL" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $INSTALL" >&5
+printf "%s\n" "$INSTALL" >&6; }
 
 # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
 # It thinks the first close brace ends the variable substitution.
@@ -2617,8 +2981,8 @@ test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
 
 test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether build environment is sane" >&5
-$as_echo_n "checking whether build environment is sane... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether build environment is sane" >&5
+printf %s "checking whether build environment is sane... " >&6; }
 # Just in case
 sleep 1
 echo timestamp > conftest.file
@@ -2667,8 +3031,8 @@ else
    as_fn_error $? "newly created file is older than distributed files!
 Check your system clock" "$LINENO" 5
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
 test "$program_prefix" != NONE &&
   program_transform_name="s&^&$program_prefix&;$program_transform_name"
 # Use a double $ so make ignores it.
@@ -2677,12 +3041,13 @@ test "$program_suffix" != NONE &&
 # Double any \ or $.
 # By default was `s,x,x', remove it if useless.
 ac_script='s/[\\$]/&&/g;s/;s,x,x,$//'
-program_transform_name=`$as_echo "$program_transform_name" | sed "$ac_script"`
+program_transform_name=`printf "%s\n" "$program_transform_name" | sed "$ac_script"`
 
 # expand $ac_aux_dir to an absolute path
 am_aux_dir=`cd $ac_aux_dir && pwd`
 
-if test x"${MISSING+set}" != xset; then
+
+  if test x"${MISSING+set}" != xset; then
   case $am_aux_dir in
   *\ * | *\	*)
     MISSING="\${SHELL} \"$am_aux_dir/missing\"" ;;
@@ -2695,8 +3060,8 @@ if eval "$MISSING --run true"; then
   am_missing_run="$MISSING --run "
 else
   am_missing_run=
-  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`missing' script is too old or missing" >&5
-$as_echo "$as_me: WARNING: \`missing' script is too old or missing" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: \`missing' script is too old or missing" >&5
+printf "%s\n" "$as_me: WARNING: \`missing' script is too old or missing" >&2;}
 fi
 
 if test x"${install_sh}" != xset; then
@@ -2716,11 +3081,12 @@ if test "$cross_compiling" != no; then
   if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
 set dummy ${ac_tool_prefix}strip; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_STRIP+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_STRIP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$STRIP"; then
   ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
 else
@@ -2728,11 +3094,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_STRIP="${ac_tool_prefix}strip"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -2743,11 +3113,11 @@ fi
 fi
 STRIP=$ac_cv_prog_STRIP
 if test -n "$STRIP"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $STRIP" >&5
-$as_echo "$STRIP" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $STRIP" >&5
+printf "%s\n" "$STRIP" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -2756,11 +3126,12 @@ if test -z "$ac_cv_prog_STRIP"; then
   ac_ct_STRIP=$STRIP
   # Extract the first word of "strip", so it can be a program name with args.
 set dummy strip; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_ac_ct_STRIP+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_STRIP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_STRIP"; then
   ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
 else
@@ -2768,11 +3139,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_STRIP="strip"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -2783,11 +3158,11 @@ fi
 fi
 ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
 if test -n "$ac_ct_STRIP"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_STRIP" >&5
-$as_echo "$ac_ct_STRIP" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_STRIP" >&5
+printf "%s\n" "$ac_ct_STRIP" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
   if test "x$ac_ct_STRIP" = x; then
@@ -2795,8 +3170,8 @@ fi
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
-$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     STRIP=$ac_ct_STRIP
@@ -2808,25 +3183,31 @@ fi
 fi
 INSTALL_STRIP_PROGRAM="\$(install_sh) -c -s"
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for a thread-safe mkdir -p" >&5
-$as_echo_n "checking for a thread-safe mkdir -p... " >&6; }
+
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for a race-free mkdir -p" >&5
+printf %s "checking for a race-free mkdir -p... " >&6; }
 if test -z "$MKDIR_P"; then
-  if ${ac_cv_path_mkdir+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  if test ${ac_cv_path_mkdir+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH$PATH_SEPARATOR/opt/sfw/bin
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_prog in mkdir gmkdir; do
 	 for ac_exec_ext in '' $ac_executable_extensions; do
-	   as_fn_executable_p "$as_dir/$ac_prog$ac_exec_ext" || continue
-	   case `"$as_dir/$ac_prog$ac_exec_ext" --version 2>&1` in #(
-	     'mkdir (GNU coreutils) '* | \
-	     'mkdir (coreutils) '* | \
+	   as_fn_executable_p "$as_dir$ac_prog$ac_exec_ext" || continue
+	   case `"$as_dir$ac_prog$ac_exec_ext" --version 2>&1` in #(
+	     'mkdir ('*'coreutils) '* | \
+	     'BusyBox '* | \
 	     'mkdir (fileutils) '4.1*)
-	       ac_cv_path_mkdir=$as_dir/$ac_prog$ac_exec_ext
+	       ac_cv_path_mkdir=$as_dir$ac_prog$ac_exec_ext
 	       break 3;;
 	   esac
 	 done
@@ -2837,7 +3218,7 @@ IFS=$as_save_IFS
 fi
 
   test -d ./--version && rmdir ./--version
-  if test "${ac_cv_path_mkdir+set}" = set; then
+  if test ${ac_cv_path_mkdir+y}; then
     MKDIR_P="$ac_cv_path_mkdir -p"
   else
     # As a last resort, use the slow shell script.  Don't cache a
@@ -2847,8 +3228,8 @@ fi
     MKDIR_P="$ac_install_sh -d"
   fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $MKDIR_P" >&5
-$as_echo "$MKDIR_P" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MKDIR_P" >&5
+printf "%s\n" "$MKDIR_P" >&6; }
 
 mkdir_p="$MKDIR_P"
 case $mkdir_p in
@@ -2860,11 +3241,12 @@ for ac_prog in gawk mawk nawk awk
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_AWK+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_AWK+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$AWK"; then
   ac_cv_prog_AWK="$AWK" # Let the user override the test.
 else
@@ -2872,11 +3254,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_AWK="$ac_prog"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -2887,24 +3273,25 @@ fi
 fi
 AWK=$ac_cv_prog_AWK
 if test -n "$AWK"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AWK" >&5
-$as_echo "$AWK" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $AWK" >&5
+printf "%s\n" "$AWK" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
   test -n "$AWK" && break
 done
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${MAKE-make} sets \$(MAKE)" >&5
-$as_echo_n "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether ${MAKE-make} sets \$(MAKE)" >&5
+printf %s "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
 set x ${MAKE-make}
-ac_make=`$as_echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
-if eval \${ac_cv_prog_make_${ac_make}_set+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+ac_make=`printf "%s\n" "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
+if eval test \${ac_cv_prog_make_${ac_make}_set+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat >conftest.make <<\_ACEOF
 SHELL = /bin/sh
 all:
@@ -2920,12 +3307,12 @@ esac
 rm -f conftest.make
 fi
 if eval test \$ac_cv_prog_make_${ac_make}_set = yes; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
   SET_MAKE=
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
   SET_MAKE="MAKE=${MAKE-make}"
 fi
 
@@ -2963,14 +3350,10 @@ fi
  VERSION='1.6.6'
 
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE "$PACKAGE"
-_ACEOF
+printf "%s\n" "#define PACKAGE \"$PACKAGE\"" >>confdefs.h
 
 
-cat >>confdefs.h <<_ACEOF
-#define VERSION "$VERSION"
-_ACEOF
+printf "%s\n" "#define VERSION \"$VERSION\"" >>confdefs.h
 
 # Some tools Automake needs.
 
@@ -3003,6 +3386,15 @@ am__tar='$${TAR-tar} chof - "$$tardir"' am__untar='$${TAR-tar} xf -'
 
 
 
+
+
+
+
+
+
+
+
+
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -3011,11 +3403,12 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}gcc; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -3023,11 +3416,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_CC="${ac_tool_prefix}gcc"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -3038,11 +3435,11 @@ fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
-$as_echo "$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3051,11 +3448,12 @@ if test -z "$ac_cv_prog_CC"; then
   ac_ct_CC=$CC
   # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_ac_ct_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
 else
@@ -3063,11 +3461,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_CC="gcc"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -3078,11 +3480,11 @@ fi
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
-$as_echo "$ac_ct_CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+printf "%s\n" "$ac_ct_CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
   if test "x$ac_ct_CC" = x; then
@@ -3090,8 +3492,8 @@ fi
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
-$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     CC=$ac_ct_CC
@@ -3104,11 +3506,12 @@ if test -z "$CC"; then
           if test -n "$ac_tool_prefix"; then
     # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}cc; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -3116,11 +3519,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_CC="${ac_tool_prefix}cc"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -3131,11 +3538,11 @@ fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
-$as_echo "$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3144,11 +3551,12 @@ fi
 if test -z "$CC"; then
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -3157,15 +3565,19 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    if test "$as_dir$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
        continue
      fi
     ac_cv_prog_CC="cc"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -3181,18 +3593,18 @@ if test $ac_prog_rejected = yes; then
     # However, it has the same basename, so the bogon will be chosen
     # first if we set CC to just the basename; use the full file name.
     shift
-    ac_cv_prog_CC="$as_dir/$ac_word${1+' '}$@"
+    ac_cv_prog_CC="$as_dir$ac_word${1+' '}$@"
   fi
 fi
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
-$as_echo "$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3203,11 +3615,12 @@ if test -z "$CC"; then
   do
     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -3215,11 +3628,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -3230,11 +3647,11 @@ fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
-$as_echo "$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3247,11 +3664,12 @@ if test -z "$CC"; then
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_ac_ct_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
 else
@@ -3259,11 +3677,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_CC="$ac_prog"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -3274,11 +3696,11 @@ fi
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
-$as_echo "$ac_ct_CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+printf "%s\n" "$ac_ct_CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -3290,34 +3712,138 @@ done
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
-$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+fi
+
+fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}clang", so it can be a program name with args.
+set dummy ${ac_tool_prefix}clang; ac_word=$2
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}clang"
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
+else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
+fi
+
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "clang", so it can be a program name with args.
+set dummy clang; ac_word=$2
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="clang"
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+printf "%s\n" "$ac_ct_CC" >&6; }
+else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
+fi
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     CC=$ac_ct_CC
   fi
+else
+  CC="$ac_cv_prog_CC"
 fi
 
 fi
 
 
-test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+test -z "$CC" && { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "no acceptable C compiler found in \$PATH
 See \`config.log' for more details" "$LINENO" 5; }
 
 # Provide some information about the compiler.
-$as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
 set X $ac_compile
 ac_compiler=$2
-for ac_option in --version -v -V -qversion; do
+for ac_option in --version -v -V -qversion -version; do
   { { ac_try="$ac_compiler $ac_option >&5"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_compiler $ac_option >&5") 2>conftest.err
   ac_status=$?
   if test -s conftest.err; then
@@ -3327,7 +3853,7 @@ $as_echo "$ac_try_echo"; } >&5
     cat conftest.er1 >&5
   fi
   rm -f conftest.er1 conftest.err
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }
 done
 
@@ -3335,7 +3861,7 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
@@ -3347,9 +3873,9 @@ ac_clean_files="$ac_clean_files a.out a.out.dSYM a.exe b.out"
 # Try to create an executable without -o first, disregard a.out.
 # It will help us diagnose broken compilers, and finding out an intuition
 # of exeext.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
-$as_echo_n "checking whether the C compiler works... " >&6; }
-ac_link_default=`$as_echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
+printf %s "checking whether the C compiler works... " >&6; }
+ac_link_default=`printf "%s\n" "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
 
 # The possible output files:
 ac_files="a.out conftest.exe conftest a.exe a_out.exe b.out conftest.*"
@@ -3370,11 +3896,12 @@ case "(($ac_try" in
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_link_default") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then :
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+then :
   # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
 # So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
 # in a Makefile.  We should not override ac_cv_exeext if it was cached,
@@ -3391,7 +3918,7 @@ do
 	# certainly right.
 	break;;
     *.* )
-	if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
+	if test ${ac_cv_exeext+y} && test "$ac_cv_exeext" != no;
 	then :; else
 	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
 	fi
@@ -3407,44 +3934,46 @@ do
 done
 test "$ac_cv_exeext" = no && ac_cv_exeext=
 
-else
+else $as_nop
   ac_file=''
 fi
-if test -z "$ac_file"; then :
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-$as_echo "$as_me: failed program was:" >&5
+if test -z "$ac_file"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
+printf "%s\n" "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error 77 "C compiler cannot create executables
 See \`config.log' for more details" "$LINENO" 5; }
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
-$as_echo_n "checking for C compiler default output file name... " >&6; }
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
-$as_echo "$ac_file" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
+fi
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
+printf %s "checking for C compiler default output file name... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
+printf "%s\n" "$ac_file" >&6; }
 ac_exeext=$ac_cv_exeext
 
 rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out
 ac_clean_files=$ac_clean_files_save
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
-$as_echo_n "checking for suffix of executables... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
+printf %s "checking for suffix of executables... " >&6; }
 if { { ac_try="$ac_link"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_link") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then :
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+then :
   # If both `conftest.exe' and `conftest' are `present' (well, observable)
 # catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
 # work properly (i.e., refer to `conftest.exe'), while it won't with
@@ -3458,15 +3987,15 @@ for ac_file in conftest.exe conftest conftest.*; do
     * ) break;;
   esac
 done
-else
-  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+else $as_nop
+  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "cannot compute suffix of executables: cannot compile and link
 See \`config.log' for more details" "$LINENO" 5; }
 fi
 rm -f conftest conftest$ac_cv_exeext
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
-$as_echo "$ac_cv_exeext" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
+printf "%s\n" "$ac_cv_exeext" >&6; }
 
 rm -f conftest.$ac_ext
 EXEEXT=$ac_cv_exeext
@@ -3475,7 +4004,7 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <stdio.h>
 int
-main ()
+main (void)
 {
 FILE *f = fopen ("conftest.out", "w");
  return ferror (f) || fclose (f) != 0;
@@ -3487,8 +4016,8 @@ _ACEOF
 ac_clean_files="$ac_clean_files conftest.out"
 # Check that the compiler produces executables we can run.  If not, either
 # the compiler is broken, or we cross compile.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
-$as_echo_n "checking whether we are cross compiling... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
+printf %s "checking whether we are cross compiling... " >&6; }
 if test "$cross_compiling" != yes; then
   { { ac_try="$ac_link"
 case "(($ac_try" in
@@ -3496,10 +4025,10 @@ case "(($ac_try" in
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_link") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }
   if { ac_try='./conftest$ac_cv_exeext'
   { { case "(($ac_try" in
@@ -3507,39 +4036,40 @@ $as_echo "$ac_try_echo"; } >&5
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_try") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; }; then
     cross_compiling=no
   else
     if test "$cross_compiling" = maybe; then
 	cross_compiling=yes
     else
-	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot run C compiled programs.
+	{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error 77 "cannot run C compiled programs.
 If you meant to cross compile, use \`--host'.
 See \`config.log' for more details" "$LINENO" 5; }
     fi
   fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
-$as_echo "$cross_compiling" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
+printf "%s\n" "$cross_compiling" >&6; }
 
 rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
 ac_clean_files=$ac_clean_files_save
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
-$as_echo_n "checking for suffix of object files... " >&6; }
-if ${ac_cv_objext+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
+printf %s "checking for suffix of object files... " >&6; }
+if test ${ac_cv_objext+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
@@ -3553,11 +4083,12 @@ case "(($ac_try" in
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_compile") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then :
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+then :
   for ac_file in conftest.o conftest.obj conftest.*; do
   test -f "$ac_file" || continue;
   case $ac_file in
@@ -3566,31 +4097,32 @@ $as_echo "$ac_try_echo"; } >&5
        break;;
   esac
 done
-else
-  $as_echo "$as_me: failed program was:" >&5
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "cannot compute suffix of object files: cannot compile
 See \`config.log' for more details" "$LINENO" 5; }
 fi
 rm -f conftest.$ac_cv_objext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
-$as_echo "$ac_cv_objext" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
+printf "%s\n" "$ac_cv_objext" >&6; }
 OBJEXT=$ac_cv_objext
 ac_objext=$OBJEXT
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
-$as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
-if ${ac_cv_c_compiler_gnu+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the compiler supports GNU C" >&5
+printf %s "checking whether the compiler supports GNU C... " >&6; }
+if test ${ac_cv_c_compiler_gnu+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 #ifndef __GNUC__
        choke me
@@ -3600,29 +4132,33 @@ main ()
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_compiler_gnu=yes
-else
+else $as_nop
   ac_compiler_gnu=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 ac_cv_c_compiler_gnu=$ac_compiler_gnu
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
-$as_echo "$ac_cv_c_compiler_gnu" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
+printf "%s\n" "$ac_cv_c_compiler_gnu" >&6; }
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
 if test $ac_compiler_gnu = yes; then
   GCC=yes
 else
   GCC=
 fi
-ac_test_CFLAGS=${CFLAGS+set}
+ac_test_CFLAGS=${CFLAGS+y}
 ac_save_CFLAGS=$CFLAGS
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
-$as_echo_n "checking whether $CC accepts -g... " >&6; }
-if ${ac_cv_prog_cc_g+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
+printf %s "checking whether $CC accepts -g... " >&6; }
+if test ${ac_cv_prog_cc_g+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_save_c_werror_flag=$ac_c_werror_flag
    ac_c_werror_flag=yes
    ac_cv_prog_cc_g=no
@@ -3631,57 +4167,60 @@ else
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_prog_cc_g=yes
-else
+else $as_nop
   CFLAGS=""
       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
 
-else
+else $as_nop
   ac_c_werror_flag=$ac_save_c_werror_flag
 	 CFLAGS="-g"
 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_prog_cc_g=yes
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
    ac_c_werror_flag=$ac_save_c_werror_flag
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
-$as_echo "$ac_cv_prog_cc_g" >&6; }
-if test "$ac_test_CFLAGS" = set; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
+printf "%s\n" "$ac_cv_prog_cc_g" >&6; }
+if test $ac_test_CFLAGS; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
@@ -3696,94 +4235,144 @@ else
     CFLAGS=
   fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
-$as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
-if ${ac_cv_prog_cc_c89+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  ac_cv_prog_cc_c89=no
+ac_prog_cc_stdc=no
+if test x$ac_prog_cc_stdc = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C11 features" >&5
+printf %s "checking for $CC option to enable C11 features... " >&6; }
+if test ${ac_cv_prog_cc_c11+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_prog_cc_c11=no
 ac_save_CC=$CC
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#include <stdarg.h>
-#include <stdio.h>
-struct stat;
-/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
-struct buf { int x; };
-FILE * (*rcsopen) (struct buf *, struct stat *, int);
-static char *e (p, i)
-     char **p;
-     int i;
-{
-  return p[i];
-}
-static char *f (char * (*g) (char **, int), char **p, ...)
-{
-  char *s;
-  va_list v;
-  va_start (v,p);
-  s = g (p, va_arg (v,int));
-  va_end (v);
-  return s;
-}
-
-/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
-   function prototypes and stuff, but not '\xHH' hex character constants.
-   These don't provoke an error unfortunately, instead are silently treated
-   as 'x'.  The following induces an error, until -std is added to get
-   proper ANSI mode.  Curiously '\x00'!='x' always comes out true, for an
-   array size at least.  It's necessary to write '\x00'==0 to get something
-   that's true only with -std.  */
-int osf4_cc_array ['\x00' == 0 ? 1 : -1];
+$ac_c_conftest_c11_program
+_ACEOF
+for ac_arg in '' -std=gnu11
+do
+  CC="$ac_save_CC $ac_arg"
+  if ac_fn_c_try_compile "$LINENO"
+then :
+  ac_cv_prog_cc_c11=$ac_arg
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam
+  test "x$ac_cv_prog_cc_c11" != "xno" && break
+done
+rm -f conftest.$ac_ext
+CC=$ac_save_CC
+fi
 
-/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
-   inside strings and character constants.  */
-#define FOO(x) 'x'
-int xlc6_cc_array[FOO(a) == 'x' ? 1 : -1];
+if test "x$ac_cv_prog_cc_c11" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cc_c11" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c11" >&5
+printf "%s\n" "$ac_cv_prog_cc_c11" >&6; }
+     CC="$CC $ac_cv_prog_cc_c11"
+fi
+  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c11
+  ac_prog_cc_stdc=c11
+fi
+fi
+if test x$ac_prog_cc_stdc = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C99 features" >&5
+printf %s "checking for $CC option to enable C99 features... " >&6; }
+if test ${ac_cv_prog_cc_c99+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_prog_cc_c99=no
+ac_save_CC=$CC
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$ac_c_conftest_c99_program
+_ACEOF
+for ac_arg in '' -std=gnu99 -std=c99 -c99 -qlanglvl=extc1x -qlanglvl=extc99 -AC99 -D_STDC_C99=
+do
+  CC="$ac_save_CC $ac_arg"
+  if ac_fn_c_try_compile "$LINENO"
+then :
+  ac_cv_prog_cc_c99=$ac_arg
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam
+  test "x$ac_cv_prog_cc_c99" != "xno" && break
+done
+rm -f conftest.$ac_ext
+CC=$ac_save_CC
+fi
 
-int test (int i, double x);
-struct s1 {int (*f) (int a);};
-struct s2 {int (*f) (double a);};
-int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
-int argc;
-char **argv;
-int
-main ()
-{
-return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
-  ;
-  return 0;
-}
+if test "x$ac_cv_prog_cc_c99" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cc_c99" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c99" >&5
+printf "%s\n" "$ac_cv_prog_cc_c99" >&6; }
+     CC="$CC $ac_cv_prog_cc_c99"
+fi
+  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c99
+  ac_prog_cc_stdc=c99
+fi
+fi
+if test x$ac_prog_cc_stdc = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C89 features" >&5
+printf %s "checking for $CC option to enable C89 features... " >&6; }
+if test ${ac_cv_prog_cc_c89+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_prog_cc_c89=no
+ac_save_CC=$CC
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$ac_c_conftest_c89_program
 _ACEOF
-for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std \
-	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
 do
   CC="$ac_save_CC $ac_arg"
-  if ac_fn_c_try_compile "$LINENO"; then :
+  if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_prog_cc_c89=$ac_arg
 fi
-rm -f core conftest.err conftest.$ac_objext
+rm -f core conftest.err conftest.$ac_objext conftest.beam
   test "x$ac_cv_prog_cc_c89" != "xno" && break
 done
 rm -f conftest.$ac_ext
 CC=$ac_save_CC
-
 fi
-# AC_CACHE_VAL
-case "x$ac_cv_prog_cc_c89" in
-  x)
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
-$as_echo "none needed" >&6; } ;;
-  xno)
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
-$as_echo "unsupported" >&6; } ;;
-  *)
-    CC="$CC $ac_cv_prog_cc_c89"
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
-$as_echo "$ac_cv_prog_cc_c89" >&6; } ;;
-esac
-if test "x$ac_cv_prog_cc_c89" != xno; then :
 
+if test "x$ac_cv_prog_cc_c89" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cc_c89" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
+printf "%s\n" "$ac_cv_prog_cc_c89" >&6; }
+     CC="$CC $ac_cv_prog_cc_c89"
+fi
+  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c89
+  ac_prog_cc_stdc=c89
+fi
 fi
 
 ac_ext=c
@@ -3803,8 +4392,8 @@ am__doit:
 .PHONY: am__doit
 END
 # If we don't find an include directive, just comment out the code.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for style of include used by $am_make" >&5
-$as_echo_n "checking for style of include used by $am_make... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for style of include used by $am_make" >&5
+printf %s "checking for style of include used by $am_make... " >&6; }
 am__include="#"
 am__quote=
 _am_result=none
@@ -3831,12 +4420,13 @@ if test "$am__include" = "#"; then
 fi
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $_am_result" >&5
-$as_echo "$_am_result" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $_am_result" >&5
+printf "%s\n" "$_am_result" >&6; }
 rm -f confinc confmf
 
 # Check whether --enable-dependency-tracking was given.
-if test "${enable_dependency_tracking+set}" = set; then :
+if test ${enable_dependency_tracking+y}
+then :
   enableval=$enable_dependency_tracking;
 fi
 
@@ -3857,11 +4447,12 @@ fi
 
 depcc="$CC"   am_compiler_list=
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc" >&5
-$as_echo_n "checking dependency style of $depcc... " >&6; }
-if ${am_cv_CC_dependencies_compiler_type+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc" >&5
+printf %s "checking dependency style of $depcc... " >&6; }
+if test ${am_cv_CC_dependencies_compiler_type+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
   # We make a subdir and do the tests there.  Otherwise we can end up
   # making bogus files that we don't know about and never remove.  For
@@ -3968,8 +4559,8 @@ else
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_CC_dependencies_compiler_type" >&5
-$as_echo "$am_cv_CC_dependencies_compiler_type" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $am_cv_CC_dependencies_compiler_type" >&5
+printf "%s\n" "$am_cv_CC_dependencies_compiler_type" >&6; }
 CCDEPMODE=depmode=$am_cv_CC_dependencies_compiler_type
 
  if
@@ -3985,149 +4576,191 @@ fi
 
 
 
-ac_ext=c
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
-ac_compiler_gnu=$ac_cv_c_compiler_gnu
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
-$as_echo_n "checking how to run the C preprocessor... " >&6; }
-# On Suns, sometimes $CPP names a directory.
-if test -n "$CPP" && test -d "$CPP"; then
-  CPP=
-fi
-if test -z "$CPP"; then
-  if ${ac_cv_prog_CPP+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-      # Double quotes because CPP needs to be expanded
-    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
-    do
-      ac_preproc_ok=false
-for ac_c_preproc_warn_flag in '' yes
+ac_header= ac_cache=
+for ac_item in $ac_header_c_list
 do
-  # Use a header file that comes with gcc, so configuring glibc
-  # with a fresh cross-compiler works.
-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-  # <limits.h> exists even on freestanding compilers.
-  # On the NeXT, cc -E runs the code through the compiler's parser,
-  # not just through cpp. "Syntax error" is here to catch this case.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-		     Syntax error
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
+  if test $ac_cache; then
+    ac_fn_c_check_header_compile "$LINENO" $ac_header ac_cv_header_$ac_cache "$ac_includes_default"
+    if eval test \"x\$ac_cv_header_$ac_cache\" = xyes; then
+      printf "%s\n" "#define $ac_item 1" >> confdefs.h
+    fi
+    ac_header= ac_cache=
+  elif test $ac_header; then
+    ac_cache=$ac_item
+  else
+    ac_header=$ac_item
+  fi
+done
 
-else
-  # Broken: fails on valid input.
-continue
-fi
-rm -f conftest.err conftest.i conftest.$ac_ext
 
-  # OK, works on sane cases.  Now check whether nonexistent headers
-  # can be detected and how.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <ac_nonexistent.h>
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
-  # Broken: success on invalid input.
-continue
-else
-  # Passes both tests.
-ac_preproc_ok=:
-break
-fi
-rm -f conftest.err conftest.i conftest.$ac_ext
 
-done
-# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.i conftest.err conftest.$ac_ext
-if $ac_preproc_ok; then :
-  break
-fi
 
-    done
-    ac_cv_prog_CPP=$CPP
+
+
+
+
+if test $ac_cv_header_stdlib_h = yes && test $ac_cv_header_string_h = yes
+then :
+
+printf "%s\n" "#define STDC_HEADERS 1" >>confdefs.h
 
 fi
-  CPP=$ac_cv_prog_CPP
-else
-  ac_cv_prog_CPP=$CPP
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
-$as_echo "$CPP" >&6; }
-ac_preproc_ok=false
-for ac_c_preproc_warn_flag in '' yes
-do
-  # Use a header file that comes with gcc, so configuring glibc
-  # with a fresh cross-compiler works.
-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-  # <limits.h> exists even on freestanding compilers.
-  # On the NeXT, cc -E runs the code through the compiler's parser,
-  # not just through cpp. "Syntax error" is here to catch this case.
+
+
+
+
+
+
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether it is safe to define __EXTENSIONS__" >&5
+printf %s "checking whether it is safe to define __EXTENSIONS__... " >&6; }
+if test ${ac_cv_safe_to_define___extensions__+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-		     Syntax error
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
 
-else
-  # Broken: fails on valid input.
-continue
+#         define __EXTENSIONS__ 1
+          $ac_includes_default
+int
+main (void)
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"
+then :
+  ac_cv_safe_to_define___extensions__=yes
+else $as_nop
+  ac_cv_safe_to_define___extensions__=no
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+fi
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_safe_to_define___extensions__" >&5
+printf "%s\n" "$ac_cv_safe_to_define___extensions__" >&6; }
 
-  # OK, works on sane cases.  Now check whether nonexistent headers
-  # can be detected and how.
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether _XOPEN_SOURCE should be defined" >&5
+printf %s "checking whether _XOPEN_SOURCE should be defined... " >&6; }
+if test ${ac_cv_should_define__xopen_source+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_should_define__xopen_source=no
+    if test $ac_cv_header_wchar_h = yes
+then :
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#include <ac_nonexistent.h>
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
-  # Broken: success on invalid input.
-continue
-else
-  # Passes both tests.
-ac_preproc_ok=:
-break
+
+          #include <wchar.h>
+          mbstate_t x;
+int
+main (void)
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"
+then :
+
+else $as_nop
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+            #define _XOPEN_SOURCE 500
+            #include <wchar.h>
+            mbstate_t x;
+int
+main (void)
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"
+then :
+  ac_cv_should_define__xopen_source=yes
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
+fi
+fi
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_should_define__xopen_source" >&5
+printf "%s\n" "$ac_cv_should_define__xopen_source" >&6; }
 
-done
-# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.i conftest.err conftest.$ac_ext
-if $ac_preproc_ok; then :
+  printf "%s\n" "#define _ALL_SOURCE 1" >>confdefs.h
 
-else
-  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details" "$LINENO" 5; }
+  printf "%s\n" "#define _DARWIN_C_SOURCE 1" >>confdefs.h
+
+  printf "%s\n" "#define _GNU_SOURCE 1" >>confdefs.h
+
+  printf "%s\n" "#define _HPUX_ALT_XOPEN_SOCKET_API 1" >>confdefs.h
+
+  printf "%s\n" "#define _NETBSD_SOURCE 1" >>confdefs.h
+
+  printf "%s\n" "#define _OPENBSD_SOURCE 1" >>confdefs.h
+
+  printf "%s\n" "#define _POSIX_PTHREAD_SEMANTICS 1" >>confdefs.h
+
+  printf "%s\n" "#define __STDC_WANT_IEC_60559_ATTRIBS_EXT__ 1" >>confdefs.h
+
+  printf "%s\n" "#define __STDC_WANT_IEC_60559_BFP_EXT__ 1" >>confdefs.h
+
+  printf "%s\n" "#define __STDC_WANT_IEC_60559_DFP_EXT__ 1" >>confdefs.h
+
+  printf "%s\n" "#define __STDC_WANT_IEC_60559_FUNCS_EXT__ 1" >>confdefs.h
+
+  printf "%s\n" "#define __STDC_WANT_IEC_60559_TYPES_EXT__ 1" >>confdefs.h
+
+  printf "%s\n" "#define __STDC_WANT_LIB_EXT2__ 1" >>confdefs.h
+
+  printf "%s\n" "#define __STDC_WANT_MATH_SPEC_FUNCS__ 1" >>confdefs.h
+
+  printf "%s\n" "#define _TANDEM_SOURCE 1" >>confdefs.h
+
+  if test $ac_cv_header_minix_config_h = yes
+then :
+  MINIX=yes
+    printf "%s\n" "#define _MINIX 1" >>confdefs.h
+
+    printf "%s\n" "#define _POSIX_SOURCE 1" >>confdefs.h
+
+    printf "%s\n" "#define _POSIX_1_SOURCE 2" >>confdefs.h
+
+else $as_nop
+  MINIX=
 fi
+  if test $ac_cv_safe_to_define___extensions__ = yes
+then :
+  printf "%s\n" "#define __EXTENSIONS__ 1" >>confdefs.h
 
-ac_ext=c
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
-ac_compiler_gnu=$ac_cv_c_compiler_gnu
+fi
+  if test $ac_cv_should_define__xopen_source = yes
+then :
+  printf "%s\n" "#define _XOPEN_SOURCE 500" >>confdefs.h
 
+fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
-$as_echo_n "checking for grep that handles long lines and -e... " >&6; }
-if ${ac_cv_path_GREP+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+if test "$ac_prog_cc_stdc" != no; then
+
+printf "%s\n" "#define PROTOTYPES 1" >>confdefs.h
+
+
+printf "%s\n" "#define __PROTOTYPES 1" >>confdefs.h
+
+fi
+
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
+printf %s "checking for grep that handles long lines and -e... " >&6; }
+if test ${ac_cv_path_GREP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -z "$GREP"; then
   ac_path_GREP_found=false
   # Loop through the user's path and test for each of PROGNAME-LIST
@@ -4135,10 +4768,15 @@ else
 for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    for ac_prog in grep ggrep; do
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_prog in grep ggrep
+   do
     for ac_exec_ext in '' $ac_executable_extensions; do
-      ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
+      ac_path_GREP="$as_dir$ac_prog$ac_exec_ext"
       as_fn_executable_p "$ac_path_GREP" || continue
 # Check for GNU ac_path_GREP and select it if it is found.
   # Check for GNU $ac_path_GREP
@@ -4147,13 +4785,13 @@ case `"$ac_path_GREP" --version 2>&1` in
   ac_cv_path_GREP="$ac_path_GREP" ac_path_GREP_found=:;;
 *)
   ac_count=0
-  $as_echo_n 0123456789 >"conftest.in"
+  printf %s 0123456789 >"conftest.in"
   while :
   do
     cat "conftest.in" "conftest.in" >"conftest.tmp"
     mv "conftest.tmp" "conftest.in"
     cp "conftest.in" "conftest.nl"
-    $as_echo 'GREP' >> "conftest.nl"
+    printf "%s\n" 'GREP' >> "conftest.nl"
     "$ac_path_GREP" -e 'GREP$' -e '-(cannot match)-' < "conftest.nl" >"conftest.out" 2>/dev/null || break
     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
     as_fn_arith $ac_count + 1 && ac_count=$as_val
@@ -4181,16 +4819,20 @@ else
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP" >&5
-$as_echo "$ac_cv_path_GREP" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP" >&5
+printf "%s\n" "$ac_cv_path_GREP" >&6; }
  GREP="$ac_cv_path_GREP"
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
-$as_echo_n "checking for egrep... " >&6; }
-if ${ac_cv_path_EGREP+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+# Autoupdate added the next two lines to ensure that your configure
+# script's behavior did not change.  They are probably safe to remove.
+
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
+printf %s "checking for egrep... " >&6; }
+if test ${ac_cv_path_EGREP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
    then ac_cv_path_EGREP="$GREP -E"
    else
@@ -4201,10 +4843,15 @@ else
 for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    for ac_prog in egrep; do
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_prog in egrep
+   do
     for ac_exec_ext in '' $ac_executable_extensions; do
-      ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
+      ac_path_EGREP="$as_dir$ac_prog$ac_exec_ext"
       as_fn_executable_p "$ac_path_EGREP" || continue
 # Check for GNU ac_path_EGREP and select it if it is found.
   # Check for GNU $ac_path_EGREP
@@ -4213,13 +4860,13 @@ case `"$ac_path_EGREP" --version 2>&1` in
   ac_cv_path_EGREP="$ac_path_EGREP" ac_path_EGREP_found=:;;
 *)
   ac_count=0
-  $as_echo_n 0123456789 >"conftest.in"
+  printf %s 0123456789 >"conftest.in"
   while :
   do
     cat "conftest.in" "conftest.in" >"conftest.tmp"
     mv "conftest.tmp" "conftest.in"
     cp "conftest.in" "conftest.nl"
-    $as_echo 'EGREP' >> "conftest.nl"
+    printf "%s\n" 'EGREP' >> "conftest.nl"
     "$ac_path_EGREP" 'EGREP$' < "conftest.nl" >"conftest.out" 2>/dev/null || break
     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
     as_fn_arith $ac_count + 1 && ac_count=$as_val
@@ -4248,216 +4895,11 @@ fi
 
    fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
-$as_echo "$ac_cv_path_EGREP" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
+printf "%s\n" "$ac_cv_path_EGREP" >&6; }
  EGREP="$ac_cv_path_EGREP"
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
-$as_echo_n "checking for ANSI C header files... " >&6; }
-if ${ac_cv_header_stdc+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdlib.h>
-#include <stdarg.h>
-#include <string.h>
-#include <float.h>
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_cv_header_stdc=yes
-else
-  ac_cv_header_stdc=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-
-if test $ac_cv_header_stdc = yes; then
-  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <string.h>
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "memchr" >/dev/null 2>&1; then :
-
-else
-  ac_cv_header_stdc=no
-fi
-rm -f conftest*
-
-fi
-
-if test $ac_cv_header_stdc = yes; then
-  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdlib.h>
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "free" >/dev/null 2>&1; then :
-
-else
-  ac_cv_header_stdc=no
-fi
-rm -f conftest*
-
-fi
-
-if test $ac_cv_header_stdc = yes; then
-  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
-  if test "$cross_compiling" = yes; then :
-  :
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <ctype.h>
-#include <stdlib.h>
-#if ((' ' & 0x0FF) == 0x020)
-# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
-# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
-#else
-# define ISLOWER(c) \
-		   (('a' <= (c) && (c) <= 'i') \
-		     || ('j' <= (c) && (c) <= 'r') \
-		     || ('s' <= (c) && (c) <= 'z'))
-# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
-#endif
-
-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
-int
-main ()
-{
-  int i;
-  for (i = 0; i < 256; i++)
-    if (XOR (islower (i), ISLOWER (i))
-	|| toupper (i) != TOUPPER (i))
-      return 2;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-
-else
-  ac_cv_header_stdc=no
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
-fi
-
-fi
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
-$as_echo "$ac_cv_header_stdc" >&6; }
-if test $ac_cv_header_stdc = yes; then
-
-$as_echo "#define STDC_HEADERS 1" >>confdefs.h
-
-fi
-
-# On IRIX 5.3, sys/types and inttypes.h are conflicting.
-for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
-		  inttypes.h stdint.h unistd.h
-do :
-  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
-ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
-"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
-
-fi
-
-done
-
-
-
-  ac_fn_c_check_header_mongrel "$LINENO" "minix/config.h" "ac_cv_header_minix_config_h" "$ac_includes_default"
-if test "x$ac_cv_header_minix_config_h" = xyes; then :
-  MINIX=yes
-else
-  MINIX=
-fi
-
-
-  if test "$MINIX" = yes; then
-
-$as_echo "#define _POSIX_SOURCE 1" >>confdefs.h
-
-
-$as_echo "#define _POSIX_1_SOURCE 2" >>confdefs.h
-
-
-$as_echo "#define _MINIX 1" >>confdefs.h
-
-  fi
-
-
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether it is safe to define __EXTENSIONS__" >&5
-$as_echo_n "checking whether it is safe to define __EXTENSIONS__... " >&6; }
-if ${ac_cv_safe_to_define___extensions__+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#         define __EXTENSIONS__ 1
-          $ac_includes_default
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_cv_safe_to_define___extensions__=yes
-else
-  ac_cv_safe_to_define___extensions__=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_safe_to_define___extensions__" >&5
-$as_echo "$ac_cv_safe_to_define___extensions__" >&6; }
-  test $ac_cv_safe_to_define___extensions__ = yes &&
-    $as_echo "#define __EXTENSIONS__ 1" >>confdefs.h
-
-  $as_echo "#define _ALL_SOURCE 1" >>confdefs.h
-
-  $as_echo "#define _GNU_SOURCE 1" >>confdefs.h
-
-  $as_echo "#define _POSIX_PTHREAD_SEMANTICS 1" >>confdefs.h
-
-  $as_echo "#define _TANDEM_SOURCE 1" >>confdefs.h
-
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for function prototypes" >&5
-$as_echo_n "checking for function prototypes... " >&6; }
-if test "$ac_cv_prog_cc_c89" != no; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-
-$as_echo "#define PROTOTYPES 1" >>confdefs.h
-
-
-$as_echo "#define __PROTOTYPES 1" >>confdefs.h
-
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-fi
 
 
 
@@ -4468,30 +4910,26 @@ else
 fi
 # Ensure some checks needed by ansi2knr itself.
 
-for ac_header in string.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "string.h" "ac_cv_header_string_h" "$ac_includes_default"
-if test "x$ac_cv_header_string_h" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_STRING_H 1
-_ACEOF
+ac_fn_c_check_header_compile "$LINENO" "string.h" "ac_cv_header_string_h" "$ac_includes_default"
+if test "x$ac_cv_header_string_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRING_H 1" >>confdefs.h
 
 fi
 
-done
-
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
-$as_echo_n "checking for an ANSI C-conforming const... " >&6; }
-if ${ac_cv_c_const+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
+printf %s "checking for an ANSI C-conforming const... " >&6; }
+if test ${ac_cv_c_const+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
 #ifndef __cplusplus
@@ -4504,7 +4942,7 @@ main ()
   /* NEC SVR4.0.2 mips cc rejects this.  */
   struct point {int x, y;};
   static struct point const zero = {0,0};
-  /* AIX XL C 1.02.0.0 rejects this.
+  /* IBM XL C 1.02.0.0 rejects this.
      It does not let you subtract one const X* pointer from another in
      an arm of an if-expression whose if-part is not a constant
      expression */
@@ -4532,7 +4970,7 @@ main ()
     iptr p = 0;
     ++p;
   }
-  { /* AIX XL C 1.02.0.0 rejects this sort of thing, saying
+  { /* IBM XL C 1.02.0.0 rejects this sort of thing, saying
        "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
     struct s { int j; const int *ap[3]; } bx;
     struct s *b = &bx; b->j = 5;
@@ -4548,44 +4986,45 @@ main ()
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_c_const=yes
-else
+else $as_nop
   ac_cv_c_const=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_const" >&5
-$as_echo "$ac_cv_c_const" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_const" >&5
+printf "%s\n" "$ac_cv_c_const" >&6; }
 if test $ac_cv_c_const = no; then
 
-$as_echo "#define const /**/" >>confdefs.h
+printf "%s\n" "#define const /**/" >>confdefs.h
 
 fi
 
 ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
-if test "x$ac_cv_type_size_t" = xyes; then :
+if test "x$ac_cv_type_size_t" = xyes
+then :
 
-else
+else $as_nop
 
-cat >>confdefs.h <<_ACEOF
-#define size_t unsigned int
-_ACEOF
+printf "%s\n" "#define size_t unsigned int" >>confdefs.h
 
 fi
 
 # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
 # for constant arguments.  Useless!
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for working alloca.h" >&5
-$as_echo_n "checking for working alloca.h... " >&6; }
-if ${ac_cv_working_alloca_h+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for working alloca.h" >&5
+printf %s "checking for working alloca.h... " >&6; }
+if test ${ac_cv_working_alloca_h+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <alloca.h>
 int
-main ()
+main (void)
 {
 char *p = (char *) alloca (2 * sizeof (int));
 			  if (p) return 0;
@@ -4593,52 +5032,52 @@ char *p = (char *) alloca (2 * sizeof (int));
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_working_alloca_h=yes
-else
+else $as_nop
   ac_cv_working_alloca_h=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_working_alloca_h" >&5
-$as_echo "$ac_cv_working_alloca_h" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_working_alloca_h" >&5
+printf "%s\n" "$ac_cv_working_alloca_h" >&6; }
 if test $ac_cv_working_alloca_h = yes; then
 
-$as_echo "#define HAVE_ALLOCA_H 1" >>confdefs.h
+printf "%s\n" "#define HAVE_ALLOCA_H 1" >>confdefs.h
 
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for alloca" >&5
-$as_echo_n "checking for alloca... " >&6; }
-if ${ac_cv_func_alloca_works+:} false; then :
-  $as_echo_n "(cached) " >&6
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for alloca" >&5
+printf %s "checking for alloca... " >&6; }
+if test ${ac_cv_func_alloca_works+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test $ac_cv_working_alloca_h = yes; then
+  ac_cv_func_alloca_works=yes
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#ifdef __GNUC__
-# define alloca __builtin_alloca
-#else
-# ifdef _MSC_VER
+#include <stdlib.h>
+#include <stddef.h>
+#ifndef alloca
+# ifdef __GNUC__
+#  define alloca __builtin_alloca
+# elif defined _MSC_VER
 #  include <malloc.h>
 #  define alloca _alloca
 # else
-#  ifdef HAVE_ALLOCA_H
-#   include <alloca.h>
-#  else
-#   ifdef _AIX
- #pragma alloca
-#   else
-#    ifndef alloca /* predefined by HP cc +Olibcalls */
-void *alloca (size_t);
-#    endif
-#   endif
+#  ifdef  __cplusplus
+extern "C"
 #  endif
+void *alloca (size_t);
 # endif
 #endif
 
 int
-main ()
+main (void)
 {
 char *p = (char *) alloca (1);
 				    if (p) return 0;
@@ -4646,20 +5085,22 @@ char *p = (char *) alloca (1);
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_func_alloca_works=yes
-else
+else $as_nop
   ac_cv_func_alloca_works=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_alloca_works" >&5
-$as_echo "$ac_cv_func_alloca_works" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_alloca_works" >&5
+printf "%s\n" "$ac_cv_func_alloca_works" >&6; }
+fi
 
 if test $ac_cv_func_alloca_works = yes; then
 
-$as_echo "#define HAVE_ALLOCA 1" >>confdefs.h
+printf "%s\n" "#define HAVE_ALLOCA 1" >>confdefs.h
 
 else
   # The SVR3 libPW and SVR4 libucb both contain incompatible functions
@@ -4669,58 +5110,19 @@ else
 
 ALLOCA=\${LIBOBJDIR}alloca.$ac_objext
 
-$as_echo "#define C_ALLOCA 1" >>confdefs.h
-
+printf "%s\n" "#define C_ALLOCA 1" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether \`alloca.c' needs Cray hooks" >&5
-$as_echo_n "checking whether \`alloca.c' needs Cray hooks... " >&6; }
-if ${ac_cv_os_cray+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#if defined CRAY && ! defined CRAY2
-webecray
-#else
-wenotbecray
-#endif
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "webecray" >/dev/null 2>&1; then :
-  ac_cv_os_cray=yes
-else
-  ac_cv_os_cray=no
-fi
-rm -f conftest*
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_os_cray" >&5
-$as_echo "$ac_cv_os_cray" >&6; }
-if test $ac_cv_os_cray = yes; then
-  for ac_func in _getb67 GETB67 getb67; do
-    as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
-ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
-
-cat >>confdefs.h <<_ACEOF
-#define CRAY_STACKSEG_END $ac_func
-_ACEOF
-
-    break
-fi
-
-  done
-fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking stack direction for C alloca" >&5
-$as_echo_n "checking stack direction for C alloca... " >&6; }
-if ${ac_cv_c_stack_direction+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking stack direction for C alloca" >&5
+printf %s "checking stack direction for C alloca... " >&6; }
+if test ${ac_cv_c_stack_direction+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test "$cross_compiling" = yes
+then :
   ac_cv_c_stack_direction=0
-else
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $ac_includes_default
@@ -4741,9 +5143,10 @@ main (int argc, char **argv)
   return find_stack_direction (0, argc + !argv + 20) < 0;
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   ac_cv_c_stack_direction=1
-else
+else $as_nop
   ac_cv_c_stack_direction=-1
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -4751,172 +5154,161 @@ rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_stack_direction" >&5
-$as_echo "$ac_cv_c_stack_direction" >&6; }
-cat >>confdefs.h <<_ACEOF
-#define STACK_DIRECTION $ac_cv_c_stack_direction
-_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_stack_direction" >&5
+printf "%s\n" "$ac_cv_c_stack_direction" >&6; }
+printf "%s\n" "#define STACK_DIRECTION $ac_cv_c_stack_direction" >>confdefs.h
 
 
 fi
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
-$as_echo_n "checking for ANSI C header files... " >&6; }
-if ${ac_cv_header_stdc+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdlib.h>
-#include <stdarg.h>
-#include <string.h>
-#include <float.h>
+# Autoupdate added the next two lines to ensure that your configure
+# script's behavior did not change.  They are probably safe to remove.
 
-int
-main ()
-{
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
+printf %s "checking for egrep... " >&6; }
+if test ${ac_cv_path_EGREP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
+   then ac_cv_path_EGREP="$GREP -E"
+   else
+     if test -z "$EGREP"; then
+  ac_path_EGREP_found=false
+  # Loop through the user's path and test for each of PROGNAME-LIST
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
+do
+  IFS=$as_save_IFS
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_prog in egrep
+   do
+    for ac_exec_ext in '' $ac_executable_extensions; do
+      ac_path_EGREP="$as_dir$ac_prog$ac_exec_ext"
+      as_fn_executable_p "$ac_path_EGREP" || continue
+# Check for GNU ac_path_EGREP and select it if it is found.
+  # Check for GNU $ac_path_EGREP
+case `"$ac_path_EGREP" --version 2>&1` in
+*GNU*)
+  ac_cv_path_EGREP="$ac_path_EGREP" ac_path_EGREP_found=:;;
+*)
+  ac_count=0
+  printf %s 0123456789 >"conftest.in"
+  while :
+  do
+    cat "conftest.in" "conftest.in" >"conftest.tmp"
+    mv "conftest.tmp" "conftest.in"
+    cp "conftest.in" "conftest.nl"
+    printf "%s\n" 'EGREP' >> "conftest.nl"
+    "$ac_path_EGREP" 'EGREP$' < "conftest.nl" >"conftest.out" 2>/dev/null || break
+    diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
+    as_fn_arith $ac_count + 1 && ac_count=$as_val
+    if test $ac_count -gt ${ac_path_EGREP_max-0}; then
+      # Best one so far, save it but keep looking for a better one
+      ac_cv_path_EGREP="$ac_path_EGREP"
+      ac_path_EGREP_max=$ac_count
+    fi
+    # 10*(2^10) chars as input seems more than enough
+    test $ac_count -gt 10 && break
+  done
+  rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
+esac
 
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_cv_header_stdc=yes
+      $ac_path_EGREP_found && break 3
+    done
+  done
+  done
+IFS=$as_save_IFS
+  if test -z "$ac_cv_path_EGREP"; then
+    as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+  fi
 else
-  ac_cv_header_stdc=no
+  ac_cv_path_EGREP=$EGREP
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-
-if test $ac_cv_header_stdc = yes; then
-  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <string.h>
 
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "memchr" >/dev/null 2>&1; then :
-
-else
-  ac_cv_header_stdc=no
+   fi
 fi
-rm -f conftest*
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
+printf "%s\n" "$ac_cv_path_EGREP" >&6; }
+ EGREP="$ac_cv_path_EGREP"
 
-fi
 
-if test $ac_cv_header_stdc = yes; then
-  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdlib.h>
 
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "free" >/dev/null 2>&1; then :
+ac_fn_c_check_header_compile "$LINENO" "string.h" "ac_cv_header_string_h" "$ac_includes_default"
+if test "x$ac_cv_header_string_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRING_H 1" >>confdefs.h
 
-else
-  ac_cv_header_stdc=no
 fi
-rm -f conftest*
+ac_fn_c_check_header_compile "$LINENO" "stdlib.h" "ac_cv_header_stdlib_h" "$ac_includes_default"
+if test "x$ac_cv_header_stdlib_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STDLIB_H 1" >>confdefs.h
 
 fi
+ac_fn_c_check_header_compile "$LINENO" "unistd.h" "ac_cv_header_unistd_h" "$ac_includes_default"
+if test "x$ac_cv_header_unistd_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_UNISTD_H 1" >>confdefs.h
 
-if test $ac_cv_header_stdc = yes; then
-  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
-  if test "$cross_compiling" = yes; then :
-  :
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <ctype.h>
-#include <stdlib.h>
-#if ((' ' & 0x0FF) == 0x020)
-# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
-# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
-#else
-# define ISLOWER(c) \
-		   (('a' <= (c) && (c) <= 'i') \
-		     || ('j' <= (c) && (c) <= 'r') \
-		     || ('s' <= (c) && (c) <= 'z'))
-# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
-#endif
-
-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
-int
-main ()
-{
-  int i;
-  for (i = 0; i < 256; i++)
-    if (XOR (islower (i), ISLOWER (i))
-	|| toupper (i) != TOUPPER (i))
-      return 2;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-
-else
-  ac_cv_header_stdc=no
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
+ac_fn_c_check_header_compile "$LINENO" "stdarg.h" "ac_cv_header_stdarg_h" "$ac_includes_default"
+if test "x$ac_cv_header_stdarg_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STDARG_H 1" >>confdefs.h
 
 fi
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
-$as_echo "$ac_cv_header_stdc" >&6; }
-if test $ac_cv_header_stdc = yes; then
-
-$as_echo "#define STDC_HEADERS 1" >>confdefs.h
+ac_fn_c_check_header_compile "$LINENO" "math.h" "ac_cv_header_math_h" "$ac_includes_default"
+if test "x$ac_cv_header_math_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_MATH_H 1" >>confdefs.h
 
 fi
-
-for ac_header in string.h stdlib.h unistd.h stdarg.h math.h pwd.h
-do :
-  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
-ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
+ac_fn_c_check_header_compile "$LINENO" "pwd.h" "ac_cv_header_pwd_h" "$ac_includes_default"
+if test "x$ac_cv_header_pwd_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_PWD_H 1" >>confdefs.h
 
 fi
 
-done
+ac_fn_c_check_header_compile "$LINENO" "sys/types.h" "ac_cv_header_sys_types_h" "$ac_includes_default"
+if test "x$ac_cv_header_sys_types_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_SYS_TYPES_H 1" >>confdefs.h
 
-for ac_header in sys/types.h sys/stat.h
-do :
-  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
-ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
+fi
+ac_fn_c_check_header_compile "$LINENO" "sys/stat.h" "ac_cv_header_sys_stat_h" "$ac_includes_default"
+if test "x$ac_cv_header_sys_stat_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_SYS_STAT_H 1" >>confdefs.h
 
 fi
 
-done
 
+ac_fn_c_check_func "$LINENO" "strchr" "ac_cv_func_strchr"
+if test "x$ac_cv_func_strchr" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRCHR 1" >>confdefs.h
 
-for ac_func in strchr getcwd
-do :
-  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
-ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
-_ACEOF
+fi
+ac_fn_c_check_func "$LINENO" "getcwd" "ac_cv_func_getcwd"
+if test "x$ac_cv_func_getcwd" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETCWD 1" >>confdefs.h
 
 fi
-done
 
 ac_fn_c_check_func "$LINENO" "strerror" "ac_cv_func_strerror"
-if test "x$ac_cv_func_strerror" = xyes; then :
-  $as_echo "#define HAVE_STRERROR 1" >>confdefs.h
+if test "x$ac_cv_func_strerror" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRERROR 1" >>confdefs.h
 
-else
+else $as_nop
   case " $LIBOBJS " in
   *" strerror.$ac_objext "* ) ;;
   *) LIBOBJS="$LIBOBJS strerror.$ac_objext"
@@ -4924,12 +5316,12 @@ else
 esac
 
 fi
-
 ac_fn_c_check_func "$LINENO" "memmove" "ac_cv_func_memmove"
-if test "x$ac_cv_func_memmove" = xyes; then :
-  $as_echo "#define HAVE_MEMMOVE 1" >>confdefs.h
+if test "x$ac_cv_func_memmove" = xyes
+then :
+  printf "%s\n" "#define HAVE_MEMMOVE 1" >>confdefs.h
 
-else
+else $as_nop
   case " $LIBOBJS " in
   *" memmove.$ac_objext "* ) ;;
   *) LIBOBJS="$LIBOBJS memmove.$ac_objext"
@@ -4937,12 +5329,12 @@ else
 esac
 
 fi
-
 ac_fn_c_check_func "$LINENO" "memcpy" "ac_cv_func_memcpy"
-if test "x$ac_cv_func_memcpy" = xyes; then :
-  $as_echo "#define HAVE_MEMCPY 1" >>confdefs.h
+if test "x$ac_cv_func_memcpy" = xyes
+then :
+  printf "%s\n" "#define HAVE_MEMCPY 1" >>confdefs.h
 
-else
+else $as_nop
   case " $LIBOBJS " in
   *" memcpy.$ac_objext "* ) ;;
   *) LIBOBJS="$LIBOBJS memcpy.$ac_objext"
@@ -4950,12 +5342,12 @@ else
 esac
 
 fi
-
 ac_fn_c_check_func "$LINENO" "strtoul" "ac_cv_func_strtoul"
-if test "x$ac_cv_func_strtoul" = xyes; then :
-  $as_echo "#define HAVE_STRTOUL 1" >>confdefs.h
+if test "x$ac_cv_func_strtoul" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRTOUL 1" >>confdefs.h
 
-else
+else $as_nop
   case " $LIBOBJS " in
   *" strtoul.$ac_objext "* ) ;;
   *) LIBOBJS="$LIBOBJS strtoul.$ac_objext"
@@ -4964,32 +5356,38 @@ esac
 
 fi
 
+ac_func=
+for ac_item in $ac_func_c_list
+do
+  if test $ac_func; then
+    ac_fn_c_check_func "$LINENO" $ac_func ac_cv_func_$ac_func
+    if eval test \"x\$ac_cv_func_$ac_func\" = xyes; then
+      echo "#define $ac_item 1" >> confdefs.h
+    fi
+    ac_func=
+  else
+    ac_func=$ac_item
+  fi
+done
 
-for ac_func in vprintf
-do :
-  ac_fn_c_check_func "$LINENO" "vprintf" "ac_cv_func_vprintf"
-if test "x$ac_cv_func_vprintf" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_VPRINTF 1
-_ACEOF
-
-ac_fn_c_check_func "$LINENO" "_doprnt" "ac_cv_func__doprnt"
-if test "x$ac_cv_func__doprnt" = xyes; then :
+if test "x$ac_cv_func_vprintf" = xno
+then :
+  ac_fn_c_check_func "$LINENO" "_doprnt" "ac_cv_func__doprnt"
+if test "x$ac_cv_func__doprnt" = xyes
+then :
 
-$as_echo "#define HAVE_DOPRNT 1" >>confdefs.h
+printf "%s\n" "#define HAVE_DOPRNT 1" >>confdefs.h
 
 fi
 
 fi
-done
-
 
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for main in -lsun" >&5
-$as_echo_n "checking for main in -lsun... " >&6; }
-if ${ac_cv_lib_sun_main+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for main in -lsun" >&5
+printf %s "checking for main in -lsun... " >&6; }
+if test ${ac_cv_lib_sun_main+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsun  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -4997,28 +5395,28 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 
 
 int
-main ()
+main (void)
 {
 return main ();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_sun_main=yes
-else
+else $as_nop
   ac_cv_lib_sun_main=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sun_main" >&5
-$as_echo "$ac_cv_lib_sun_main" >&6; }
-if test "x$ac_cv_lib_sun_main" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBSUN 1
-_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sun_main" >&5
+printf "%s\n" "$ac_cv_lib_sun_main" >&6; }
+if test "x$ac_cv_lib_sun_main" = xyes
+then :
+  printf "%s\n" "#define HAVE_LIBSUN 1" >>confdefs.h
 
   LIBS="-lsun $LIBS"
 
@@ -5026,15 +5424,17 @@ fi
 
 
 ac_fn_c_check_func "$LINENO" "gethostname" "ac_cv_func_gethostname"
-if test "x$ac_cv_func_gethostname" = xyes; then :
+if test "x$ac_cv_func_gethostname" = xyes
+then :
 
-else
+else $as_nop
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostname in -lnsl" >&5
-$as_echo_n "checking for gethostname in -lnsl... " >&6; }
-if ${ac_cv_lib_nsl_gethostname+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for gethostname in -lnsl" >&5
+printf %s "checking for gethostname in -lnsl... " >&6; }
+if test ${ac_cv_lib_nsl_gethostname+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lnsl  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -5043,38 +5443,38 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char gethostname ();
 int
-main ()
+main (void)
 {
 return gethostname ();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_nsl_gethostname=yes
-else
+else $as_nop
   ac_cv_lib_nsl_gethostname=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl_gethostname" >&5
-$as_echo "$ac_cv_lib_nsl_gethostname" >&6; }
-if test "x$ac_cv_lib_nsl_gethostname" = xyes; then :
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl_gethostname" >&5
+printf "%s\n" "$ac_cv_lib_nsl_gethostname" >&6; }
+if test "x$ac_cv_lib_nsl_gethostname" = xyes
+then :
   LIBS="$LIBS -lnsl"
-else
-
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostname in -lsocket" >&5
-$as_echo_n "checking for gethostname in -lsocket... " >&6; }
-if ${ac_cv_lib_socket_gethostname+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+else $as_nop
+
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for gethostname in -lsocket" >&5
+printf %s "checking for gethostname in -lsocket... " >&6; }
+if test ${ac_cv_lib_socket_gethostname+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsocket  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -5083,33 +5483,30 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char gethostname ();
 int
-main ()
+main (void)
 {
 return gethostname ();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_socket_gethostname=yes
-else
+else $as_nop
   ac_cv_lib_socket_gethostname=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_gethostname" >&5
-$as_echo "$ac_cv_lib_socket_gethostname" >&6; }
-if test "x$ac_cv_lib_socket_gethostname" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBSOCKET 1
-_ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_gethostname" >&5
+printf "%s\n" "$ac_cv_lib_socket_gethostname" >&6; }
+if test "x$ac_cv_lib_socket_gethostname" = xyes
+then :
+  printf "%s\n" "#define HAVE_LIBSOCKET 1" >>confdefs.h
 
   LIBS="-lsocket $LIBS"
 
@@ -5125,11 +5522,12 @@ fi
 if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
 set dummy ${ac_tool_prefix}ranlib; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_RANLIB+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_RANLIB+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$RANLIB"; then
   ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
 else
@@ -5137,11 +5535,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -5152,11 +5554,11 @@ fi
 fi
 RANLIB=$ac_cv_prog_RANLIB
 if test -n "$RANLIB"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $RANLIB" >&5
-$as_echo "$RANLIB" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $RANLIB" >&5
+printf "%s\n" "$RANLIB" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -5165,11 +5567,12 @@ if test -z "$ac_cv_prog_RANLIB"; then
   ac_ct_RANLIB=$RANLIB
   # Extract the first word of "ranlib", so it can be a program name with args.
 set dummy ranlib; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_RANLIB+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_RANLIB"; then
   ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
 else
@@ -5177,11 +5580,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_RANLIB="ranlib"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -5192,11 +5599,11 @@ fi
 fi
 ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
 if test -n "$ac_ct_RANLIB"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB" >&5
-$as_echo "$ac_ct_RANLIB" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB" >&5
+printf "%s\n" "$ac_ct_RANLIB" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
   if test "x$ac_ct_RANLIB" = x; then
@@ -5204,8 +5611,8 @@ fi
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
-$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     RANLIB=$ac_ct_RANLIB
@@ -5218,11 +5625,12 @@ for ac_prog in 'bison -y' byacc
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_YACC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_YACC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$YACC"; then
   ac_cv_prog_YACC="$YACC" # Let the user override the test.
 else
@@ -5230,11 +5638,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_YACC="$ac_prog"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -5245,11 +5657,11 @@ fi
 fi
 YACC=$ac_cv_prog_YACC
 if test -n "$YACC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $YACC" >&5
-$as_echo "$YACC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $YACC" >&5
+printf "%s\n" "$YACC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -5261,11 +5673,12 @@ for ac_prog in flex lex
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_LEX+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_LEX+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$LEX"; then
   ac_cv_prog_LEX="$LEX" # Let the user override the test.
 else
@@ -5273,11 +5686,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_LEX="$ac_prog"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -5288,11 +5705,11 @@ fi
 fi
 LEX=$ac_cv_prog_LEX
 if test -n "$LEX"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LEX" >&5
-$as_echo "$LEX" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $LEX" >&5
+printf "%s\n" "$LEX" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -5300,15 +5717,26 @@ fi
 done
 test -n "$LEX" || LEX=":"
 
-if test "x$LEX" != "x:"; then
-  cat >conftest.l <<_ACEOF
+  if test "x$LEX" != "x:"; then
+    cat >conftest.l <<_ACEOF
+%{
+#ifdef __cplusplus
+extern "C"
+#endif
+int yywrap(void);
+%}
 %%
 a { ECHO; }
 b { REJECT; }
 c { yymore (); }
 d { yyless (1); }
 e { /* IRIX 6.5 flex 2.5.4 underquotes its yyless argument.  */
-    yyless ((input () != 0)); }
+#ifdef __cplusplus
+    yyless ((yyinput () != 0));
+#else
+    yyless ((input () != 0));
+#endif
+  }
 f { unput (yytext[0]); }
 . { BEGIN INITIAL; }
 %%
@@ -5316,101 +5744,205 @@ f { unput (yytext[0]); }
 extern char *yytext;
 #endif
 int
+yywrap (void)
+{
+  return 1;
+}
+int
 main (void)
 {
-  return ! yylex () + ! yywrap ();
+  return ! yylex ();
 }
 _ACEOF
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for lex output file root" >&5
+printf %s "checking for lex output file root... " >&6; }
+if test ${ac_cv_prog_lex_root+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+
+ac_cv_prog_lex_root=unknown
 { { ac_try="$LEX conftest.l"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$LEX conftest.l") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking lex output file root" >&5
-$as_echo_n "checking lex output file root... " >&6; }
-if ${ac_cv_prog_lex_root+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } &&
 if test -f lex.yy.c; then
   ac_cv_prog_lex_root=lex.yy
 elif test -f lexyy.c; then
   ac_cv_prog_lex_root=lexyy
-else
-  as_fn_error $? "cannot find output from $LEX; giving up" "$LINENO" 5
 fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_lex_root" >&5
-$as_echo "$ac_cv_prog_lex_root" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_lex_root" >&5
+printf "%s\n" "$ac_cv_prog_lex_root" >&6; }
+if test "$ac_cv_prog_lex_root" = unknown
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cannot find output from $LEX; giving up on $LEX" >&5
+printf "%s\n" "$as_me: WARNING: cannot find output from $LEX; giving up on $LEX" >&2;}
+   LEX=: LEXLIB=
+fi
 LEX_OUTPUT_ROOT=$ac_cv_prog_lex_root
 
-if test -z "${LEXLIB+set}"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking lex library" >&5
-$as_echo_n "checking lex library... " >&6; }
-if ${ac_cv_lib_lex+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+if test ${LEXLIB+y}
+then :
+
+else $as_nop
+
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for lex library" >&5
+printf %s "checking for lex library... " >&6; }
+if test ${ac_cv_lib_lex+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+
+    ac_save_LIBS="$LIBS"
+    ac_found=false
+    for ac_cv_lib_lex in 'none needed' -lfl -ll 'not found'; do
+      case $ac_cv_lib_lex in #(
+  'none needed') :
+     ;; #(
+  'not found') :
+    break ;; #(
+  *) :
+    LIBS="$ac_cv_lib_lex $ac_save_LIBS" ;; #(
+  *) :
+     ;;
+esac
 
-    ac_save_LIBS=$LIBS
-    ac_cv_lib_lex='none needed'
-    for ac_lib in '' -lfl -ll; do
-      LIBS="$ac_lib $ac_save_LIBS"
       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 `cat $LEX_OUTPUT_ROOT.c`
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_lex=$ac_lib
+if ac_fn_c_try_link "$LINENO"
+then :
+  ac_found=:
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
-      test "$ac_cv_lib_lex" != 'none needed' && break
+      if $ac_found; then
+        break
+      fi
     done
-    LIBS=$ac_save_LIBS
+    LIBS="$ac_save_LIBS"
+
+fi
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_lex" >&5
+printf "%s\n" "$ac_cv_lib_lex" >&6; }
+  if test "$ac_cv_lib_lex" = 'not found'
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: required lex library not found; giving up on $LEX" >&5
+printf "%s\n" "$as_me: WARNING: required lex library not found; giving up on $LEX" >&2;}
+	 LEX=: LEXLIB=
+elif test "$ac_cv_lib_lex" = 'none needed'
+then :
+  LEXLIB=''
+else $as_nop
+  LEXLIB=$ac_cv_lib_lex
+fi
+  ac_save_LIBS="$LIBS"
+      LIBS=
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for library containing yywrap" >&5
+printf %s "checking for library containing yywrap... " >&6; }
+if test ${ac_cv_search_yywrap+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_func_search_save_LIBS=$LIBS
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+char yywrap ();
+int
+main (void)
+{
+return yywrap ();
+  ;
+  return 0;
+}
+_ACEOF
+for ac_lib in '' fl l
+do
+  if test -z "$ac_lib"; then
+    ac_res="none required"
+  else
+    ac_res=-l$ac_lib
+    LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
+  fi
+  if ac_fn_c_try_link "$LINENO"
+then :
+  ac_cv_search_yywrap=$ac_res
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
+    conftest$ac_exeext
+  if test ${ac_cv_search_yywrap+y}
+then :
+  break
+fi
+done
+if test ${ac_cv_search_yywrap+y}
+then :
 
+else $as_nop
+  ac_cv_search_yywrap=no
+fi
+rm conftest.$ac_ext
+LIBS=$ac_func_search_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_lex" >&5
-$as_echo "$ac_cv_lib_lex" >&6; }
-  test "$ac_cv_lib_lex" != 'none needed' && LEXLIB=$ac_cv_lib_lex
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_yywrap" >&5
+printf "%s\n" "$ac_cv_search_yywrap" >&6; }
+ac_res=$ac_cv_search_yywrap
+if test "$ac_res" != no
+then :
+  test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+  LEXLIB="$LIBS"
 fi
 
+      LIBS="$ac_save_LIBS"
+fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether yytext is a pointer" >&5
-$as_echo_n "checking whether yytext is a pointer... " >&6; }
-if ${ac_cv_prog_lex_yytext_pointer+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+
+if test "$LEX" != :
+then :
+
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether yytext is a pointer" >&5
+printf %s "checking whether yytext is a pointer... " >&6; }
+if test ${ac_cv_prog_lex_yytext_pointer+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   # POSIX says lex can declare yytext either as a pointer or an array; the
 # default is implementation-dependent.  Figure out which it is, since
 # not all implementations provide the %pointer and %array declarations.
 ac_cv_prog_lex_yytext_pointer=no
-ac_save_LIBS=$LIBS
-LIBS="$LEXLIB $ac_save_LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
   #define YYTEXT_POINTER 1
 `cat $LEX_OUTPUT_ROOT.c`
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_prog_lex_yytext_pointer=yes
 fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_save_LIBS
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_lex_yytext_pointer" >&5
-$as_echo "$ac_cv_prog_lex_yytext_pointer" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_lex_yytext_pointer" >&5
+printf "%s\n" "$ac_cv_prog_lex_yytext_pointer" >&6; }
 if test $ac_cv_prog_lex_yytext_pointer = yes; then
 
-$as_echo "#define YYTEXT_POINTER 1" >>confdefs.h
+printf "%s\n" "#define YYTEXT_POINTER 1" >>confdefs.h
+
+fi
 
 fi
 rm -f conftest.l $LEX_OUTPUT_ROOT.c
@@ -5421,7 +5953,8 @@ if test "$LEX" = :; then
 fi
 
 # Check whether --enable-debug was given.
-if test "${enable_debug+set}" = set; then :
+if test ${enable_debug+y}
+then :
   enableval=$enable_debug;
   echo enabling debugging
   if test -n "$GCC"; then
@@ -5434,7 +5967,8 @@ fi
 
 
 # Check whether --with-media was given.
-if test "${with_media+set}" = set; then :
+if test ${with_media+y}
+then :
   withval=$with_media; if test "X$withval" != "Xno"; then
     if test "X$withval" = "Xyes"; then
       ac_cv_value_media='Letter'
@@ -5444,7 +5978,7 @@ if test "${with_media+set}" = set; then :
   else
     ac_cv_value_media=${MEDIA-A4}
   fi
-else
+else $as_nop
   ac_cv_value_media=${MEDIA-A4}
 
 fi
@@ -5455,11 +5989,12 @@ MEDIA=$ac_cv_value_media
 
 # Extract the first word of "lpr", so it can be a program name with args.
 set dummy lpr; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_SPOOLER+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_SPOOLER+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$SPOOLER"; then
   ac_cv_prog_SPOOLER="$SPOOLER" # Let the user override the test.
 else
@@ -5467,11 +6002,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_SPOOLER="lpr"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -5482,21 +6021,22 @@ fi
 fi
 SPOOLER=$ac_cv_prog_SPOOLER
 if test -n "$SPOOLER"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $SPOOLER" >&5
-$as_echo "$SPOOLER" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $SPOOLER" >&5
+printf "%s\n" "$SPOOLER" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
 # Extract the first word of "lp", so it can be a program name with args.
 set dummy lp; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_SPOOLER+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_SPOOLER+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$SPOOLER"; then
   ac_cv_prog_SPOOLER="$SPOOLER" # Let the user override the test.
 else
@@ -5504,11 +6044,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_SPOOLER="lp"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -5519,18 +6063,19 @@ fi
 fi
 SPOOLER=$ac_cv_prog_SPOOLER
 if test -n "$SPOOLER"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $SPOOLER" >&5
-$as_echo "$SPOOLER" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $SPOOLER" >&5
+printf "%s\n" "$SPOOLER" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
 
 
 # Check whether --with-spooler was given.
-if test "${with_spooler+set}" = set; then :
+if test ${with_spooler+y}
+then :
   withval=$with_spooler; if test "X$withval" != "Xno"; then
     SPOOLER=$withval
   fi
@@ -5545,7 +6090,8 @@ fi
 PSLEVEL="2"
 
 # Check whether --with-ps-level was given.
-if test "${with_ps_level+set}" = set; then :
+if test ${with_ps_level+y}
+then :
   withval=$with_ps_level; if test "X$withval" != "Xno"; then
     PSLEVEL=$withval
   fi
@@ -5555,17 +6101,18 @@ fi
 
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether NLS is requested" >&5
-$as_echo_n "checking whether NLS is requested... " >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether NLS is requested" >&5
+printf %s "checking whether NLS is requested... " >&6; }
     # Check whether --enable-nls was given.
-if test "${enable_nls+set}" = set; then :
+if test ${enable_nls+y}
+then :
   enableval=$enable_nls; USE_NLS=$enableval
-else
+else $as_nop
   USE_NLS=yes
 fi
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $USE_NLS" >&5
-$as_echo "$USE_NLS" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $USE_NLS" >&5
+printf "%s\n" "$USE_NLS" >&6; }
 
 
 
@@ -5605,11 +6152,12 @@ rm -f conf$$.file
 
 # Extract the first word of "msgfmt", so it can be a program name with args.
 set dummy msgfmt; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_path_MSGFMT+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_path_MSGFMT+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   case "$MSGFMT" in
   [\\/]* | ?:[\\/]*)
     ac_cv_path_MSGFMT="$MSGFMT" # Let the user override the test with a path.
@@ -5637,20 +6185,21 @@ esac
 fi
 MSGFMT="$ac_cv_path_MSGFMT"
 if test "$MSGFMT" != ":"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MSGFMT" >&5
-$as_echo "$MSGFMT" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MSGFMT" >&5
+printf "%s\n" "$MSGFMT" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
   # Extract the first word of "gmsgfmt", so it can be a program name with args.
 set dummy gmsgfmt; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_path_GMSGFMT+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_path_GMSGFMT+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   case $GMSGFMT in
   [\\/]* | ?:[\\/]*)
   ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a path.
@@ -5660,11 +6209,15 @@ else
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_path_GMSGFMT="$as_dir/$ac_word$ac_exec_ext"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    ac_cv_path_GMSGFMT="$as_dir$ac_word$ac_exec_ext"
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -5677,11 +6230,11 @@ esac
 fi
 GMSGFMT=$ac_cv_path_GMSGFMT
 if test -n "$GMSGFMT"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GMSGFMT" >&5
-$as_echo "$GMSGFMT" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $GMSGFMT" >&5
+printf "%s\n" "$GMSGFMT" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -5728,11 +6281,12 @@ rm -f conf$$.file
 
 # Extract the first word of "xgettext", so it can be a program name with args.
 set dummy xgettext; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_path_XGETTEXT+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_path_XGETTEXT+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   case "$XGETTEXT" in
   [\\/]* | ?:[\\/]*)
     ac_cv_path_XGETTEXT="$XGETTEXT" # Let the user override the test with a path.
@@ -5760,11 +6314,11 @@ esac
 fi
 XGETTEXT="$ac_cv_path_XGETTEXT"
 if test "$XGETTEXT" != ":"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $XGETTEXT" >&5
-$as_echo "$XGETTEXT" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $XGETTEXT" >&5
+printf "%s\n" "$XGETTEXT" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
     rm -f messages.po
@@ -5806,11 +6360,12 @@ rm -f conf$$.file
 
 # Extract the first word of "msgmerge", so it can be a program name with args.
 set dummy msgmerge; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_path_MSGMERGE+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_path_MSGMERGE+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   case "$MSGMERGE" in
   [\\/]* | ?:[\\/]*)
     ac_cv_path_MSGMERGE="$MSGMERGE" # Let the user override the test with a path.
@@ -5837,11 +6392,11 @@ esac
 fi
 MSGMERGE="$ac_cv_path_MSGMERGE"
 if test "$MSGMERGE" != ":"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MSGMERGE" >&5
-$as_echo "$MSGMERGE" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $MSGMERGE" >&5
+printf "%s\n" "$MSGMERGE" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -5854,26 +6409,29 @@ fi
   ac_config_commands="$ac_config_commands po-directories"
 
 
-# Make sure we can run config.sub.
-$SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
-  as_fn_error $? "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
-$as_echo_n "checking build system type... " >&6; }
-if ${ac_cv_build+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+
+  # Make sure we can run config.sub.
+$SHELL "${ac_aux_dir}config.sub" sun4 >/dev/null 2>&1 ||
+  as_fn_error $? "cannot run $SHELL ${ac_aux_dir}config.sub" "$LINENO" 5
+
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
+printf %s "checking build system type... " >&6; }
+if test ${ac_cv_build+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_build_alias=$build_alias
 test "x$ac_build_alias" = x &&
-  ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
+  ac_build_alias=`$SHELL "${ac_aux_dir}config.guess"`
 test "x$ac_build_alias" = x &&
   as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
-ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
-  as_fn_error $? "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
+ac_cv_build=`$SHELL "${ac_aux_dir}config.sub" $ac_build_alias` ||
+  as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $ac_build_alias failed" "$LINENO" 5
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
-$as_echo "$ac_cv_build" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
+printf "%s\n" "$ac_cv_build" >&6; }
 case $ac_cv_build in
 *-*-*) ;;
 *) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
@@ -5892,21 +6450,22 @@ IFS=$ac_save_IFS
 case $build_os in *\ *) build_os=`echo "$build_os" | sed 's/ /-/g'`;; esac
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
-$as_echo_n "checking host system type... " >&6; }
-if ${ac_cv_host+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
+printf %s "checking host system type... " >&6; }
+if test ${ac_cv_host+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test "x$host_alias" = x; then
   ac_cv_host=$ac_cv_build
 else
-  ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
-    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
+  ac_cv_host=`$SHELL "${ac_aux_dir}config.sub" $host_alias` ||
+    as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $host_alias failed" "$LINENO" 5
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
-$as_echo "$ac_cv_host" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
+printf "%s\n" "$ac_cv_host" >&6; }
 case $ac_cv_host in
 *-*-*) ;;
 *) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
@@ -5925,12 +6484,146 @@ IFS=$ac_save_IFS
 case $host_os in *\ *) host_os=`echo "$host_os" | sed 's/ /-/g'`;; esac
 
 
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
+printf %s "checking how to run the C preprocessor... " >&6; }
+# On Suns, sometimes $CPP names a directory.
+if test -n "$CPP" && test -d "$CPP"; then
+  CPP=
+fi
+if test -z "$CPP"; then
+  if test ${ac_cv_prog_CPP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+      # Double quotes because $CC needs to be expanded
+    for CPP in "$CC -E" "$CC -E -traditional-cpp" cpp /lib/cpp
+    do
+      ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <limits.h>
+		     Syntax error
+_ACEOF
+if ac_fn_c_try_cpp "$LINENO"
+then :
+
+else $as_nop
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.i conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether nonexistent headers
+  # can be detected and how.
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <ac_nonexistent.h>
+_ACEOF
+if ac_fn_c_try_cpp "$LINENO"
+then :
+  # Broken: success on invalid input.
+continue
+else $as_nop
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.i conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.i conftest.err conftest.$ac_ext
+if $ac_preproc_ok
+then :
+  break
+fi
+
+    done
+    ac_cv_prog_CPP=$CPP
 
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C Library 2 or newer" >&5
-$as_echo_n "checking whether we are using the GNU C Library 2 or newer... " >&6; }
-if ${ac_cv_gnu_library_2+:} false; then :
-  $as_echo_n "(cached) " >&6
+fi
+  CPP=$ac_cv_prog_CPP
 else
+  ac_cv_prog_CPP=$CPP
+fi
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
+printf "%s\n" "$CPP" >&6; }
+ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <limits.h>
+		     Syntax error
+_ACEOF
+if ac_fn_c_try_cpp "$LINENO"
+then :
+
+else $as_nop
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.i conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether nonexistent headers
+  # can be detected and how.
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <ac_nonexistent.h>
+_ACEOF
+if ac_fn_c_try_cpp "$LINENO"
+then :
+  # Broken: success on invalid input.
+continue
+else $as_nop
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.i conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.i conftest.err conftest.$ac_ext
+if $ac_preproc_ok
+then :
+
+else $as_nop
+  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details" "$LINENO" 5; }
+fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C Library 2 or newer" >&5
+printf %s "checking whether we are using the GNU C Library 2 or newer... " >&6; }
+if test ${ac_cv_gnu_library_2+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -5943,18 +6636,19 @@ else
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "Lucky GNU user" >/dev/null 2>&1; then :
+  $EGREP "Lucky GNU user" >/dev/null 2>&1
+then :
   ac_cv_gnu_library_2=yes
-else
+else $as_nop
   ac_cv_gnu_library_2=no
 fi
-rm -f conftest*
+rm -rf conftest*
 
 
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gnu_library_2" >&5
-$as_echo "$ac_cv_gnu_library_2" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gnu_library_2" >&5
+printf "%s\n" "$ac_cv_gnu_library_2" >&6; }
 
     GLIBC2="$ac_cv_gnu_library_2"
 
@@ -5964,11 +6658,12 @@ $as_echo "$ac_cv_gnu_library_2" >&6; }
   CFLAG_VISIBILITY=
   HAVE_VISIBILITY=0
   if test -n "$GCC"; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for simple visibility declarations" >&5
-$as_echo_n "checking for simple visibility declarations... " >&6; }
-    if ${gl_cv_cc_visibility+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for simple visibility declarations" >&5
+printf %s "checking for simple visibility declarations... " >&6; }
+    if test ${gl_cv_cc_visibility+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
       gl_save_CFLAGS="$CFLAGS"
       CFLAGS="$CFLAGS -fvisibility=hidden"
@@ -5979,24 +6674,25 @@ extern __attribute__((__visibility__("hidden"))) int hiddenvar;
          extern __attribute__((__visibility__("hidden"))) int hiddenfunc (void);
          extern __attribute__((__visibility__("default"))) int exportedfunc (void);
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   gl_cv_cc_visibility=yes
-else
+else $as_nop
   gl_cv_cc_visibility=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
       CFLAGS="$gl_save_CFLAGS"
 fi
 
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_cc_visibility" >&5
-$as_echo "$gl_cv_cc_visibility" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gl_cv_cc_visibility" >&5
+printf "%s\n" "$gl_cv_cc_visibility" >&6; }
     if test $gl_cv_cc_visibility = yes; then
       CFLAG_VISIBILITY="-fvisibility=hidden"
       HAVE_VISIBILITY=1
@@ -6005,37 +6701,37 @@ $as_echo "$gl_cv_cc_visibility" >&6; }
 
 
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_VISIBILITY $HAVE_VISIBILITY
-_ACEOF
+printf "%s\n" "#define HAVE_VISIBILITY $HAVE_VISIBILITY" >>confdefs.h
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for inline" >&5
-$as_echo_n "checking for inline... " >&6; }
-if ${ac_cv_c_inline+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for inline" >&5
+printf %s "checking for inline... " >&6; }
+if test ${ac_cv_c_inline+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_cv_c_inline=no
 for ac_kw in inline __inline__ __inline; do
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #ifndef __cplusplus
 typedef int foo_t;
-static $ac_kw foo_t static_foo () {return 0; }
-$ac_kw foo_t foo () {return 0; }
+static $ac_kw foo_t static_foo (void) {return 0; }
+$ac_kw foo_t foo (void) {return 0; }
 #endif
 
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_c_inline=$ac_kw
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
   test "$ac_cv_c_inline" != no && break
 done
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_inline" >&5
-$as_echo "$ac_cv_c_inline" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_inline" >&5
+printf "%s\n" "$ac_cv_c_inline" >&6; }
 
 case $ac_cv_c_inline in
   inline | yes) ;;
@@ -6053,83 +6749,59 @@ _ACEOF
 esac
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for stdint.h" >&5
-$as_echo_n "checking for stdint.h... " >&6; }
-if ${gl_cv_header_stdint_h+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for stdint.h" >&5
+printf %s "checking for stdint.h... " >&6; }
+if test ${gl_cv_header_stdint_h+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <sys/types.h>
 #include <stdint.h>
 int
-main ()
+main (void)
 {
 uintmax_t i = (uintmax_t) -1; return !i;
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   gl_cv_header_stdint_h=yes
-else
+else $as_nop
   gl_cv_header_stdint_h=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_header_stdint_h" >&5
-$as_echo "$gl_cv_header_stdint_h" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gl_cv_header_stdint_h" >&5
+printf "%s\n" "$gl_cv_header_stdint_h" >&6; }
   if test $gl_cv_header_stdint_h = yes; then
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_STDINT_H_WITH_UINTMAX 1
-_ACEOF
+printf "%s\n" "#define HAVE_STDINT_H_WITH_UINTMAX 1" >>confdefs.h
 
   fi
 
 
 
 
-  for ac_header in $ac_header_list
-do :
-  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
-ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
-"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
-
-fi
-
-done
-
-
-
-
-
-
-
 
-for ac_func in getpagesize
-do :
-  ac_fn_c_check_func "$LINENO" "getpagesize" "ac_cv_func_getpagesize"
-if test "x$ac_cv_func_getpagesize" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_GETPAGESIZE 1
-_ACEOF
-
-fi
-done
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for working mmap" >&5
-$as_echo_n "checking for working mmap... " >&6; }
-if ${ac_cv_func_mmap_fixed_mapped+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
-  ac_cv_func_mmap_fixed_mapped=no
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for working mmap" >&5
+printf %s "checking for working mmap... " >&6; }
+if test ${ac_cv_func_mmap_fixed_mapped+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test "$cross_compiling" = yes
+then :
+  case "$host_os" in # ((
+			  # Guess yes on platforms where we know the result.
+		  linux*) ac_cv_func_mmap_fixed_mapped=yes ;;
+			  # If we don't know, assume the worst.
+		  *)      ac_cv_func_mmap_fixed_mapped=no ;;
+		esac
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $ac_includes_default
@@ -6161,10 +6833,6 @@ $ac_includes_default
 #include <fcntl.h>
 #include <sys/mman.h>
 
-#if !defined STDC_HEADERS && !defined HAVE_STDLIB_H
-char *malloc ();
-#endif
-
 /* This mess was copied from the GNU getpagesize.h.  */
 #ifndef HAVE_GETPAGESIZE
 # ifdef _SC_PAGESIZE
@@ -6198,7 +6866,7 @@ char *malloc ();
 #endif /* no HAVE_GETPAGESIZE */
 
 int
-main ()
+main (void)
 {
   char *data, *data2, *data3;
   const char *cdata2;
@@ -6266,12 +6934,15 @@ main ()
     if (*(data + i) != *(data3 + i))
       return 14;
   close (fd);
+  free (data);
+  free (data3);
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   ac_cv_func_mmap_fixed_mapped=yes
-else
+else $as_nop
   ac_cv_func_mmap_fixed_mapped=no
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -6279,22 +6950,23 @@ rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_mmap_fixed_mapped" >&5
-$as_echo "$ac_cv_func_mmap_fixed_mapped" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_mmap_fixed_mapped" >&5
+printf "%s\n" "$ac_cv_func_mmap_fixed_mapped" >&6; }
 if test $ac_cv_func_mmap_fixed_mapped = yes; then
 
-$as_echo "#define HAVE_MMAP 1" >>confdefs.h
+printf "%s\n" "#define HAVE_MMAP 1" >>confdefs.h
 
 fi
 rm -f conftest.mmap conftest.txt
 
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether integer division by zero raises SIGFPE" >&5
-$as_echo_n "checking whether integer division by zero raises SIGFPE... " >&6; }
-if ${gt_cv_int_divbyzero_sigfpe+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether integer division by zero raises SIGFPE" >&5
+printf %s "checking whether integer division by zero raises SIGFPE... " >&6; }
+if test ${gt_cv_int_divbyzero_sigfpe+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
       gt_cv_int_divbyzero_sigfpe=
       case "$host_os" in
@@ -6309,7 +6981,8 @@ else
           ;;
       esac
       if test -z "$gt_cv_int_divbyzero_sigfpe"; then
-        if test "$cross_compiling" = yes; then :
+        if test "$cross_compiling" = yes
+then :
 
             # Guess based on the CPU.
             case "$host_cpu" in
@@ -6319,7 +6992,7 @@ else
                 gt_cv_int_divbyzero_sigfpe="guessing no";;
             esac
 
-else
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -6356,9 +7029,10 @@ int main ()
 }
 
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   gt_cv_int_divbyzero_sigfpe=yes
-else
+else $as_nop
   gt_cv_int_divbyzero_sigfpe=no
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -6368,59 +7042,58 @@ fi
       fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_int_divbyzero_sigfpe" >&5
-$as_echo "$gt_cv_int_divbyzero_sigfpe" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_int_divbyzero_sigfpe" >&5
+printf "%s\n" "$gt_cv_int_divbyzero_sigfpe" >&6; }
   case "$gt_cv_int_divbyzero_sigfpe" in
     *yes) value=1;;
     *) value=0;;
   esac
 
-cat >>confdefs.h <<_ACEOF
-#define INTDIV0_RAISES_SIGFPE $value
-_ACEOF
+printf "%s\n" "#define INTDIV0_RAISES_SIGFPE $value" >>confdefs.h
 
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for inttypes.h" >&5
-$as_echo_n "checking for inttypes.h... " >&6; }
-if ${gl_cv_header_inttypes_h+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for inttypes.h" >&5
+printf %s "checking for inttypes.h... " >&6; }
+if test ${gl_cv_header_inttypes_h+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <sys/types.h>
 #include <inttypes.h>
 int
-main ()
+main (void)
 {
 uintmax_t i = (uintmax_t) -1; return !i;
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   gl_cv_header_inttypes_h=yes
-else
+else $as_nop
   gl_cv_header_inttypes_h=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_header_inttypes_h" >&5
-$as_echo "$gl_cv_header_inttypes_h" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gl_cv_header_inttypes_h" >&5
+printf "%s\n" "$gl_cv_header_inttypes_h" >&6; }
   if test $gl_cv_header_inttypes_h = yes; then
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_INTTYPES_H_WITH_UINTMAX 1
-_ACEOF
+printf "%s\n" "#define HAVE_INTTYPES_H_WITH_UINTMAX 1" >>confdefs.h
 
   fi
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for unsigned long long int" >&5
-$as_echo_n "checking for unsigned long long int... " >&6; }
-if ${ac_cv_type_unsigned_long_long_int+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for unsigned long long int" >&5
+printf %s "checking for unsigned long long int... " >&6; }
+if test ${ac_cv_type_unsigned_long_long_int+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -6442,7 +7115,7 @@ else
 		     ? 1 : -1)];
       int i = 63;
 int
-main ()
+main (void)
 {
 /* Test availability of runtime routines for shift and division.  */
       long long int llmax = 9223372036854775807ll;
@@ -6456,19 +7129,20 @@ main ()
 }
 
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_type_unsigned_long_long_int=yes
-else
+else $as_nop
   ac_cv_type_unsigned_long_long_int=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_unsigned_long_long_int" >&5
-$as_echo "$ac_cv_type_unsigned_long_long_int" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_unsigned_long_long_int" >&5
+printf "%s\n" "$ac_cv_type_unsigned_long_long_int" >&6; }
   if test $ac_cv_type_unsigned_long_long_int = yes; then
 
-$as_echo "#define HAVE_UNSIGNED_LONG_LONG_INT 1" >>confdefs.h
+printf "%s\n" "#define HAVE_UNSIGNED_LONG_LONG_INT 1" >>confdefs.h
 
   fi
 
@@ -6481,35 +7155,29 @@ $as_echo "#define HAVE_UNSIGNED_LONG_LONG_INT 1" >>confdefs.h
       && ac_type='unsigned long long' \
       || ac_type='unsigned long'
 
-cat >>confdefs.h <<_ACEOF
-#define uintmax_t $ac_type
-_ACEOF
+printf "%s\n" "#define uintmax_t $ac_type" >>confdefs.h
 
   else
 
-$as_echo "#define HAVE_UINTMAX_T 1" >>confdefs.h
+printf "%s\n" "#define HAVE_UINTMAX_T 1" >>confdefs.h
 
   fi
 
 
-  for ac_header in inttypes.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "inttypes.h" "ac_cv_header_inttypes_h" "$ac_includes_default"
-if test "x$ac_cv_header_inttypes_h" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_INTTYPES_H 1
-_ACEOF
+  ac_fn_c_check_header_compile "$LINENO" "inttypes.h" "ac_cv_header_inttypes_h" "$ac_includes_default"
+if test "x$ac_cv_header_inttypes_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_INTTYPES_H 1" >>confdefs.h
 
 fi
 
-done
-
   if test $ac_cv_header_inttypes_h = yes; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the inttypes.h PRIxNN macros are broken" >&5
-$as_echo_n "checking whether the inttypes.h PRIxNN macros are broken... " >&6; }
-if ${gt_cv_inttypes_pri_broken+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the inttypes.h PRIxNN macros are broken" >&5
+printf %s "checking whether the inttypes.h PRIxNN macros are broken... " >&6; }
+if test ${gt_cv_inttypes_pri_broken+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -6519,29 +7187,28 @@ char *p = PRId32;
 #endif
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   gt_cv_inttypes_pri_broken=no
-else
+else $as_nop
   gt_cv_inttypes_pri_broken=yes
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_inttypes_pri_broken" >&5
-$as_echo "$gt_cv_inttypes_pri_broken" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_inttypes_pri_broken" >&5
+printf "%s\n" "$gt_cv_inttypes_pri_broken" >&6; }
   fi
   if test "$gt_cv_inttypes_pri_broken" = yes; then
 
-cat >>confdefs.h <<_ACEOF
-#define PRI_MACROS_BROKEN 1
-_ACEOF
+printf "%s\n" "#define PRI_MACROS_BROKEN 1" >>confdefs.h
 
     PRI_MACROS_BROKEN=1
   else
@@ -6554,9 +7221,10 @@ _ACEOF
 
 
     # Check whether --enable-threads was given.
-if test "${enable_threads+set}" = set; then :
+if test ${enable_threads+y}
+then :
   enableval=$enable_threads; gl_use_threads=$enableval
-else
+else $as_nop
   case "$host_os" in
                             osf*) gl_use_threads=no ;;
        *)    gl_use_threads=yes ;;
@@ -6607,9 +7275,10 @@ fi
 
 
 # Check whether --with-gnu-ld was given.
-if test "${with_gnu_ld+set}" = set; then :
+if test ${with_gnu_ld+y}
+then :
   withval=$with_gnu_ld; test "$withval" = no || with_gnu_ld=yes
-else
+else $as_nop
   with_gnu_ld=no
 fi
 
@@ -6629,8 +7298,8 @@ fi
 ac_prog=ld
 if test "$GCC" = yes; then
   # Check if gcc -print-prog-name=ld gives a path.
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ld used by GCC" >&5
-$as_echo_n "checking for ld used by GCC... " >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for ld used by GCC" >&5
+printf %s "checking for ld used by GCC... " >&6; }
   case $host in
   *-*-mingw*)
     # gcc leaves a trailing carriage return which upsets mingw
@@ -6659,15 +7328,16 @@ $as_echo_n "checking for ld used by GCC... " >&6; }
     ;;
   esac
 elif test "$with_gnu_ld" = yes; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU ld" >&5
-$as_echo_n "checking for GNU ld... " >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for GNU ld" >&5
+printf %s "checking for GNU ld... " >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for non-GNU ld" >&5
-$as_echo_n "checking for non-GNU ld... " >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for non-GNU ld" >&5
+printf %s "checking for non-GNU ld... " >&6; }
 fi
-if ${acl_cv_path_LD+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+if test ${acl_cv_path_LD+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -z "$LD"; then
   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}${PATH_SEPARATOR-:}"
   for ac_dir in $PATH; do
@@ -6693,18 +7363,19 @@ fi
 
 LD="$acl_cv_path_LD"
 if test -n "$LD"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
-$as_echo "$LD" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
+printf "%s\n" "$LD" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 test -z "$LD" && as_fn_error $? "no acceptable ld found in \$PATH" "$LINENO" 5
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
-$as_echo_n "checking if the linker ($LD) is GNU ld... " >&6; }
-if ${acl_cv_prog_gnu_ld+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
+printf %s "checking if the linker ($LD) is GNU ld... " >&6; }
+if test ${acl_cv_prog_gnu_ld+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   # I'd rather use --version here, but apparently some GNU ld's only accept -v.
 case `$LD -v 2>&1 </dev/null` in
 *GNU* | *'with BFD'*)
@@ -6713,18 +7384,21 @@ case `$LD -v 2>&1 </dev/null` in
   acl_cv_prog_gnu_ld=no ;;
 esac
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $acl_cv_prog_gnu_ld" >&5
-$as_echo "$acl_cv_prog_gnu_ld" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $acl_cv_prog_gnu_ld" >&5
+printf "%s\n" "$acl_cv_prog_gnu_ld" >&6; }
 with_gnu_ld=$acl_cv_prog_gnu_ld
 
 
 
 
-                                                { $as_echo "$as_me:${as_lineno-$LINENO}: checking for shared library run path origin" >&5
-$as_echo_n "checking for shared library run path origin... " >&6; }
-if ${acl_cv_rpath+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+
+
+                                                { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for shared library run path origin" >&5
+printf %s "checking for shared library run path origin... " >&6; }
+if test ${acl_cv_rpath+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
     CC="$CC" GCC="$GCC" LDFLAGS="$LDFLAGS" LD="$LD" with_gnu_ld="$with_gnu_ld" \
     ${CONFIG_SHELL-/bin/sh} "$ac_aux_dir/config.rpath" "$host" > conftest.sh
@@ -6733,8 +7407,8 @@ else
     acl_cv_rpath=done
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $acl_cv_rpath" >&5
-$as_echo "$acl_cv_rpath" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $acl_cv_rpath" >&5
+printf "%s\n" "$acl_cv_rpath" >&6; }
   wl="$acl_cv_wl"
   acl_libext="$acl_cv_libext"
   acl_shlibext="$acl_cv_shlibext"
@@ -6745,9 +7419,10 @@ $as_echo "$acl_cv_rpath" >&6; }
   acl_hardcode_direct="$acl_cv_hardcode_direct"
   acl_hardcode_minus_L="$acl_cv_hardcode_minus_L"
     # Check whether --enable-rpath was given.
-if test "${enable_rpath+set}" = set; then :
+if test ${enable_rpath+y}
+then :
   enableval=$enable_rpath; :
-else
+else $as_nop
   enable_rpath=yes
 fi
 
@@ -6779,39 +7454,40 @@ fi
   LIBMULTITHREAD=
   LTLIBMULTITHREAD=
   if test "$gl_use_threads" != no; then
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether imported symbols can be declared weak" >&5
-$as_echo_n "checking whether imported symbols can be declared weak... " >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether imported symbols can be declared weak" >&5
+printf %s "checking whether imported symbols can be declared weak... " >&6; }
     gl_have_weak=no
     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 extern void xyzzy ();
 #pragma weak xyzzy
 int
-main ()
+main (void)
 {
 xyzzy();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   gl_have_weak=yes
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_have_weak" >&5
-$as_echo "$gl_have_weak" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gl_have_weak" >&5
+printf "%s\n" "$gl_have_weak" >&6; }
     if test "$gl_use_threads" = yes || test "$gl_use_threads" = posix; then
       # On OSF/1, the compiler needs the flag -pthread or -D_REENTRANT so that
       # it groks <pthread.h>. It's added above, in gl_LOCK_EARLY_BODY.
-      ac_fn_c_check_header_mongrel "$LINENO" "pthread.h" "ac_cv_header_pthread_h" "$ac_includes_default"
-if test "x$ac_cv_header_pthread_h" = xyes; then :
+      ac_fn_c_check_header_compile "$LINENO" "pthread.h" "ac_cv_header_pthread_h" "$ac_includes_default"
+if test "x$ac_cv_header_pthread_h" = xyes
+then :
   gl_have_pthread_h=yes
-else
+else $as_nop
   gl_have_pthread_h=no
 fi
 
-
       if test "$gl_have_pthread_h" = yes; then
         # Other possible tests:
         #   -lpthreads (FSU threads, PCthreads)
@@ -6824,7 +7500,7 @@ fi
 /* end confdefs.h.  */
 #include <pthread.h>
 int
-main ()
+main (void)
 {
 pthread_mutex_lock((pthread_mutex_t*)0);
            pthread_mutexattr_init((pthread_mutexattr_t*)0);
@@ -6832,21 +7508,23 @@ pthread_mutex_lock((pthread_mutex_t*)0);
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   gl_have_pthread=yes
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
         # Test for libpthread by looking for pthread_kill. (Not pthread_self,
         # since it is defined as a macro on OSF/1.)
         if test -n "$gl_have_pthread"; then
           # The program links fine without libpthread. But it may actually
           # need to link with libpthread in order to create multiple threads.
-          { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -lpthread" >&5
-$as_echo_n "checking for pthread_kill in -lpthread... " >&6; }
-if ${ac_cv_lib_pthread_pthread_kill+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+          { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -lpthread" >&5
+printf %s "checking for pthread_kill in -lpthread... " >&6; }
+if test ${ac_cv_lib_pthread_pthread_kill+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lpthread  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -6855,30 +7533,29 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char pthread_kill ();
 int
-main ()
+main (void)
 {
 return pthread_kill ();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_pthread_pthread_kill=yes
-else
+else $as_nop
   ac_cv_lib_pthread_pthread_kill=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_kill" >&5
-$as_echo "$ac_cv_lib_pthread_pthread_kill" >&6; }
-if test "x$ac_cv_lib_pthread_pthread_kill" = xyes; then :
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_kill" >&5
+printf "%s\n" "$ac_cv_lib_pthread_pthread_kill" >&6; }
+if test "x$ac_cv_lib_pthread_pthread_kill" = xyes
+then :
   LIBMULTITHREAD=-lpthread LTLIBMULTITHREAD=-lpthread
              # On Solaris and HP-UX, most pthread functions exist also in libc.
              # Therefore pthread_in_use() needs to actually try to create a
@@ -6887,7 +7564,7 @@ if test "x$ac_cv_lib_pthread_pthread_kill" = xyes; then :
              case "$host_os" in
                solaris* | hpux*)
 
-$as_echo "#define PTHREAD_IN_USE_DETECTION_HARD 1" >>confdefs.h
+printf "%s\n" "#define PTHREAD_IN_USE_DETECTION_HARD 1" >>confdefs.h
 
              esac
 
@@ -6895,11 +7572,12 @@ fi
 
         else
           # Some library is needed. Try libpthread and libc_r.
-          { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -lpthread" >&5
-$as_echo_n "checking for pthread_kill in -lpthread... " >&6; }
-if ${ac_cv_lib_pthread_pthread_kill+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+          { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -lpthread" >&5
+printf %s "checking for pthread_kill in -lpthread... " >&6; }
+if test ${ac_cv_lib_pthread_pthread_kill+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lpthread  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -6908,30 +7586,29 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char pthread_kill ();
 int
-main ()
+main (void)
 {
 return pthread_kill ();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_pthread_pthread_kill=yes
-else
+else $as_nop
   ac_cv_lib_pthread_pthread_kill=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_kill" >&5
-$as_echo "$ac_cv_lib_pthread_pthread_kill" >&6; }
-if test "x$ac_cv_lib_pthread_pthread_kill" = xyes; then :
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_kill" >&5
+printf "%s\n" "$ac_cv_lib_pthread_pthread_kill" >&6; }
+if test "x$ac_cv_lib_pthread_pthread_kill" = xyes
+then :
   gl_have_pthread=yes
              LIBTHREAD=-lpthread LTLIBTHREAD=-lpthread
              LIBMULTITHREAD=-lpthread LTLIBMULTITHREAD=-lpthread
@@ -6939,11 +7616,12 @@ fi
 
           if test -z "$gl_have_pthread"; then
             # For FreeBSD 4.
-            { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -lc_r" >&5
-$as_echo_n "checking for pthread_kill in -lc_r... " >&6; }
-if ${ac_cv_lib_c_r_pthread_kill+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+            { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for pthread_kill in -lc_r" >&5
+printf %s "checking for pthread_kill in -lc_r... " >&6; }
+if test ${ac_cv_lib_c_r_pthread_kill+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lc_r  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -6952,30 +7630,29 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
 char pthread_kill ();
 int
-main ()
+main (void)
 {
 return pthread_kill ();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   ac_cv_lib_c_r_pthread_kill=yes
-else
+else $as_nop
   ac_cv_lib_c_r_pthread_kill=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_c_r_pthread_kill" >&5
-$as_echo "$ac_cv_lib_c_r_pthread_kill" >&6; }
-if test "x$ac_cv_lib_c_r_pthread_kill" = xyes; then :
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_c_r_pthread_kill" >&5
+printf "%s\n" "$ac_cv_lib_c_r_pthread_kill" >&6; }
+if test "x$ac_cv_lib_c_r_pthread_kill" = xyes
+then :
   gl_have_pthread=yes
                LIBTHREAD=-lc_r LTLIBTHREAD=-lc_r
                LIBMULTITHREAD=-lc_r LTLIBMULTITHREAD=-lc_r
@@ -6986,12 +7663,12 @@ fi
         if test -n "$gl_have_pthread"; then
           gl_threads_api=posix
 
-$as_echo "#define USE_POSIX_THREADS 1" >>confdefs.h
+printf "%s\n" "#define USE_POSIX_THREADS 1" >>confdefs.h
 
           if test -n "$LIBMULTITHREAD" || test -n "$LTLIBMULTITHREAD"; then
             if test $gl_have_weak = yes; then
 
-$as_echo "#define USE_POSIX_THREADS_WEAK 1" >>confdefs.h
+printf "%s\n" "#define USE_POSIX_THREADS_WEAK 1" >>confdefs.h
 
               LIBTHREAD=
               LTLIBTHREAD=
@@ -7001,9 +7678,10 @@ $as_echo "#define USE_POSIX_THREADS_WEAK 1" >>confdefs.h
           # pthread_rwlock_* functions.
           ac_fn_c_check_type "$LINENO" "pthread_rwlock_t" "ac_cv_type_pthread_rwlock_t" "#include <pthread.h>
 "
-if test "x$ac_cv_type_pthread_rwlock_t" = xyes; then :
+if test "x$ac_cv_type_pthread_rwlock_t" = xyes
+then :
 
-$as_echo "#define HAVE_PTHREAD_RWLOCK 1" >>confdefs.h
+printf "%s\n" "#define HAVE_PTHREAD_RWLOCK 1" >>confdefs.h
 
 fi
 
@@ -7012,7 +7690,7 @@ fi
 /* end confdefs.h.  */
 #include <pthread.h>
 int
-main ()
+main (void)
 {
 #if __FreeBSD__ == 4
 error "No, in FreeBSD 4.0 recursive mutexes actually don't work."
@@ -7024,12 +7702,13 @@ return !x;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
 
-$as_echo "#define HAVE_PTHREAD_MUTEX_RECURSIVE 1" >>confdefs.h
+printf "%s\n" "#define HAVE_PTHREAD_MUTEX_RECURSIVE 1" >>confdefs.h
 
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
         fi
       fi
     fi
@@ -7043,17 +7722,18 @@ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 #include <thread.h>
 #include <synch.h>
 int
-main ()
+main (void)
 {
 thr_self();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   gl_have_solaristhread=yes
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
         LIBS="$gl_save_LIBS"
         if test -n "$gl_have_solaristhread"; then
@@ -7063,11 +7743,11 @@ rm -f core conftest.err conftest.$ac_objext \
           LIBMULTITHREAD="$LIBTHREAD"
           LTLIBMULTITHREAD="$LTLIBTHREAD"
 
-$as_echo "#define USE_SOLARIS_THREADS 1" >>confdefs.h
+printf "%s\n" "#define USE_SOLARIS_THREADS 1" >>confdefs.h
 
           if test $gl_have_weak = yes; then
 
-$as_echo "#define USE_SOLARIS_THREADS_WEAK 1" >>confdefs.h
+printf "%s\n" "#define USE_SOLARIS_THREADS_WEAK 1" >>confdefs.h
 
             LIBTHREAD=
             LTLIBTHREAD=
@@ -7082,11 +7762,12 @@ $as_echo "#define USE_SOLARIS_THREADS_WEAK 1" >>confdefs.h
 
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to link with libpth" >&5
-$as_echo_n "checking how to link with libpth... " >&6; }
-if ${ac_cv_libpth_libs+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to link with libpth" >&5
+printf %s "checking how to link with libpth... " >&6; }
+if test ${ac_cv_libpth_libs+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
 
 
@@ -7107,7 +7788,8 @@ else
 
 
 # Check whether --with-libpth-prefix was given.
-if test "${with_libpth_prefix+set}" = set; then :
+if test ${with_libpth_prefix+y}
+then :
   withval=$with_libpth_prefix;
     if test "X$withval" = "Xno"; then
       use_additional=no
@@ -7529,8 +8211,8 @@ fi
     ac_cv_libpth_prefix="$LIBPTH_PREFIX"
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_libpth_libs" >&5
-$as_echo "$ac_cv_libpth_libs" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_libpth_libs" >&5
+printf "%s\n" "$ac_cv_libpth_libs" >&6; }
   LIBPTH="$ac_cv_libpth_libs"
   LTLIBPTH="$ac_cv_libpth_ltlibs"
   INCPTH="$ac_cv_libpth_cppflags"
@@ -7572,17 +8254,18 @@ $as_echo "$ac_cv_libpth_libs" >&6; }
 /* end confdefs.h.  */
 #include <pth.h>
 int
-main ()
+main (void)
 {
 pth_self();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   gl_have_pth=yes
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
       LIBS="$gl_save_LIBS"
       if test -n "$gl_have_pth"; then
@@ -7592,12 +8275,12 @@ rm -f core conftest.err conftest.$ac_objext \
         LIBMULTITHREAD="$LIBTHREAD"
         LTLIBMULTITHREAD="$LTLIBTHREAD"
 
-$as_echo "#define USE_PTH_THREADS 1" >>confdefs.h
+printf "%s\n" "#define USE_PTH_THREADS 1" >>confdefs.h
 
         if test -n "$LIBMULTITHREAD" || test -n "$LTLIBMULTITHREAD"; then
           if test $gl_have_weak = yes; then
 
-$as_echo "#define USE_PTH_THREADS_WEAK 1" >>confdefs.h
+printf "%s\n" "#define USE_PTH_THREADS_WEAK 1" >>confdefs.h
 
             LIBTHREAD=
             LTLIBTHREAD=
@@ -7616,16 +8299,16 @@ $as_echo "#define USE_PTH_THREADS_WEAK 1" >>confdefs.h
            }; then
           gl_threads_api=win32
 
-$as_echo "#define USE_WIN32_THREADS 1" >>confdefs.h
+printf "%s\n" "#define USE_WIN32_THREADS 1" >>confdefs.h
 
         fi
       fi
     fi
   fi
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for multithread API to use" >&5
-$as_echo_n "checking for multithread API to use... " >&6; }
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_threads_api" >&5
-$as_echo "$gl_threads_api" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for multithread API to use" >&5
+printf %s "checking for multithread API to use... " >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gl_threads_api" >&5
+printf "%s\n" "$gl_threads_api" >&6; }
 
 
 
@@ -7661,7 +8344,8 @@ $as_echo "$gl_threads_api" >&6; }
 
 
 # Check whether --with-libiconv-prefix was given.
-if test "${with_libiconv_prefix+set}" = set; then :
+if test ${with_libiconv_prefix+y}
+then :
   withval=$with_libiconv_prefix;
     if test "X$withval" = "Xno"; then
       use_additional=no
@@ -8085,60 +8769,163 @@ fi
 /* end confdefs.h.  */
 int foo (int a) { a = __builtin_expect (a, 10); return a == 10 ? 0 : 1; }
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
 
-$as_echo "#define HAVE_BUILTIN_EXPECT 1" >>confdefs.h
+printf "%s\n" "#define HAVE_BUILTIN_EXPECT 1" >>confdefs.h
 
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 
-  for ac_header in argz.h inttypes.h limits.h unistd.h sys/param.h
-do :
-  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
-ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
+  ac_fn_c_check_header_compile "$LINENO" "argz.h" "ac_cv_header_argz_h" "$ac_includes_default"
+if test "x$ac_cv_header_argz_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_ARGZ_H 1" >>confdefs.h
 
 fi
+ac_fn_c_check_header_compile "$LINENO" "inttypes.h" "ac_cv_header_inttypes_h" "$ac_includes_default"
+if test "x$ac_cv_header_inttypes_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_INTTYPES_H 1" >>confdefs.h
 
-done
+fi
+ac_fn_c_check_header_compile "$LINENO" "limits.h" "ac_cv_header_limits_h" "$ac_includes_default"
+if test "x$ac_cv_header_limits_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_LIMITS_H 1" >>confdefs.h
 
-  for ac_func in getcwd getegid geteuid getgid getuid mempcpy munmap \
-    stpcpy strcasecmp strdup strtoul tsearch argz_count argz_stringify \
-    argz_next __fsetlocking
-do :
-  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
-ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
-_ACEOF
+fi
+ac_fn_c_check_header_compile "$LINENO" "unistd.h" "ac_cv_header_unistd_h" "$ac_includes_default"
+if test "x$ac_cv_header_unistd_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_UNISTD_H 1" >>confdefs.h
 
 fi
-done
+ac_fn_c_check_header_compile "$LINENO" "sys/param.h" "ac_cv_header_sys_param_h" "$ac_includes_default"
+if test "x$ac_cv_header_sys_param_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_SYS_PARAM_H 1" >>confdefs.h
 
+fi
 
+  ac_fn_c_check_func "$LINENO" "getcwd" "ac_cv_func_getcwd"
+if test "x$ac_cv_func_getcwd" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETCWD 1" >>confdefs.h
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether feof_unlocked is declared" >&5
-$as_echo_n "checking whether feof_unlocked is declared... " >&6; }
-if ${ac_cv_have_decl_feof_unlocked+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+fi
+ac_fn_c_check_func "$LINENO" "getegid" "ac_cv_func_getegid"
+if test "x$ac_cv_func_getegid" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETEGID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "geteuid" "ac_cv_func_geteuid"
+if test "x$ac_cv_func_geteuid" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETEUID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "getgid" "ac_cv_func_getgid"
+if test "x$ac_cv_func_getgid" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETGID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "getuid" "ac_cv_func_getuid"
+if test "x$ac_cv_func_getuid" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETUID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "mempcpy" "ac_cv_func_mempcpy"
+if test "x$ac_cv_func_mempcpy" = xyes
+then :
+  printf "%s\n" "#define HAVE_MEMPCPY 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "munmap" "ac_cv_func_munmap"
+if test "x$ac_cv_func_munmap" = xyes
+then :
+  printf "%s\n" "#define HAVE_MUNMAP 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "stpcpy" "ac_cv_func_stpcpy"
+if test "x$ac_cv_func_stpcpy" = xyes
+then :
+  printf "%s\n" "#define HAVE_STPCPY 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "strcasecmp" "ac_cv_func_strcasecmp"
+if test "x$ac_cv_func_strcasecmp" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRCASECMP 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "strdup" "ac_cv_func_strdup"
+if test "x$ac_cv_func_strdup" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRDUP 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "strtoul" "ac_cv_func_strtoul"
+if test "x$ac_cv_func_strtoul" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRTOUL 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "tsearch" "ac_cv_func_tsearch"
+if test "x$ac_cv_func_tsearch" = xyes
+then :
+  printf "%s\n" "#define HAVE_TSEARCH 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "argz_count" "ac_cv_func_argz_count"
+if test "x$ac_cv_func_argz_count" = xyes
+then :
+  printf "%s\n" "#define HAVE_ARGZ_COUNT 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "argz_stringify" "ac_cv_func_argz_stringify"
+if test "x$ac_cv_func_argz_stringify" = xyes
+then :
+  printf "%s\n" "#define HAVE_ARGZ_STRINGIFY 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "argz_next" "ac_cv_func_argz_next"
+if test "x$ac_cv_func_argz_next" = xyes
+then :
+  printf "%s\n" "#define HAVE_ARGZ_NEXT 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "__fsetlocking" "ac_cv_func___fsetlocking"
+if test "x$ac_cv_func___fsetlocking" = xyes
+then :
+  printf "%s\n" "#define HAVE___FSETLOCKING 1" >>confdefs.h
+
+fi
+
+
+
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether feof_unlocked is declared" >&5
+printf %s "checking whether feof_unlocked is declared... " >&6; }
+if test ${ac_cv_have_decl_feof_unlocked+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <stdio.h>
 int
-main ()
+main (void)
 {
 
 #ifndef feof_unlocked
@@ -8149,37 +8936,37 @@ main ()
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_have_decl_feof_unlocked=yes
-else
+else $as_nop
   ac_cv_have_decl_feof_unlocked=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl_feof_unlocked" >&5
-$as_echo "$ac_cv_have_decl_feof_unlocked" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl_feof_unlocked" >&5
+printf "%s\n" "$ac_cv_have_decl_feof_unlocked" >&6; }
   if test $ac_cv_have_decl_feof_unlocked = yes; then
     gt_value=1
   else
     gt_value=0
   fi
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL_FEOF_UNLOCKED $gt_value
-_ACEOF
+printf "%s\n" "#define HAVE_DECL_FEOF_UNLOCKED $gt_value" >>confdefs.h
 
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether fgets_unlocked is declared" >&5
-$as_echo_n "checking whether fgets_unlocked is declared... " >&6; }
-if ${ac_cv_have_decl_fgets_unlocked+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether fgets_unlocked is declared" >&5
+printf %s "checking whether fgets_unlocked is declared... " >&6; }
+if test ${ac_cv_have_decl_fgets_unlocked+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <stdio.h>
 int
-main ()
+main (void)
 {
 
 #ifndef fgets_unlocked
@@ -8190,24 +8977,23 @@ main ()
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_have_decl_fgets_unlocked=yes
-else
+else $as_nop
   ac_cv_have_decl_fgets_unlocked=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl_fgets_unlocked" >&5
-$as_echo "$ac_cv_have_decl_fgets_unlocked" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl_fgets_unlocked" >&5
+printf "%s\n" "$ac_cv_have_decl_fgets_unlocked" >&6; }
   if test $ac_cv_have_decl_fgets_unlocked = yes; then
     gt_value=1
   else
     gt_value=0
   fi
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL_FGETS_UNLOCKED $gt_value
-_ACEOF
+printf "%s\n" "#define HAVE_DECL_FGETS_UNLOCKED $gt_value" >>confdefs.h
 
 
 
@@ -8241,11 +9027,12 @@ _ACEOF
   done
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for iconv" >&5
-$as_echo_n "checking for iconv... " >&6; }
-if ${am_cv_func_iconv+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for iconv" >&5
+printf %s "checking for iconv... " >&6; }
+if test ${am_cv_func_iconv+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
     am_cv_func_iconv="no, consider installing GNU libiconv"
     am_cv_lib_iconv=no
@@ -8254,7 +9041,7 @@ else
 #include <stdlib.h>
 #include <iconv.h>
 int
-main ()
+main (void)
 {
 iconv_t cd = iconv_open("","");
        iconv(cd,NULL,NULL,NULL,NULL);
@@ -8263,10 +9050,11 @@ iconv_t cd = iconv_open("","");
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   am_cv_func_iconv=yes
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
     if test "$am_cv_func_iconv" != yes; then
       am_save_LIBS="$LIBS"
@@ -8276,7 +9064,7 @@ rm -f core conftest.err conftest.$ac_objext \
 #include <stdlib.h>
 #include <iconv.h>
 int
-main ()
+main (void)
 {
 iconv_t cd = iconv_open("","");
          iconv(cd,NULL,NULL,NULL,NULL);
@@ -8285,35 +9073,38 @@ iconv_t cd = iconv_open("","");
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   am_cv_lib_iconv=yes
         am_cv_func_iconv=yes
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
       LIBS="$am_save_LIBS"
     fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_func_iconv" >&5
-$as_echo "$am_cv_func_iconv" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $am_cv_func_iconv" >&5
+printf "%s\n" "$am_cv_func_iconv" >&6; }
   if test "$am_cv_func_iconv" = yes; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working iconv" >&5
-$as_echo_n "checking for working iconv... " >&6; }
-if ${am_cv_func_iconv_works+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for working iconv" >&5
+printf %s "checking for working iconv... " >&6; }
+if test ${am_cv_func_iconv_works+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
             am_save_LIBS="$LIBS"
       if test $am_cv_lib_iconv = yes; then
         LIBS="$LIBS $LIBICONV"
       fi
-      if test "$cross_compiling" = yes; then :
+      if test "$cross_compiling" = yes
+then :
   case "$host_os" in
            aix* | hpux*) am_cv_func_iconv_works="guessing no" ;;
            *)            am_cv_func_iconv_works="guessing yes" ;;
          esac
-else
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -8374,9 +9165,10 @@ int main ()
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   am_cv_func_iconv_works=yes
-else
+else $as_nop
   am_cv_func_iconv_works=no
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -8386,8 +9178,8 @@ fi
       LIBS="$am_save_LIBS"
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_func_iconv_works" >&5
-$as_echo "$am_cv_func_iconv_works" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $am_cv_func_iconv_works" >&5
+printf "%s\n" "$am_cv_func_iconv_works" >&6; }
     case "$am_cv_func_iconv_works" in
       *no) am_func_iconv=no am_cv_lib_iconv=no ;;
       *)   am_func_iconv=yes ;;
@@ -8397,14 +9189,14 @@ $as_echo "$am_cv_func_iconv_works" >&6; }
   fi
   if test "$am_func_iconv" = yes; then
 
-$as_echo "#define HAVE_ICONV 1" >>confdefs.h
+printf "%s\n" "#define HAVE_ICONV 1" >>confdefs.h
 
   fi
   if test "$am_cv_lib_iconv" = yes; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to link with libiconv" >&5
-$as_echo_n "checking how to link with libiconv... " >&6; }
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LIBICONV" >&5
-$as_echo "$LIBICONV" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to link with libiconv" >&5
+printf %s "checking how to link with libiconv... " >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $LIBICONV" >&5
+printf "%s\n" "$LIBICONV" >&6; }
   else
             CPPFLAGS="$am_save_CPPFLAGS"
     LIBICONV=
@@ -8414,11 +9206,12 @@ $as_echo "$LIBICONV" >&6; }
 
 
   if test "$am_cv_func_iconv" = yes; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for iconv declaration" >&5
-$as_echo_n "checking for iconv declaration... " >&6; }
-    if ${am_cv_proto_iconv+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for iconv declaration" >&5
+printf %s "checking for iconv declaration... " >&6; }
+    if test ${am_cv_proto_iconv+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -8436,46 +9229,46 @@ size_t iconv();
 #endif
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   am_cv_proto_iconv_arg1=""
-else
+else $as_nop
   am_cv_proto_iconv_arg1="const"
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
       am_cv_proto_iconv="extern size_t iconv (iconv_t cd, $am_cv_proto_iconv_arg1 char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);"
 fi
 
     am_cv_proto_iconv=`echo "$am_cv_proto_iconv" | tr -s ' ' | sed -e 's/( /(/'`
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${ac_t:-
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: ${ac_t:-
          }$am_cv_proto_iconv" >&5
-$as_echo "${ac_t:-
+printf "%s\n" "${ac_t:-
          }$am_cv_proto_iconv" >&6; }
 
-cat >>confdefs.h <<_ACEOF
-#define ICONV_CONST $am_cv_proto_iconv_arg1
-_ACEOF
+printf "%s\n" "#define ICONV_CONST $am_cv_proto_iconv_arg1" >>confdefs.h
 
   fi
 
 
-      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for NL_LOCALE_NAME macro" >&5
-$as_echo_n "checking for NL_LOCALE_NAME macro... " >&6; }
-if ${gt_cv_nl_locale_name+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for NL_LOCALE_NAME macro" >&5
+printf %s "checking for NL_LOCALE_NAME macro... " >&6; }
+if test ${gt_cv_nl_locale_name+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <langinfo.h>
 #include <locale.h>
 int
-main ()
+main (void)
 {
 char* cs = nl_langinfo(_NL_LOCALE_NAME(LC_MESSAGES));
        return !cs;
@@ -8484,20 +9277,21 @@ char* cs = nl_langinfo(_NL_LOCALE_NAME(LC_MESSAGES));
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   gt_cv_nl_locale_name=yes
-else
+else $as_nop
   gt_cv_nl_locale_name=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_nl_locale_name" >&5
-$as_echo "$gt_cv_nl_locale_name" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_nl_locale_name" >&5
+printf "%s\n" "$gt_cv_nl_locale_name" >&6; }
   if test $gt_cv_nl_locale_name = yes; then
 
-$as_echo "#define HAVE_NL_LOCALE_NAME 1" >>confdefs.h
+printf "%s\n" "#define HAVE_NL_LOCALE_NAME 1" >>confdefs.h
 
   fi
 
@@ -8505,11 +9299,12 @@ $as_echo "#define HAVE_NL_LOCALE_NAME 1" >>confdefs.h
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_INTLBISON+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_INTLBISON+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$INTLBISON"; then
   ac_cv_prog_INTLBISON="$INTLBISON" # Let the user override the test.
 else
@@ -8517,11 +9312,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_INTLBISON="$ac_prog"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -8532,11 +9331,11 @@ fi
 fi
 INTLBISON=$ac_cv_prog_INTLBISON
 if test -n "$INTLBISON"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $INTLBISON" >&5
-$as_echo "$INTLBISON" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $INTLBISON" >&5
+printf "%s\n" "$INTLBISON" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -8546,8 +9345,8 @@ done
   if test -z "$INTLBISON"; then
     ac_verc_fail=yes
   else
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking version of bison" >&5
-$as_echo_n "checking version of bison... " >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking version of bison" >&5
+printf %s "checking version of bison... " >&6; }
     ac_prog_version=`$INTLBISON --version 2>&1 | sed -n 's/^.*GNU Bison.* \([0-9]*\.[0-9.]*\).*$/\1/p'`
     case $ac_prog_version in
       '') ac_prog_version="v. ?.??, bad"; ac_verc_fail=yes;;
@@ -8555,19 +9354,20 @@ $as_echo_n "checking version of bison... " >&6; }
          ac_prog_version="$ac_prog_version, ok"; ac_verc_fail=no;;
       *) ac_prog_version="$ac_prog_version, bad"; ac_verc_fail=yes;;
     esac
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_prog_version" >&5
-$as_echo "$ac_prog_version" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_prog_version" >&5
+printf "%s\n" "$ac_prog_version" >&6; }
   fi
   if test $ac_verc_fail = yes; then
     INTLBISON=:
   fi
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for long long int" >&5
-$as_echo_n "checking for long long int... " >&6; }
-if ${ac_cv_type_long_long_int+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for long long int" >&5
+printf %s "checking for long long int... " >&6; }
+if test ${ac_cv_type_long_long_int+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -8589,7 +9389,7 @@ else
 		     ? 1 : -1)];
       int i = 63;
 int
-main ()
+main (void)
 {
 /* Test availability of runtime routines for shift and division.  */
       long long int llmax = 9223372036854775807ll;
@@ -8603,10 +9403,12 @@ main ()
 }
 
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  			if test "$cross_compiling" = yes; then :
+if ac_fn_c_try_link "$LINENO"
+then :
+  			if test "$cross_compiling" = yes
+then :
   ac_cv_type_long_long_int=yes
-else
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <limits.h>
@@ -8616,7 +9418,7 @@ else
 	       # define LLONG_MAX (HALF - 1 + HALF)
 	       #endif
 int
-main ()
+main (void)
 {
 long long int n = 1;
 	       int i;
@@ -8633,68 +9435,72 @@ long long int n = 1;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   ac_cv_type_long_long_int=yes
-else
+else $as_nop
   ac_cv_type_long_long_int=no
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
   conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
 
-else
+else $as_nop
   ac_cv_type_long_long_int=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_long_long_int" >&5
-$as_echo "$ac_cv_type_long_long_int" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_long_long_int" >&5
+printf "%s\n" "$ac_cv_type_long_long_int" >&6; }
   if test $ac_cv_type_long_long_int = yes; then
 
-$as_echo "#define HAVE_LONG_LONG_INT 1" >>confdefs.h
+printf "%s\n" "#define HAVE_LONG_LONG_INT 1" >>confdefs.h
 
   fi
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for wchar_t" >&5
-$as_echo_n "checking for wchar_t... " >&6; }
-if ${gt_cv_c_wchar_t+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for wchar_t" >&5
+printf %s "checking for wchar_t... " >&6; }
+if test ${gt_cv_c_wchar_t+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <stddef.h>
        wchar_t foo = (wchar_t)'\0';
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   gt_cv_c_wchar_t=yes
-else
+else $as_nop
   gt_cv_c_wchar_t=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_c_wchar_t" >&5
-$as_echo "$gt_cv_c_wchar_t" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_c_wchar_t" >&5
+printf "%s\n" "$gt_cv_c_wchar_t" >&6; }
   if test $gt_cv_c_wchar_t = yes; then
 
-$as_echo "#define HAVE_WCHAR_T 1" >>confdefs.h
+printf "%s\n" "#define HAVE_WCHAR_T 1" >>confdefs.h
 
   fi
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for wint_t" >&5
-$as_echo_n "checking for wint_t... " >&6; }
-if ${gt_cv_c_wint_t+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for wint_t" >&5
+printf %s "checking for wint_t... " >&6; }
+if test ${gt_cv_c_wint_t+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -8708,36 +9514,38 @@ else
 #include <wchar.h>
        wint_t foo = (wchar_t)'\0';
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   gt_cv_c_wint_t=yes
-else
+else $as_nop
   gt_cv_c_wint_t=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_c_wint_t" >&5
-$as_echo "$gt_cv_c_wint_t" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_c_wint_t" >&5
+printf "%s\n" "$gt_cv_c_wint_t" >&6; }
   if test $gt_cv_c_wint_t = yes; then
 
-$as_echo "#define HAVE_WINT_T 1" >>confdefs.h
+printf "%s\n" "#define HAVE_WINT_T 1" >>confdefs.h
 
   fi
 
 
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for intmax_t" >&5
-$as_echo_n "checking for intmax_t... " >&6; }
-if ${gt_cv_c_intmax_t+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for intmax_t" >&5
+printf %s "checking for intmax_t... " >&6; }
+if test ${gt_cv_c_intmax_t+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -8751,7 +9559,7 @@ else
 #endif
 
 int
-main ()
+main (void)
 {
 intmax_t x = -1;
         return !x;
@@ -8759,30 +9567,33 @@ intmax_t x = -1;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   gt_cv_c_intmax_t=yes
-else
+else $as_nop
   gt_cv_c_intmax_t=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_c_intmax_t" >&5
-$as_echo "$gt_cv_c_intmax_t" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_c_intmax_t" >&5
+printf "%s\n" "$gt_cv_c_intmax_t" >&6; }
   if test $gt_cv_c_intmax_t = yes; then
 
-$as_echo "#define HAVE_INTMAX_T 1" >>confdefs.h
+printf "%s\n" "#define HAVE_INTMAX_T 1" >>confdefs.h
 
   fi
 
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether printf() supports POSIX/XSI format strings" >&5
-$as_echo_n "checking whether printf() supports POSIX/XSI format strings... " >&6; }
-if ${gt_cv_func_printf_posix+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether printf() supports POSIX/XSI format strings" >&5
+printf %s "checking whether printf() supports POSIX/XSI format strings... " >&6; }
+if test ${gt_cv_func_printf_posix+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
-      if test "$cross_compiling" = yes; then :
+      if test "$cross_compiling" = yes
+then :
 
         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -8793,15 +9604,16 @@ else
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "notposix" >/dev/null 2>&1; then :
+  $EGREP "notposix" >/dev/null 2>&1
+then :
   gt_cv_func_printf_posix="guessing no"
-else
+else $as_nop
   gt_cv_func_printf_posix="guessing yes"
 fi
-rm -f conftest*
+rm -rf conftest*
 
 
-else
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -8817,9 +9629,10 @@ int main ()
   return (strcmp (buf, "55 33") != 0);
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   gt_cv_func_printf_posix=yes
-else
+else $as_nop
   gt_cv_func_printf_posix=no
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -8828,22 +9641,23 @@ fi
 
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_printf_posix" >&5
-$as_echo "$gt_cv_func_printf_posix" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_printf_posix" >&5
+printf "%s\n" "$gt_cv_func_printf_posix" >&6; }
   case $gt_cv_func_printf_posix in
     *yes)
 
-$as_echo "#define HAVE_POSIX_PRINTF 1" >>confdefs.h
+printf "%s\n" "#define HAVE_POSIX_PRINTF 1" >>confdefs.h
 
       ;;
   esac
 
 
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C Library 2.1 or newer" >&5
-$as_echo_n "checking whether we are using the GNU C Library 2.1 or newer... " >&6; }
-if ${ac_cv_gnu_library_2_1+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C Library 2.1 or newer" >&5
+printf %s "checking whether we are using the GNU C Library 2.1 or newer... " >&6; }
+if test ${ac_cv_gnu_library_2_1+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -8856,40 +9670,37 @@ else
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "Lucky GNU user" >/dev/null 2>&1; then :
+  $EGREP "Lucky GNU user" >/dev/null 2>&1
+then :
   ac_cv_gnu_library_2_1=yes
-else
+else $as_nop
   ac_cv_gnu_library_2_1=no
 fi
-rm -f conftest*
+rm -rf conftest*
 
 
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gnu_library_2_1" >&5
-$as_echo "$ac_cv_gnu_library_2_1" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_gnu_library_2_1" >&5
+printf "%s\n" "$ac_cv_gnu_library_2_1" >&6; }
 
     GLIBC21="$ac_cv_gnu_library_2_1"
 
 
 
-  for ac_header in stdint.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "stdint.h" "ac_cv_header_stdint_h" "$ac_includes_default"
-if test "x$ac_cv_header_stdint_h" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_STDINT_H 1
-_ACEOF
+  ac_fn_c_check_header_compile "$LINENO" "stdint.h" "ac_cv_header_stdint_h" "$ac_includes_default"
+if test "x$ac_cv_header_stdint_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STDINT_H 1" >>confdefs.h
 
 fi
 
-done
-
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SIZE_MAX" >&5
-$as_echo_n "checking for SIZE_MAX... " >&6; }
-  if ${gl_cv_size_max+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for SIZE_MAX" >&5
+printf %s "checking for SIZE_MAX... " >&6; }
+  if test ${gl_cv_size_max+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
 
     gl_cv_size_max=
     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -8905,22 +9716,25 @@ Found it
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "Found it" >/dev/null 2>&1; then :
+  $EGREP "Found it" >/dev/null 2>&1
+then :
   gl_cv_size_max=yes
 fi
-rm -f conftest*
+rm -rf conftest*
 
     if test -z "$gl_cv_size_max"; then
                         if ac_fn_c_compute_int "$LINENO" "sizeof (size_t) * CHAR_BIT - 1" "size_t_bits_minus_1"        "#include <stddef.h>
-#include <limits.h>"; then :
+#include <limits.h>"
+then :
 
-else
+else $as_nop
   size_t_bits_minus_1=
 fi
 
-      if ac_fn_c_compute_int "$LINENO" "sizeof (size_t) <= sizeof (unsigned int)" "fits_in_uint"        "#include <stddef.h>"; then :
+      if ac_fn_c_compute_int "$LINENO" "sizeof (size_t) <= sizeof (unsigned int)" "fits_in_uint"        "#include <stddef.h>"
+then :
 
-else
+else $as_nop
   fits_in_uint=
 fi
 
@@ -8933,17 +9747,18 @@ fi
             extern unsigned long foo;
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   fits_in_uint=0
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
         fi
                                 if test $fits_in_uint = 1; then
           gl_cv_size_max="(((1U << $size_t_bits_minus_1) - 1) * 2 + 1)"
@@ -8957,99 +9772,96 @@ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 fi
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $gl_cv_size_max" >&5
-$as_echo "$gl_cv_size_max" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gl_cv_size_max" >&5
+printf "%s\n" "$gl_cv_size_max" >&6; }
   if test "$gl_cv_size_max" != yes; then
 
-cat >>confdefs.h <<_ACEOF
-#define SIZE_MAX $gl_cv_size_max
-_ACEOF
+printf "%s\n" "#define SIZE_MAX $gl_cv_size_max" >>confdefs.h
 
   fi
 
 
 
 
-  for ac_header in stdint.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "stdint.h" "ac_cv_header_stdint_h" "$ac_includes_default"
-if test "x$ac_cv_header_stdint_h" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_STDINT_H 1
-_ACEOF
+  ac_fn_c_check_header_compile "$LINENO" "stdint.h" "ac_cv_header_stdint_h" "$ac_includes_default"
+if test "x$ac_cv_header_stdint_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STDINT_H 1" >>confdefs.h
 
 fi
 
-done
-
 
 
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CFPreferencesCopyAppValue" >&5
-$as_echo_n "checking for CFPreferencesCopyAppValue... " >&6; }
-if ${gt_cv_func_CFPreferencesCopyAppValue+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for CFPreferencesCopyAppValue" >&5
+printf %s "checking for CFPreferencesCopyAppValue... " >&6; }
+if test ${gt_cv_func_CFPreferencesCopyAppValue+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   gt_save_LIBS="$LIBS"
      LIBS="$LIBS -Wl,-framework -Wl,CoreFoundation"
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <CoreFoundation/CFPreferences.h>
 int
-main ()
+main (void)
 {
 CFPreferencesCopyAppValue(NULL, NULL)
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   gt_cv_func_CFPreferencesCopyAppValue=yes
-else
+else $as_nop
   gt_cv_func_CFPreferencesCopyAppValue=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
      LIBS="$gt_save_LIBS"
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFPreferencesCopyAppValue" >&5
-$as_echo "$gt_cv_func_CFPreferencesCopyAppValue" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFPreferencesCopyAppValue" >&5
+printf "%s\n" "$gt_cv_func_CFPreferencesCopyAppValue" >&6; }
   if test $gt_cv_func_CFPreferencesCopyAppValue = yes; then
 
-$as_echo "#define HAVE_CFPREFERENCESCOPYAPPVALUE 1" >>confdefs.h
+printf "%s\n" "#define HAVE_CFPREFERENCESCOPYAPPVALUE 1" >>confdefs.h
 
   fi
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CFLocaleCopyCurrent" >&5
-$as_echo_n "checking for CFLocaleCopyCurrent... " >&6; }
-if ${gt_cv_func_CFLocaleCopyCurrent+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for CFLocaleCopyCurrent" >&5
+printf %s "checking for CFLocaleCopyCurrent... " >&6; }
+if test ${gt_cv_func_CFLocaleCopyCurrent+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   gt_save_LIBS="$LIBS"
      LIBS="$LIBS -Wl,-framework -Wl,CoreFoundation"
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <CoreFoundation/CFLocale.h>
 int
-main ()
+main (void)
 {
 CFLocaleCopyCurrent();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   gt_cv_func_CFLocaleCopyCurrent=yes
-else
+else $as_nop
   gt_cv_func_CFLocaleCopyCurrent=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
      LIBS="$gt_save_LIBS"
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFLocaleCopyCurrent" >&5
-$as_echo "$gt_cv_func_CFLocaleCopyCurrent" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFLocaleCopyCurrent" >&5
+printf "%s\n" "$gt_cv_func_CFLocaleCopyCurrent" >&6; }
   if test $gt_cv_func_CFLocaleCopyCurrent = yes; then
 
-$as_echo "#define HAVE_CFLOCALECOPYCURRENT 1" >>confdefs.h
+printf "%s\n" "#define HAVE_CFLOCALECOPYCURRENT 1" >>confdefs.h
 
   fi
   INTL_MACOSX_LIBS=
@@ -9064,52 +9876,91 @@ $as_echo "#define HAVE_CFLOCALECOPYCURRENT 1" >>confdefs.h
 
 
   ac_fn_c_check_type "$LINENO" "ptrdiff_t" "ac_cv_type_ptrdiff_t" "$ac_includes_default"
-if test "x$ac_cv_type_ptrdiff_t" = xyes; then :
+if test "x$ac_cv_type_ptrdiff_t" = xyes
+then :
 
-else
+else $as_nop
 
-$as_echo "#define ptrdiff_t long" >>confdefs.h
+printf "%s\n" "#define ptrdiff_t long" >>confdefs.h
 
 
 fi
 
-  for ac_header in stddef.h stdlib.h string.h
-do :
-  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
-ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
+  ac_fn_c_check_header_compile "$LINENO" "stddef.h" "ac_cv_header_stddef_h" "$ac_includes_default"
+if test "x$ac_cv_header_stddef_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STDDEF_H 1" >>confdefs.h
 
 fi
+ac_fn_c_check_header_compile "$LINENO" "stdlib.h" "ac_cv_header_stdlib_h" "$ac_includes_default"
+if test "x$ac_cv_header_stdlib_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STDLIB_H 1" >>confdefs.h
 
-done
+fi
+ac_fn_c_check_header_compile "$LINENO" "string.h" "ac_cv_header_string_h" "$ac_includes_default"
+if test "x$ac_cv_header_string_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRING_H 1" >>confdefs.h
 
-  for ac_func in asprintf fwprintf putenv setenv setlocale snprintf wcslen
-do :
-  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
-ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
-_ACEOF
+fi
+
+  ac_fn_c_check_func "$LINENO" "asprintf" "ac_cv_func_asprintf"
+if test "x$ac_cv_func_asprintf" = xyes
+then :
+  printf "%s\n" "#define HAVE_ASPRINTF 1" >>confdefs.h
 
 fi
-done
+ac_fn_c_check_func "$LINENO" "fwprintf" "ac_cv_func_fwprintf"
+if test "x$ac_cv_func_fwprintf" = xyes
+then :
+  printf "%s\n" "#define HAVE_FWPRINTF 1" >>confdefs.h
 
+fi
+ac_fn_c_check_func "$LINENO" "putenv" "ac_cv_func_putenv"
+if test "x$ac_cv_func_putenv" = xyes
+then :
+  printf "%s\n" "#define HAVE_PUTENV 1" >>confdefs.h
 
+fi
+ac_fn_c_check_func "$LINENO" "setenv" "ac_cv_func_setenv"
+if test "x$ac_cv_func_setenv" = xyes
+then :
+  printf "%s\n" "#define HAVE_SETENV 1" >>confdefs.h
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether _snprintf is declared" >&5
-$as_echo_n "checking whether _snprintf is declared... " >&6; }
-if ${ac_cv_have_decl__snprintf+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+fi
+ac_fn_c_check_func "$LINENO" "setlocale" "ac_cv_func_setlocale"
+if test "x$ac_cv_func_setlocale" = xyes
+then :
+  printf "%s\n" "#define HAVE_SETLOCALE 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "snprintf" "ac_cv_func_snprintf"
+if test "x$ac_cv_func_snprintf" = xyes
+then :
+  printf "%s\n" "#define HAVE_SNPRINTF 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "wcslen" "ac_cv_func_wcslen"
+if test "x$ac_cv_func_wcslen" = xyes
+then :
+  printf "%s\n" "#define HAVE_WCSLEN 1" >>confdefs.h
+
+fi
+
+
+
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether _snprintf is declared" >&5
+printf %s "checking whether _snprintf is declared... " >&6; }
+if test ${ac_cv_have_decl__snprintf+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <stdio.h>
 int
-main ()
+main (void)
 {
 
 #ifndef _snprintf
@@ -9120,37 +9971,37 @@ main ()
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_have_decl__snprintf=yes
-else
+else $as_nop
   ac_cv_have_decl__snprintf=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl__snprintf" >&5
-$as_echo "$ac_cv_have_decl__snprintf" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl__snprintf" >&5
+printf "%s\n" "$ac_cv_have_decl__snprintf" >&6; }
   if test $ac_cv_have_decl__snprintf = yes; then
     gt_value=1
   else
     gt_value=0
   fi
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL__SNPRINTF $gt_value
-_ACEOF
+printf "%s\n" "#define HAVE_DECL__SNPRINTF $gt_value" >>confdefs.h
 
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether _snwprintf is declared" >&5
-$as_echo_n "checking whether _snwprintf is declared... " >&6; }
-if ${ac_cv_have_decl__snwprintf+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether _snwprintf is declared" >&5
+printf %s "checking whether _snwprintf is declared... " >&6; }
+if test ${ac_cv_have_decl__snwprintf+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <stdio.h>
 int
-main ()
+main (void)
 {
 
 #ifndef _snwprintf
@@ -9161,38 +10012,38 @@ main ()
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_have_decl__snwprintf=yes
-else
+else $as_nop
   ac_cv_have_decl__snwprintf=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl__snwprintf" >&5
-$as_echo "$ac_cv_have_decl__snwprintf" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl__snwprintf" >&5
+printf "%s\n" "$ac_cv_have_decl__snwprintf" >&6; }
   if test $ac_cv_have_decl__snwprintf = yes; then
     gt_value=1
   else
     gt_value=0
   fi
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL__SNWPRINTF $gt_value
-_ACEOF
+printf "%s\n" "#define HAVE_DECL__SNWPRINTF $gt_value" >>confdefs.h
 
 
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether getc_unlocked is declared" >&5
-$as_echo_n "checking whether getc_unlocked is declared... " >&6; }
-if ${ac_cv_have_decl_getc_unlocked+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether getc_unlocked is declared" >&5
+printf %s "checking whether getc_unlocked is declared... " >&6; }
+if test ${ac_cv_have_decl_getc_unlocked+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <stdio.h>
 int
-main ()
+main (void)
 {
 
 #ifndef getc_unlocked
@@ -9203,24 +10054,23 @@ main ()
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_have_decl_getc_unlocked=yes
-else
+else $as_nop
   ac_cv_have_decl_getc_unlocked=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl_getc_unlocked" >&5
-$as_echo "$ac_cv_have_decl_getc_unlocked" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_have_decl_getc_unlocked" >&5
+printf "%s\n" "$ac_cv_have_decl_getc_unlocked" >&6; }
   if test $ac_cv_have_decl_getc_unlocked = yes; then
     gt_value=1
   else
     gt_value=0
   fi
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL_GETC_UNLOCKED $gt_value
-_ACEOF
+printf "%s\n" "#define HAVE_DECL_GETC_UNLOCKED $gt_value" >>confdefs.h
 
 
 
@@ -9249,69 +10099,73 @@ _ACEOF
 
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for nl_langinfo and CODESET" >&5
-$as_echo_n "checking for nl_langinfo and CODESET... " >&6; }
-if ${am_cv_langinfo_codeset+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for nl_langinfo and CODESET" >&5
+printf %s "checking for nl_langinfo and CODESET... " >&6; }
+if test ${am_cv_langinfo_codeset+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <langinfo.h>
 int
-main ()
+main (void)
 {
 char* cs = nl_langinfo(CODESET); return !cs;
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   am_cv_langinfo_codeset=yes
-else
+else $as_nop
   am_cv_langinfo_codeset=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_langinfo_codeset" >&5
-$as_echo "$am_cv_langinfo_codeset" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $am_cv_langinfo_codeset" >&5
+printf "%s\n" "$am_cv_langinfo_codeset" >&6; }
   if test $am_cv_langinfo_codeset = yes; then
 
-$as_echo "#define HAVE_LANGINFO_CODESET 1" >>confdefs.h
+printf "%s\n" "#define HAVE_LANGINFO_CODESET 1" >>confdefs.h
 
   fi
 
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LC_MESSAGES" >&5
-$as_echo_n "checking for LC_MESSAGES... " >&6; }
-if ${gt_cv_val_LC_MESSAGES+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for LC_MESSAGES" >&5
+printf %s "checking for LC_MESSAGES... " >&6; }
+if test ${gt_cv_val_LC_MESSAGES+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <locale.h>
 int
-main ()
+main (void)
 {
 return LC_MESSAGES
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   gt_cv_val_LC_MESSAGES=yes
-else
+else $as_nop
   gt_cv_val_LC_MESSAGES=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_val_LC_MESSAGES" >&5
-$as_echo "$gt_cv_val_LC_MESSAGES" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_val_LC_MESSAGES" >&5
+printf "%s\n" "$gt_cv_val_LC_MESSAGES" >&6; }
   if test $gt_cv_val_LC_MESSAGES = yes; then
 
-$as_echo "#define HAVE_LC_MESSAGES 1" >>confdefs.h
+printf "%s\n" "#define HAVE_LC_MESSAGES 1" >>confdefs.h
 
   fi
 
@@ -9337,11 +10191,12 @@ $as_echo "#define HAVE_LC_MESSAGES 1" >>confdefs.h
         if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}windres", so it can be a program name with args.
 set dummy ${ac_tool_prefix}windres; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_WINDRES+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_WINDRES+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$WINDRES"; then
   ac_cv_prog_WINDRES="$WINDRES" # Let the user override the test.
 else
@@ -9349,11 +10204,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_WINDRES="${ac_tool_prefix}windres"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -9364,11 +10223,11 @@ fi
 fi
 WINDRES=$ac_cv_prog_WINDRES
 if test -n "$WINDRES"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $WINDRES" >&5
-$as_echo "$WINDRES" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $WINDRES" >&5
+printf "%s\n" "$WINDRES" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -9377,11 +10236,12 @@ if test -z "$ac_cv_prog_WINDRES"; then
   ac_ct_WINDRES=$WINDRES
   # Extract the first word of "windres", so it can be a program name with args.
 set dummy windres; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_ac_ct_WINDRES+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_WINDRES+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_WINDRES"; then
   ac_cv_prog_ac_ct_WINDRES="$ac_ct_WINDRES" # Let the user override the test.
 else
@@ -9389,11 +10249,15 @@ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_WINDRES="windres"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -9404,11 +10268,11 @@ fi
 fi
 ac_ct_WINDRES=$ac_cv_prog_ac_ct_WINDRES
 if test -n "$ac_ct_WINDRES"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_WINDRES" >&5
-$as_echo "$ac_ct_WINDRES" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_WINDRES" >&5
+printf "%s\n" "$ac_ct_WINDRES" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
   if test "x$ac_ct_WINDRES" = x; then
@@ -9416,8 +10280,8 @@ fi
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
-$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     WINDRES=$ac_ct_WINDRES
@@ -9458,72 +10322,76 @@ fi
 
 
 
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CFPreferencesCopyAppValue" >&5
-$as_echo_n "checking for CFPreferencesCopyAppValue... " >&6; }
-if ${gt_cv_func_CFPreferencesCopyAppValue+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for CFPreferencesCopyAppValue" >&5
+printf %s "checking for CFPreferencesCopyAppValue... " >&6; }
+if test ${gt_cv_func_CFPreferencesCopyAppValue+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   gt_save_LIBS="$LIBS"
      LIBS="$LIBS -Wl,-framework -Wl,CoreFoundation"
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <CoreFoundation/CFPreferences.h>
 int
-main ()
+main (void)
 {
 CFPreferencesCopyAppValue(NULL, NULL)
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   gt_cv_func_CFPreferencesCopyAppValue=yes
-else
+else $as_nop
   gt_cv_func_CFPreferencesCopyAppValue=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
      LIBS="$gt_save_LIBS"
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFPreferencesCopyAppValue" >&5
-$as_echo "$gt_cv_func_CFPreferencesCopyAppValue" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFPreferencesCopyAppValue" >&5
+printf "%s\n" "$gt_cv_func_CFPreferencesCopyAppValue" >&6; }
   if test $gt_cv_func_CFPreferencesCopyAppValue = yes; then
 
-$as_echo "#define HAVE_CFPREFERENCESCOPYAPPVALUE 1" >>confdefs.h
+printf "%s\n" "#define HAVE_CFPREFERENCESCOPYAPPVALUE 1" >>confdefs.h
 
   fi
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CFLocaleCopyCurrent" >&5
-$as_echo_n "checking for CFLocaleCopyCurrent... " >&6; }
-if ${gt_cv_func_CFLocaleCopyCurrent+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for CFLocaleCopyCurrent" >&5
+printf %s "checking for CFLocaleCopyCurrent... " >&6; }
+if test ${gt_cv_func_CFLocaleCopyCurrent+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   gt_save_LIBS="$LIBS"
      LIBS="$LIBS -Wl,-framework -Wl,CoreFoundation"
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <CoreFoundation/CFLocale.h>
 int
-main ()
+main (void)
 {
 CFLocaleCopyCurrent();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   gt_cv_func_CFLocaleCopyCurrent=yes
-else
+else $as_nop
   gt_cv_func_CFLocaleCopyCurrent=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
      LIBS="$gt_save_LIBS"
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFLocaleCopyCurrent" >&5
-$as_echo "$gt_cv_func_CFLocaleCopyCurrent" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_CFLocaleCopyCurrent" >&5
+printf "%s\n" "$gt_cv_func_CFLocaleCopyCurrent" >&6; }
   if test $gt_cv_func_CFLocaleCopyCurrent = yes; then
 
-$as_echo "#define HAVE_CFLOCALECOPYCURRENT 1" >>confdefs.h
+printf "%s\n" "#define HAVE_CFLOCALECOPYCURRENT 1" >>confdefs.h
 
   fi
   INTL_MACOSX_LIBS=
@@ -9554,18 +10422,19 @@ $as_echo "#define HAVE_CFLOCALECOPYCURRENT 1" >>confdefs.h
     if test "$USE_NLS" = "yes"; then
     gt_use_preinstalled_gnugettext=no
 
-      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether included gettext is requested" >&5
-$as_echo_n "checking whether included gettext is requested... " >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether included gettext is requested" >&5
+printf %s "checking whether included gettext is requested... " >&6; }
 
 # Check whether --with-included-gettext was given.
-if test "${with_included_gettext+set}" = set; then :
+if test ${with_included_gettext+y}
+then :
   withval=$with_included_gettext; nls_cv_force_use_gnu_gettext=$withval
-else
+else $as_nop
   nls_cv_force_use_gnu_gettext=no
 fi
 
-      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $nls_cv_force_use_gnu_gettext" >&5
-$as_echo "$nls_cv_force_use_gnu_gettext" >&6; }
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $nls_cv_force_use_gnu_gettext" >&5
+printf "%s\n" "$nls_cv_force_use_gnu_gettext" >&6; }
 
       nls_cv_use_gnu_gettext="$nls_cv_force_use_gnu_gettext"
       if test "$nls_cv_force_use_gnu_gettext" != "yes"; then
@@ -9587,11 +10456,12 @@ typedef int array [2 * (__GNU_GETTEXT_SUPPORTED_REVISION(0) >= 1) - 1];
           gt_expression_test_code=
         fi
 
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU gettext in libc" >&5
-$as_echo_n "checking for GNU gettext in libc... " >&6; }
-if eval \${$gt_func_gnugettext_libc+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for GNU gettext in libc" >&5
+printf %s "checking for GNU gettext in libc... " >&6; }
+if eval test \${$gt_func_gnugettext_libc+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <libintl.h>
@@ -9599,7 +10469,7 @@ $gt_revision_test_code
 extern int _nl_msg_cat_cntr;
 extern int *_nl_domain_bindings;
 int
-main ()
+main (void)
 {
 bindtextdomain ("", "");
 return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr + *_nl_domain_bindings
@@ -9607,17 +10477,18 @@ return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr + *_nl_domain_b
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$gt_func_gnugettext_libc=yes"
-else
+else $as_nop
   eval "$gt_func_gnugettext_libc=no"
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
 eval ac_res=\$$gt_func_gnugettext_libc
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
 
         if { eval "gt_val=\$$gt_func_gnugettext_libc"; test "$gt_val" != "yes"; }; then
 
@@ -9640,7 +10511,8 @@ $as_echo "$ac_res" >&6; }
 
 
 # Check whether --with-libintl-prefix was given.
-if test "${with_libintl_prefix+set}" = set; then :
+if test ${with_libintl_prefix+y}
+then :
   withval=$with_libintl_prefix;
     if test "X$withval" = "Xno"; then
       use_additional=no
@@ -10056,11 +10928,12 @@ fi
     done
   fi
 
-          { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU gettext in libintl" >&5
-$as_echo_n "checking for GNU gettext in libintl... " >&6; }
-if eval \${$gt_func_gnugettext_libintl+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+          { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for GNU gettext in libintl" >&5
+printf %s "checking for GNU gettext in libintl... " >&6; }
+if eval test \${$gt_func_gnugettext_libintl+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   gt_save_CPPFLAGS="$CPPFLAGS"
             CPPFLAGS="$CPPFLAGS $INCINTL"
             gt_save_LIBS="$LIBS"
@@ -10076,7 +10949,7 @@ extern
 #endif
 const char *_nl_expand_alias (const char *);
 int
-main ()
+main (void)
 {
 bindtextdomain ("", "");
 return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr + *_nl_expand_alias ("")
@@ -10084,12 +10957,13 @@ return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr + *_nl_expand_a
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$gt_func_gnugettext_libintl=yes"
-else
+else $as_nop
   eval "$gt_func_gnugettext_libintl=no"
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
                         if { eval "gt_val=\$$gt_func_gnugettext_libintl"; test "$gt_val" != yes; } && test -n "$LIBICONV"; then
               LIBS="$LIBS $LIBICONV"
@@ -10104,7 +10978,7 @@ extern
 #endif
 const char *_nl_expand_alias (const char *);
 int
-main ()
+main (void)
 {
 bindtextdomain ("", "");
 return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr + *_nl_expand_alias ("")
@@ -10112,21 +10986,22 @@ return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr + *_nl_expand_a
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   LIBINTL="$LIBINTL $LIBICONV"
                 LTLIBINTL="$LTLIBINTL $LTLIBICONV"
                 eval "$gt_func_gnugettext_libintl=yes"
 
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
             fi
             CPPFLAGS="$gt_save_CPPFLAGS"
             LIBS="$gt_save_LIBS"
 fi
 eval ac_res=\$$gt_func_gnugettext_libintl
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
         fi
 
                                         if { eval "gt_val=\$$gt_func_gnugettext_libc"; test "$gt_val" = "yes"; } \
@@ -10172,20 +11047,20 @@ $as_echo "$ac_res" >&6; }
     if test "$gt_use_preinstalled_gnugettext" = "yes" \
        || test "$nls_cv_use_gnu_gettext" = "yes"; then
 
-$as_echo "#define ENABLE_NLS 1" >>confdefs.h
+printf "%s\n" "#define ENABLE_NLS 1" >>confdefs.h
 
     else
       USE_NLS=no
     fi
   fi
 
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to use NLS" >&5
-$as_echo_n "checking whether to use NLS... " >&6; }
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $USE_NLS" >&5
-$as_echo "$USE_NLS" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether to use NLS" >&5
+printf %s "checking whether to use NLS... " >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $USE_NLS" >&5
+printf "%s\n" "$USE_NLS" >&6; }
   if test "$USE_NLS" = "yes"; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking where the gettext function comes from" >&5
-$as_echo_n "checking where the gettext function comes from... " >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking where the gettext function comes from" >&5
+printf %s "checking where the gettext function comes from... " >&6; }
     if test "$gt_use_preinstalled_gnugettext" = "yes"; then
       if { eval "gt_val=\$$gt_func_gnugettext_libintl"; test "$gt_val" = "yes"; }; then
         gt_source="external libintl"
@@ -10195,18 +11070,18 @@ $as_echo_n "checking where the gettext function comes from... " >&6; }
     else
       gt_source="included intl directory"
     fi
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_source" >&5
-$as_echo "$gt_source" >&6; }
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $gt_source" >&5
+printf "%s\n" "$gt_source" >&6; }
   fi
 
   if test "$USE_NLS" = "yes"; then
 
     if test "$gt_use_preinstalled_gnugettext" = "yes"; then
       if { eval "gt_val=\$$gt_func_gnugettext_libintl"; test "$gt_val" = "yes"; }; then
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to link with libintl" >&5
-$as_echo_n "checking how to link with libintl... " >&6; }
-        { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LIBINTL" >&5
-$as_echo "$LIBINTL" >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to link with libintl" >&5
+printf %s "checking how to link with libintl... " >&6; }
+        { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $LIBINTL" >&5
+printf "%s\n" "$LIBINTL" >&6; }
 
   for element in $INCINTL; do
     haveit=
@@ -10233,10 +11108,10 @@ $as_echo "$LIBINTL" >&6; }
       fi
 
 
-$as_echo "#define HAVE_GETTEXT 1" >>confdefs.h
+printf "%s\n" "#define HAVE_GETTEXT 1" >>confdefs.h
 
 
-$as_echo "#define HAVE_DCGETTEXT 1" >>confdefs.h
+printf "%s\n" "#define HAVE_DCGETTEXT 1" >>confdefs.h
 
     fi
 
@@ -10284,25 +11159,22 @@ $as_echo "#define HAVE_DCGETTEXT 1" >>confdefs.h
 
 
 
-cat >>confdefs.h <<_ACEOF
-#define PATH_SEPARATOR ':'
-_ACEOF
+printf "%s\n" "#define PATH_SEPARATOR ':'" >>confdefs.h
 
 
-cat >>confdefs.h <<_ACEOF
-#define PATH_SEPARATOR_STR ":"
-_ACEOF
+printf "%s\n" "#define PATH_SEPARATOR_STR \":\"" >>confdefs.h
 
 
 
 
 # Extract the first word of "perl", so it can be a program name with args.
 set dummy perl; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_path_PERL+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_path_PERL+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   case $PERL in
   [\\/]* | ?:[\\/]*)
   ac_cv_path_PERL="$PERL" # Let the user override the test with a path.
@@ -10312,11 +11184,15 @@ else
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_path_PERL="$as_dir/$ac_word$ac_exec_ext"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    ac_cv_path_PERL="$as_dir$ac_word$ac_exec_ext"
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -10328,11 +11204,11 @@ esac
 fi
 PERL=$ac_cv_path_PERL
 if test -n "$PERL"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PERL" >&5
-$as_echo "$PERL" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $PERL" >&5
+printf "%s\n" "$PERL" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -10371,8 +11247,8 @@ _ACEOF
     case $ac_val in #(
     *${as_nl}*)
       case $ac_var in #(
-      *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
-$as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
+      *_cv_*) { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
+printf "%s\n" "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
       esac
       case $ac_var in #(
       _ | IFS | as_nl) ;; #(
@@ -10402,15 +11278,15 @@ $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
      /^ac_cv_env_/b end
      t clear
      :clear
-     s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
+     s/^\([^=]*\)=\(.*[{}].*\)$/test ${\1+y} || &/
      t end
      s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
      :end' >>confcache
 if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
   if test -w "$cache_file"; then
     if test "x$cache_file" != "x/dev/null"; then
-      { $as_echo "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
-$as_echo "$as_me: updating cache $cache_file" >&6;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
+printf "%s\n" "$as_me: updating cache $cache_file" >&6;}
       if test ! -f "$cache_file" || test -h "$cache_file"; then
 	cat confcache >"$cache_file"
       else
@@ -10424,8 +11300,8 @@ $as_echo "$as_me: updating cache $cache_file" >&6;}
       fi
     fi
   else
-    { $as_echo "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
-$as_echo "$as_me: not updating unwritable cache $cache_file" >&6;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
+printf "%s\n" "$as_me: not updating unwritable cache $cache_file" >&6;}
   fi
 fi
 rm -f confcache
@@ -10441,7 +11317,7 @@ ac_ltlibobjs=
 for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
   # 1. Remove the extension, and $U if already installed.
   ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
-  ac_i=`$as_echo "$ac_i" | sed "$ac_script"`
+  ac_i=`printf "%s\n" "$ac_i" | sed "$ac_script"`
   # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
   #    will be set to the directory where LIBOBJS objects are built.
   as_fn_append ac_libobjs " \${LIBOBJDIR}$ac_i\$U.$ac_objext"
@@ -10473,8 +11349,8 @@ fi
 ac_write_fail=0
 ac_clean_files_save=$ac_clean_files
 ac_clean_files="$ac_clean_files $CONFIG_STATUS"
-{ $as_echo "$as_me:${as_lineno-$LINENO}: creating $CONFIG_STATUS" >&5
-$as_echo "$as_me: creating $CONFIG_STATUS" >&6;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating $CONFIG_STATUS" >&5
+printf "%s\n" "$as_me: creating $CONFIG_STATUS" >&6;}
 as_write_fail=0
 cat >$CONFIG_STATUS <<_ASEOF || as_write_fail=1
 #! $SHELL
@@ -10497,14 +11373,16 @@ cat >>$CONFIG_STATUS <<\_ASEOF || as_write_fail=1
 
 # Be more Bourne compatible
 DUALCASE=1; export DUALCASE # for MKS sh
-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
+as_nop=:
+if test ${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
+then :
   emulate sh
   NULLCMD=:
   # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
   # is contrary to our usage.  Disable this feature.
   alias -g '${1+"$@"}'='"$@"'
   setopt NO_GLOB_SUBST
-else
+else $as_nop
   case `(set -o) 2>/dev/null` in #(
   *posix*) :
     set -o posix ;; #(
@@ -10514,46 +11392,46 @@ esac
 fi
 
 
+
+# Reset variables that may have inherited troublesome values from
+# the environment.
+
+# IFS needs to be set, to space, tab, and newline, in precisely that order.
+# (If _AS_PATH_WALK were called with IFS unset, it would have the
+# side effect of setting IFS to empty, thus disabling word splitting.)
+# Quoting is to prevent editors from complaining about space-tab.
 as_nl='
 '
 export as_nl
-# Printing a long string crashes Solaris 7 /usr/bin/printf.
-as_echo='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
-as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo
-as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo$as_echo
-# Prefer a ksh shell builtin over an external printf program on Solaris,
-# but without wasting forks for bash or zsh.
-if test -z "$BASH_VERSION$ZSH_VERSION" \
-    && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
-  as_echo='print -r --'
-  as_echo_n='print -rn --'
-elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
-  as_echo='printf %s\n'
-  as_echo_n='printf %s'
-else
-  if test "X`(/usr/ucb/echo -n -n $as_echo) 2>/dev/null`" = "X-n $as_echo"; then
-    as_echo_body='eval /usr/ucb/echo -n "$1$as_nl"'
-    as_echo_n='/usr/ucb/echo -n'
-  else
-    as_echo_body='eval expr "X$1" : "X\\(.*\\)"'
-    as_echo_n_body='eval
-      arg=$1;
-      case $arg in #(
-      *"$as_nl"*)
-	expr "X$arg" : "X\\(.*\\)$as_nl";
-	arg=`expr "X$arg" : ".*$as_nl\\(.*\\)"`;;
-      esac;
-      expr "X$arg" : "X\\(.*\\)" | tr -d "$as_nl"
-    '
-    export as_echo_n_body
-    as_echo_n='sh -c $as_echo_n_body as_echo'
-  fi
-  export as_echo_body
-  as_echo='sh -c $as_echo_body as_echo'
-fi
+IFS=" ""	$as_nl"
+
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# Ensure predictable behavior from utilities with locale-dependent output.
+LC_ALL=C
+export LC_ALL
+LANGUAGE=C
+export LANGUAGE
+
+# We cannot yet rely on "unset" to work, but we need these variables
+# to be unset--not just set to an empty or harmless value--now, to
+# avoid bugs in old shells (e.g. pre-3.0 UWIN ksh).  This construct
+# also avoids known problems related to "unset" and subshell syntax
+# in other old shells (e.g. bash 2.01 and pdksh 5.2.14).
+for as_var in BASH_ENV ENV MAIL MAILPATH CDPATH
+do eval test \${$as_var+y} \
+  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
+done
+
+# Ensure that fds 0, 1, and 2 are open.
+if (exec 3>&0) 2>/dev/null; then :; else exec 0</dev/null; fi
+if (exec 3>&1) 2>/dev/null; then :; else exec 1>/dev/null; fi
+if (exec 3>&2)            ; then :; else exec 2>/dev/null; fi
 
 # The user is always right.
-if test "${PATH_SEPARATOR+set}" != set; then
+if ${PATH_SEPARATOR+false} :; then
   PATH_SEPARATOR=:
   (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
     (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
@@ -10562,13 +11440,6 @@ if test "${PATH_SEPARATOR+set}" != set; then
 fi
 
 
-# IFS
-# We need space, tab and new line, in precisely that order.  Quoting is
-# there to prevent editors from complaining about space-tab.
-# (If _AS_PATH_WALK were called with IFS unset, it would disable word
-# splitting by setting IFS to empty value.)
-IFS=" ""	$as_nl"
-
 # Find who we are.  Look in the path if we contain no directory separator.
 as_myself=
 case $0 in #((
@@ -10577,8 +11448,12 @@ case $0 in #((
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    test -r "$as_dir$0" && as_myself=$as_dir$0 && break
   done
 IFS=$as_save_IFS
 
@@ -10590,30 +11465,10 @@ if test "x$as_myself" = x; then
   as_myself=$0
 fi
 if test ! -f "$as_myself"; then
-  $as_echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+  printf "%s\n" "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
   exit 1
 fi
 
-# Unset variables that we do not need and which cause bugs (e.g. in
-# pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
-# suppresses any "Segmentation fault" message there.  '((' could
-# trigger a bug in pdksh 5.2.14.
-for as_var in BASH_ENV ENV MAIL MAILPATH
-do eval test x\${$as_var+set} = xset \
-  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
-done
-PS1='$ '
-PS2='> '
-PS4='+ '
-
-# NLS nuisances.
-LC_ALL=C
-export LC_ALL
-LANGUAGE=C
-export LANGUAGE
-
-# CDPATH.
-(unset CDPATH) >/dev/null 2>&1 && unset CDPATH
 
 
 # as_fn_error STATUS ERROR [LINENO LOG_FD]
@@ -10626,13 +11481,14 @@ as_fn_error ()
   as_status=$1; test $as_status -eq 0 && as_status=1
   if test "$4"; then
     as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $2" >&2
+  printf "%s\n" "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
 
+
 # as_fn_set_status STATUS
 # -----------------------
 # Set $? to STATUS, without forking.
@@ -10659,18 +11515,20 @@ as_fn_unset ()
   { eval $1=; unset $1;}
 }
 as_unset=as_fn_unset
+
 # as_fn_append VAR VALUE
 # ----------------------
 # Append the text in VALUE to the end of the definition contained in VAR. Take
 # advantage of any shell optimizations that allow amortized linear growth over
 # repeated appends, instead of the typical quadratic growth present in naive
 # implementations.
-if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
+if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null
+then :
   eval 'as_fn_append ()
   {
     eval $1+=\$2
   }'
-else
+else $as_nop
   as_fn_append ()
   {
     eval $1=\$$1\$2
@@ -10682,12 +11540,13 @@ fi # as_fn_append
 # Perform arithmetic evaluation on the ARGs, and store the result in the
 # global $as_val. Take advantage of shells that can avoid forks. The arguments
 # must be portable across $(()) and expr.
-if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
+if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null
+then :
   eval 'as_fn_arith ()
   {
     as_val=$(( $* ))
   }'
-else
+else $as_nop
   as_fn_arith ()
   {
     as_val=`expr "$@" || test $? -eq 1`
@@ -10718,7 +11577,7 @@ as_me=`$as_basename -- "$0" ||
 $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
 	 X"$0" : 'X\(//\)$' \| \
 	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X/"$0" |
+printf "%s\n" X/"$0" |
     sed '/^.*\/\([^/][^/]*\)\/*$/{
 	    s//\1/
 	    q
@@ -10740,6 +11599,10 @@ as_cr_Letters=$as_cr_letters$as_cr_LETTERS
 as_cr_digits='0123456789'
 as_cr_alnum=$as_cr_Letters$as_cr_digits
 
+
+# Determine whether it's possible to make 'echo' print without a newline.
+# These variables are no longer used directly by Autoconf, but are AC_SUBSTed
+# for compatibility with existing Makefiles.
 ECHO_C= ECHO_N= ECHO_T=
 case `echo -n x` in #(((((
 -n*)
@@ -10753,6 +11616,12 @@ case `echo -n x` in #(((((
   ECHO_N='-n';;
 esac
 
+# For backward compatibility with old third-party macros, we provide
+# the shell variables $as_echo and $as_echo_n.  New code should use
+# AS_ECHO(["message"]) and AS_ECHO_N(["message"]), respectively.
+as_echo='printf %s\n'
+as_echo_n='printf %s'
+
 rm -f conf$$ conf$$.exe conf$$.file
 if test -d conf$$.dir; then
   rm -f conf$$.dir/conf$$.file
@@ -10794,7 +11663,7 @@ as_fn_mkdir_p ()
     as_dirs=
     while :; do
       case $as_dir in #(
-      *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
+      *\'*) as_qdir=`printf "%s\n" "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
       *) as_qdir=$as_dir;;
       esac
       as_dirs="'$as_qdir' $as_dirs"
@@ -10803,7 +11672,7 @@ $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$as_dir" : 'X\(//\)[^/]' \| \
 	 X"$as_dir" : 'X\(//\)$' \| \
 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$as_dir" |
+printf "%s\n" X"$as_dir" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -10866,7 +11735,7 @@ cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 # values after options handling.
 ac_log="
 This file was extended by GNU Enscript $as_me 1.6.6, which was
-generated by GNU Autoconf 2.69.  Invocation command line was
+generated by GNU Autoconf 2.71.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
@@ -10926,18 +11795,20 @@ Configuration commands:
 $config_commands
 
 Report bugs to <bug-enscript@gnu.org>.
-GNU Enscript home page: <http://www.gnu.org/software/enscript/>.
-General help using GNU software: <http://www.gnu.org/gethelp/>."
+GNU Enscript home page: <https://www.gnu.org/software/enscript/>.
+General help using GNU software: <https://www.gnu.org/gethelp/>."
 
 _ACEOF
+ac_cs_config=`printf "%s\n" "$ac_configure_args" | sed "$ac_safe_unquote"`
+ac_cs_config_escaped=`printf "%s\n" "$ac_cs_config" | sed "s/^ //; s/'/'\\\\\\\\''/g"`
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
-ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
+ac_cs_config='$ac_cs_config_escaped'
 ac_cs_version="\\
 GNU Enscript config.status 1.6.6
-configured by $0, generated by GNU Autoconf 2.69,
+configured by $0, generated by GNU Autoconf 2.71,
   with options \\"\$ac_cs_config\\"
 
-Copyright (C) 2012 Free Software Foundation, Inc.
+Copyright (C) 2021 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
 
@@ -10977,15 +11848,15 @@ do
   -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
     ac_cs_recheck=: ;;
   --version | --versio | --versi | --vers | --ver | --ve | --v | -V )
-    $as_echo "$ac_cs_version"; exit ;;
+    printf "%s\n" "$ac_cs_version"; exit ;;
   --config | --confi | --conf | --con | --co | --c )
-    $as_echo "$ac_cs_config"; exit ;;
+    printf "%s\n" "$ac_cs_config"; exit ;;
   --debug | --debu | --deb | --de | --d | -d )
     debug=: ;;
   --file | --fil | --fi | --f )
     $ac_shift
     case $ac_optarg in
-    *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    *\'*) ac_optarg=`printf "%s\n" "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
     '') as_fn_error $? "missing file argument" ;;
     esac
     as_fn_append CONFIG_FILES " '$ac_optarg'"
@@ -10993,7 +11864,7 @@ do
   --header | --heade | --head | --hea )
     $ac_shift
     case $ac_optarg in
-    *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    *\'*) ac_optarg=`printf "%s\n" "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
     esac
     as_fn_append CONFIG_HEADERS " '$ac_optarg'"
     ac_need_defaults=false;;
@@ -11002,7 +11873,7 @@ do
     as_fn_error $? "ambiguous option: \`$1'
 Try \`$0 --help' for more information.";;
   --help | --hel | -h )
-    $as_echo "$ac_cs_usage"; exit ;;
+    printf "%s\n" "$ac_cs_usage"; exit ;;
   -q | -quiet | --quiet | --quie | --qui | --qu | --q \
   | -silent | --silent | --silen | --sile | --sil | --si | --s)
     ac_cs_silent=: ;;
@@ -11030,7 +11901,7 @@ cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 if \$ac_cs_recheck; then
   set X $SHELL '$0' $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
   shift
-  \$as_echo "running CONFIG_SHELL=$SHELL \$*" >&6
+  \printf "%s\n" "running CONFIG_SHELL=$SHELL \$*" >&6
   CONFIG_SHELL='$SHELL'
   export CONFIG_SHELL
   exec "\$@"
@@ -11044,7 +11915,7 @@ exec 5>>config.log
   sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
 ## Running $as_me. ##
 _ASBOX
-  $as_echo "$ac_log"
+  printf "%s\n" "$ac_log"
 } >&5
 
 _ACEOF
@@ -11099,9 +11970,9 @@ done
 # We use the long form for the default assignment because of an extremely
 # bizarre bug on SunOS 4.1.3.
 if $ac_need_defaults; then
-  test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
-  test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
-  test "${CONFIG_COMMANDS+set}" = set || CONFIG_COMMANDS=$config_commands
+  test ${CONFIG_FILES+y} || CONFIG_FILES=$config_files
+  test ${CONFIG_HEADERS+y} || CONFIG_HEADERS=$config_headers
+  test ${CONFIG_COMMANDS+y} || CONFIG_COMMANDS=$config_commands
 fi
 
 # Have a temporary directory for convenience.  Make it in the build tree
@@ -11437,7 +12308,7 @@ do
 	   esac ||
 	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
       esac
-      case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
+      case $ac_f in *\'*) ac_f=`printf "%s\n" "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
       as_fn_append ac_file_inputs " '$ac_f'"
     done
 
@@ -11445,17 +12316,17 @@ do
     # use $as_me), people would be surprised to read:
     #    /* config.h.  Generated by config.status.  */
     configure_input='Generated from '`
-	  $as_echo "$*" | sed 's|^[^:]*/||;s|:[^:]*/|, |g'
+	  printf "%s\n" "$*" | sed 's|^[^:]*/||;s|:[^:]*/|, |g'
 	`' by configure.'
     if test x"$ac_file" != x-; then
       configure_input="$ac_file.  $configure_input"
-      { $as_echo "$as_me:${as_lineno-$LINENO}: creating $ac_file" >&5
-$as_echo "$as_me: creating $ac_file" >&6;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating $ac_file" >&5
+printf "%s\n" "$as_me: creating $ac_file" >&6;}
     fi
     # Neutralize special characters interpreted by sed in replacement strings.
     case $configure_input in #(
     *\&* | *\|* | *\\* )
-       ac_sed_conf_input=`$as_echo "$configure_input" |
+       ac_sed_conf_input=`printf "%s\n" "$configure_input" |
        sed 's/[\\\\&|]/\\\\&/g'`;; #(
     *) ac_sed_conf_input=$configure_input;;
     esac
@@ -11472,7 +12343,7 @@ $as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$ac_file" : 'X\(//\)[^/]' \| \
 	 X"$ac_file" : 'X\(//\)$' \| \
 	 X"$ac_file" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$ac_file" |
+printf "%s\n" X"$ac_file" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -11496,9 +12367,9 @@ $as_echo X"$ac_file" |
 case "$ac_dir" in
 .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
 *)
-  ac_dir_suffix=/`$as_echo "$ac_dir" | sed 's|^\.[\\/]||'`
+  ac_dir_suffix=/`printf "%s\n" "$ac_dir" | sed 's|^\.[\\/]||'`
   # A ".." for each directory in $ac_dir_suffix.
-  ac_top_builddir_sub=`$as_echo "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
+  ac_top_builddir_sub=`printf "%s\n" "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
   case $ac_top_builddir_sub in
   "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
   *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
@@ -11560,8 +12431,8 @@ ac_sed_dataroot='
 case `eval "sed -n \"\$ac_sed_dataroot\" $ac_file_inputs"` in
 *datarootdir*) ac_datarootdir_seen=yes;;
 *@datadir@*|*@docdir@*|*@infodir@*|*@localedir@*|*@mandir@*)
-  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
-$as_echo "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
+printf "%s\n" "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
   ac_datarootdir_hack='
@@ -11605,9 +12476,9 @@ test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
   { ac_out=`sed -n '/\${datarootdir}/p' "$ac_tmp/out"`; test -n "$ac_out"; } &&
   { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' \
       "$ac_tmp/out"`; test -z "$ac_out"; } &&
-  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
 which seems to be undefined.  Please make sure it is defined" >&5
-$as_echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+printf "%s\n" "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
 which seems to be undefined.  Please make sure it is defined" >&2;}
 
   rm -f "$ac_tmp/stdin"
@@ -11623,20 +12494,20 @@ which seems to be undefined.  Please make sure it is defined" >&2;}
   #
   if test x"$ac_file" != x-; then
     {
-      $as_echo "/* $configure_input  */" \
+      printf "%s\n" "/* $configure_input  */" >&1 \
       && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs"
     } >"$ac_tmp/config.h" \
       || as_fn_error $? "could not create $ac_file" "$LINENO" 5
     if diff "$ac_file" "$ac_tmp/config.h" >/dev/null 2>&1; then
-      { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
-$as_echo "$as_me: $ac_file is unchanged" >&6;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
+printf "%s\n" "$as_me: $ac_file is unchanged" >&6;}
     else
       rm -f "$ac_file"
       mv "$ac_tmp/config.h" "$ac_file" \
 	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
     fi
   else
-    $as_echo "/* $configure_input  */" \
+    printf "%s\n" "/* $configure_input  */" >&1 \
       && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs" \
       || as_fn_error $? "could not create -" "$LINENO" 5
   fi
@@ -11656,7 +12527,7 @@ $as_expr X"$_am_arg" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$_am_arg" : 'X\(//\)[^/]' \| \
 	 X"$_am_arg" : 'X\(//\)$' \| \
 	 X"$_am_arg" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$_am_arg" |
+printf "%s\n" X"$_am_arg" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -11676,8 +12547,8 @@ $as_echo X"$_am_arg" |
 	  s/.*/./; q'`/stamp-h$_am_stamp_count
  ;;
 
-  :C)  { $as_echo "$as_me:${as_lineno-$LINENO}: executing $ac_file commands" >&5
-$as_echo "$as_me: executing $ac_file commands" >&6;}
+  :C)  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: executing $ac_file commands" >&5
+printf "%s\n" "$as_me: executing $ac_file commands" >&6;}
  ;;
   esac
 
@@ -11709,7 +12580,7 @@ $as_expr X"$mf" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$mf" : 'X\(//\)[^/]' \| \
 	 X"$mf" : 'X\(//\)$' \| \
 	 X"$mf" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$mf" |
+printf "%s\n" X"$mf" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -11753,7 +12624,7 @@ $as_expr X"$file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$file" : 'X\(//\)[^/]' \| \
 	 X"$file" : 'X\(//\)$' \| \
 	 X"$file" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$file" |
+printf "%s\n" X"$file" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -11925,8 +12796,8 @@ if test "$no_create" != yes; then
   $ac_cs_success || as_fn_exit 1
 fi
 if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
-$as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
+printf "%s\n" "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2;}
 fi
 
 
@@ -11942,3 +12813,4 @@ echo "Media      --with-media=MEDIA               $MEDIA"
 echo "Spooler    --with-spooler=SPOOLER           $SPOOLER"
 echo "PS level   --with-ps-level=LEVEL            $PSLEVEL"
 echo ""
+
diff --git a/src/gsint.h b/src/gsint.h
index 3c2527a..9272a79 100644
--- a/src/gsint.h
+++ b/src/gsint.h
@@ -34,17 +34,123 @@
 #endif
 
 #include <stdio.h>
+#include <stdarg.h>
 
 #include <sys/types.h>
 #include <sys/stat.h>
 
-#ifndef ___P
+typedef enum
+{
+  ENC_ISO_8859_1,
+  ENC_ISO_8859_2,
+  ENC_ISO_8859_3,
+  ENC_ISO_8859_4,
+  ENC_ISO_8859_5,
+  ENC_ISO_8859_7,
+  ENC_ISO_8859_9,
+  ENC_ISO_8859_10,
+  ENC_ASCII,
+  ENC_ASCII_FISE,
+  ENC_ASCII_DKNO,
+  ENC_IBMPC,
+  ENC_MAC,
+  ENC_VMS,
+  ENC_HP8,
+  ENC_KOI8,
+  ENC_PS
+} InputEncoding;
+
+typedef struct input_stream_st InputStream;
+typedef struct buffer_st Buffer;
+typedef struct font_point_st FontPoint;
+typedef struct stringhash_st *StringHashPtr;
+typedef struct gs_token_st Token;
+
 #if PROTOTYPES
-#define ___P(protos) protos
+
+typedef char *(charp_int) (int);
+typedef void *(voidp_voidp_voidp_size_t) (void *, void *, size_t);
+typedef double (double_double)(double);
+typedef int (*PathWalkProc) (char *, void *);
+typedef int (int_charp_charp)(char *, char *);
+typedef void (void_void)(void);
+typedef int (int_InputStreamp_FILEp_charp_charp)(InputStream *, FILE *,
+                                                 char *, char *);
+typedef void (void_InputStreamp)(InputStream *);
+typedef int (int_InputStreamp)(InputStream *);
+typedef int (int_int_InputStreamp)(int, InputStream *);
+typedef void (void_Bufferp)(Buffer *);
+typedef void (void_Bufferp_const_charp)(Buffer *, const char *);
+typedef void (void_Bufferp_const_charp_size_t)(Buffer *, const char *, size_t);
+typedef char *(charp_Bufferp) (Buffer *);
+typedef size_t (size_t_Bufferp)(Buffer *);
+typedef void (void_charp_InputStreamp_int)(char *, InputStream *, int);
+typedef void (void_charp_int_int_int_int_int_int)(char *, int, int, int, int, int, int);
+typedef void (void_intp)(int *);
+typedef char *(charp_charp) (char *);
+typedef double (double_charp_int_int)(char *, int, int);
+typedef int (int_charp_charpp_FontPointp_InputEncodingp)(char *, char **, FontPoint *, InputEncoding *);
+typedef void (void_charp)(char *);
+typedef char*(charp_charp)(char *);
+typedef char*(charp_charp_charp)(char *, char*);
+typedef void (void_StringHashPtr_charp)(StringHashPtr, char *);
+typedef int (int_StringHashPtr)(StringHashPtr);
+typedef int (int_charp_PathWalkProc_voidp)(char *, PathWalkProc, void *);
+typedef int (int_charp_voidp)(char *, void *);
+typedef FILE *(FILEp_charp_charp_charp_charp_voidpp) (char *, char *, char *, char *, void **);
+typedef void (void_voidp)(void *);
+typedef char *(charp_const_char_p) (const char *);
+typedef void (void_int_charpp)(int, char **);
+typedef void (void_InputStreamp_double_double_unsigned_int_double_Tokenp)(InputStream *, double, double, unsigned int, double, Token *);
+typedef void (void_charp_int)(char *, int);
+typedef int (int_Tokenp)(Token *);
+typedef void (void_Tokenp)(Token *);
+typedef int(int_charp_InputStreamp)(char *, InputStream *);
+typedef double(double_InputStreamp_int_int)(InputStream *, int, int);
+typedef void (void_double_double_double_double_unsigned_int)(double, double, double, double, unsigned int);
+
 #else /* no PROTOTYPES */
-#define ___P(protos) ()
+
+typedef char *(charp_int) ();
+typedef void *(voidp_voidp_voidp_size_t) ();
+typedef double (double_double)(double);
+typedef int(*PathWalkProc)();
+typedef int (int_charp_charp)();
+typedef void (void_void)(void);
+typedef int (int_InputStreamp_FILEp_charp_charp)();
+typedef void (void_InputStreamp)();
+typedef int (int_InputStreamp)();
+typedef int (int_int_InputStreamp)();
+typedef void (void_Bufferp)();
+typedef void (void_Bufferp_const_charp)();
+typedef void (void_Bufferp_const_charp_size_t)();
+typedef char *(charp_Bufferp) ();
+typedef size_t (size_t_Bufferp)();
+typedef void (void_charp_InputStreamp_int)();
+typedef void (void_charp_int_int_int_int_int_int)();
+typedef void (void_intp)();
+typedef double (double_charp_int_int)();
+typedef int (int_charp_charpp_FontPointp_InputEncodingp)();
+typedef void (void_charp)();
+typedef char*(charp_charp)();
+typedef char*(charp_charp_charp)(char *);
+typedef void (void_StringHashPtr_charp)();
+typedef int (int_StringHashPtr)();
+typedef int (int_charp_PathWalkProc_voidp)();
+typedef int (int_charp_voidp)();
+typedef FILE* (FILEp_charp_charp_charp_charp_voidpp)();
+typedef void (void_voidp)();
+typedef char *(charp_const_char_p)();
+typedef void (void_int_charpp)();
+typedef void (void_InputStreamp_double_double_unsigned_int_double_Tokenp)();
+typedef void (void_charp_int)();
+typedef int (int_Tokenp)();
+typedef void (void_Tokenp)();
+typedef int(int_charp_InputStreamp)();
+typedef double(double_InputStreamp_int_int)();
+typedef void (void_double_double_double_double_unsigned_int)();
+
 #endif /* no PROTOTYPES */
-#endif
 
 #if STDC_HEADERS
 
@@ -69,15 +175,15 @@ char *strchr ();
 char *strrchr ();
 
 #ifndef HAVE_STRERROR
-extern char *strerror ___P ((int));
+extern charp_int strerror;
 #endif
 
 #ifndef HAVE_MEMMOVE
-extern void *memmove ___P ((void *, void *, size_t));
+extern voidp_voidp_voidp_size_t memmove;
 #endif
 
 #ifndef HAVE_MEMCPY
-extern void *memcpy ___P ((void *, void *, size_t));
+extern voidp_voidp_voidp_size_t memcpy;
 #endif
 
 #endif /* no STDC_HEADERS */
@@ -89,7 +195,7 @@ extern void *memcpy ___P ((void *, void *, size_t));
 #if HAVE_MATH_H
 #include <math.h>
 #else
-extern double atan2 ___P ((double, double));
+extern double_double atan2;
 #endif
 
 #include <errno.h>
@@ -104,7 +210,6 @@ extern double atan2 ___P ((double, double));
 #endif
 
 #include "gettext.h"
-#define _(String) gettext (String)
 
 #if HAVE_LC_MESSAGES
 #include <locale.h>
@@ -124,25 +229,25 @@ extern double atan2 ___P ((double, double));
  * Types and definitions.
  */
 
-#define MATCH(a, b) (strcmp (a, b) == 0)
+static int MATCH(char *a, char *b) { return (strcmp (a, b) == 0); }
 
-#define ISNUMBERDIGIT(ch) \
-  (('0' <= (ch) && (ch) <= '9') || (ch) == '.' || (ch) == '-' || (ch) == '+')
+static int ISNUMBERDIGIT_int(int ch) { return  (('0' <= (ch) && (ch) <= '9') || (ch) == '.' || (ch) == '-' || (ch) == '+'); }
+static int ISNUMBERDIGIT_char(char ch) { return  (('0' <= (ch) && (ch) <= '9') || (ch) == '.' || (ch) == '-' || (ch) == '+'); }
 
 /* Return the width of the character <ch> */
-#define CHAR_WIDTH(ch) (font_widths[(unsigned char) (ch)])
+static double CHAR_WIDTH_int(int ch, double *font_widths) { return (font_widths[(unsigned char) (ch)]); }
+static double CHAR_WIDTH_uchar(unsigned char ch, double *font_widths) { return (font_widths[(unsigned char) (ch)]); }
+static double CHAR_WIDTH_char(char ch, double *font_widths) { return (font_widths[(unsigned char) (ch)]); }
 
-/* Current point y movement from line to line. */
-#define LINESKIP (Fpt.h + baselineskip)
 
 
 /* Constants for output files. */
-#define OUTPUT_FILE_NONE   NULL
-#define OUTPUT_FILE_STDOUT ((char *) 1)
+enum { OUTPUT_FILE_NONE = 0 };
+enum { OUTPUT_FILE_STDOUT = 1 };
 
 /* Underlay styles. */
-#define UL_STYLE_OUTLINE 	0
-#define UL_STYLE_FILLED		1
+enum { UL_STYLE_OUTLINE = 0};
+enum { UL_STYLE_FILLED = 1 };
 
 struct media_entry_st
 {
@@ -165,28 +270,6 @@ typedef enum
   HDR_FANCY
 } HeaderType;
 
-
-typedef enum
-{
-  ENC_ISO_8859_1,
-  ENC_ISO_8859_2,
-  ENC_ISO_8859_3,
-  ENC_ISO_8859_4,
-  ENC_ISO_8859_5,
-  ENC_ISO_8859_7,
-  ENC_ISO_8859_9,
-  ENC_ISO_8859_10,
-  ENC_ASCII,
-  ENC_ASCII_FISE,
-  ENC_ASCII_DKNO,
-  ENC_IBMPC,
-  ENC_MAC,
-  ENC_VMS,
-  ENC_HP8,
-  ENC_KOI8,
-  ENC_PS
-} InputEncoding;
-
 struct encoding_registry_st
 {
   char *names[3];
@@ -258,9 +341,6 @@ struct file_lookup_ctx_st
 
 typedef struct file_lookup_ctx_st FileLookupCtx;
 
-typedef int (*PathWalkProc) ___P ((char *path, void *context));
-
-
 struct input_stream_st
 {
   int is_pipe;			/* Is <fp> opened to pipe? */
@@ -489,92 +569,77 @@ extern int rotate_even_pages;
 extern int swap_even_page_margins;
 extern int continuous_page_numbers;
 
+/* Current point y movement from line to line. */
+static double LINESKIP(void) { return (Fpt.h + baselineskip); }
+
 
 /*
  * Prototypes for global functions.
  */
 
 /* Print message if <verbose> is >= <verbose_level>. */
-#define MESSAGE(verbose_level, body)		\
-  do {						\
-    if (!quiet && verbose >= (verbose_level))	\
-      fprintf body;				\
-  } while (0)
+void MESSAGE_f(int verbose_level, FILE *file, const char *format, ...);
 
 /* Report continuable error. */
-#define ERROR(body)			\
-  do {					\
-    fprintf (stderr, "%s: ", program);	\
-    fprintf body;			\
-    fprintf (stderr, "\n");		\
-    fflush (stderr);			\
-  } while (0)
+void ERROR_f(FILE *file, const char *format, ...);
 
 /* Report fatal error and exit with status 1.  Function never returns. */
-#define FATAL(body)			\
-  do {					\
-    fprintf (stderr, "%s: ", program);	\
-    fprintf body;			\
-    fprintf (stderr, "\n");		\
-    fflush (stderr);			\
-    exit (1);				\
-  } while (0)
+void FATAL_f(FILE *file, const char *format, ...);
 
 /*
  * Read config file <path, name>.  Returns bool.  If function fails, error
  * is found from errno.
  */
-int read_config ___P ((char *path, char *name));
+int_charp_charp read_config;
 
 /* Print PostScript header to our output stream. */
-void dump_ps_header ___P ((void));
+void_void dump_ps_header;
 
 /* Print PostScript trailer to our output stream. */
-void dump_ps_trailer ___P ((void));
+void_void dump_ps_trailer;
 
 /*
  * Open InputStream to <fp> or <fname>.  If <input_filter> is given
  * it is used to pre-filter the incoming data stream.  Function returns
  * 1 if stream could be opened or 0 otherwise.
  */
-int is_open ___P ((InputStream *is, FILE *fp, char *fname,
-		   char *input_filter));
+int_InputStreamp_FILEp_charp_charp is_open;
 
 /* Close InputStream <is>. */
-void is_close ___P ((InputStream *is));
+void_InputStreamp is_close;
 
 /*
  * Read next character from the InputStream <is>.  Returns EOF if
  * EOF was reached.
  */
-int is_getc ___P ((InputStream *is));
+int_InputStreamp is_getc;
 
 /*
  * Put character <ch> back to the InputStream <is>.  Function returns EOF
  * if character couldn't be unget.
  */
-int is_ungetc ___P ((int ch, InputStream *is));
+int_int_InputStreamp is_ungetc;
 
 
-void buffer_init ___P ((Buffer *buffer));
+void_Bufferp buffer_init;
 
-void buffer_uninit ___P ((Buffer *buffer));
+void_Bufferp buffer_uninit;
 
 Buffer *buffer_alloc ();
 
-void buffer_free ___P ((Buffer *buffer));
+void_Bufferp buffer_free;
 
-void buffer_append ___P ((Buffer *buffer, const char *data));
+void_Bufferp_const_charp buffer_append;
 
-void buffer_append_len ___P ((Buffer *buffer, const char *data, size_t len));
+void_Bufferp_const_charp_size_t buffer_append_len;
 
-char *buffer_copy ___P ((Buffer *buffer));
+charp_Bufferp buffer_copy;
 
-void buffer_clear ___P ((Buffer *buffer));
+void_Bufferp buffer_clear;
 
-char *buffer_ptr ___P ((Buffer *buffer));
+charp_Bufferp buffer_ptr;
 
-size_t buffer_len ___P ((Buffer *buffer));
+size_t_Bufferp buffer_len;
 
 
 /*
@@ -582,32 +647,31 @@ size_t buffer_len ___P ((Buffer *buffer));
  * it is used to print headers.  The argument <is_toc> specifies whether
  * the file is a table of contents file or not.
  */
-void process_file ___P ((char *fname, InputStream *fp, int is_toc));
+void_charp_InputStreamp_int process_file;
 
 /* Add a new media to the list of known media. */
-void add_media ___P ((char *name, int w, int h, int llx, int lly, int urx,
-		      int ury));
+void_charp_int_int_int_int_int_int add_media;
 
 /* Print a listing of missing characters. */
-void do_list_missing_characters ___P ((int *array));
+void_intp do_list_missing_characters;
 
 /*
  * Check if file <name, suffix> exists.  Returns bool.  If function fails
  * error can be found from errno.
  */
-int file_existsp ___P ((char *name, char *suffix));
+int_charp_charp file_existsp;
 
 /*
  * Paste file <name, suffix> to output stream.  Returns bool. If
  * function fails, error can be found from errno.
  */
-int paste_file ___P ((char *name, char *suffix));
+int_charp_charp paste_file;
 
 /*
  * Do tilde substitution for filename <fname>.  The function returns a
  * xmalloc()ated result that must be freed by the caller.
  */
-char *tilde_subst ___P ((char *fname));
+charp_charp tilde_subst;
 
 /*
  * Parse one float dimension from string <string>.  If <units> is true,
@@ -615,7 +679,7 @@ char *tilde_subst ___P ((char *fname));
  * <horizontal> is true, then dimension is horizontal, otherwise it
  * is vertical.
  */
-double parse_float ___P ((char *string, int units, int horizontal));
+double_charp_int_int parse_float;
 
 /*
  * Parse font spec <spec> and return font's name, size, and encoding
@@ -624,41 +688,39 @@ double parse_float ___P ((char *string, int units, int horizontal));
  * name <name_return> is allocated with xcalloc() and must be freed by
  * caller.
  */
-int parse_font_spec ___P ((char *spec, char **name_return,
-			   FontPoint *size_return,
-			   InputEncoding *encoding_return));
+int_charp_charpp_FontPointp_InputEncodingp parse_font_spec;
 
 /*
  * Read body font's character widths and character codes from AFM files.
  */
-void read_font_info ___P ((void));
+void_void read_font_info;
 
 /*
  * Try to download font <name>.
  */
-void download_font ___P ((char *name));
+void_charp download_font;
 
 /*
  * Escape all PostScript string's special characters from string <string>.
  * Returns a xmalloc()ated result.
  */
-char *escape_string ___P ((char *string));
+charp_charp escape_string;
 
 /*
  * Expand user escapes from string <string>.  Returns a xmalloc()ated
  * result.
  */
-char *format_user_string ___P ((char *context_name, char *string));
+charp_charp_charp format_user_string;
 
 /*
  * Parses key-value pair <kv> and inserts/deletes key from <set>.
  */
-void parse_key_value_pair ___P ((StringHashPtr set, char *kv));
+void_StringHashPtr_charp parse_key_value_pair;
 
 /*
  * Count how many non-empty items there are in the key-value set <set>.
  */
-int count_key_value_set ___P ((StringHashPtr set));
+int_StringHashPtr count_key_value_set;
 
 /*
  * Walk through path <path> and call <proc> once for each of its
@@ -667,10 +729,10 @@ int count_key_value_set ___P ((StringHashPtr set));
  * return value.  In that case value is returned as the return value
  * of the pathwalk().
  */
-int pathwalk ___P ((char *path, PathWalkProc proc, void *context));
+int_charp_PathWalkProc_voidp pathwalk;
 
 /* Lookup file from path.  <context> must point to FileLookupCtx. */
-int file_lookup ___P ((char *path, void *context));
+int_charp_voidp file_lookup;
 
 
 /*
@@ -685,17 +747,16 @@ int file_lookup ___P ((char *path, void *context));
  * to variable <context_return> wich is passed as an argument to the
  * printer_close() function.
  */
-FILE *printer_open ___P ((char *cmd, char *options, char *queue_param,
-			  char *printer_name, void **context_return));
+FILEp_charp_charp_charp_charp_voidpp printer_open;
 
 /*
  * Flush all pending output to printer <context> and close it.
  */
-void printer_close ___P ((void *context));
+void_voidp printer_close;
 
 /*
  * Escape filenames for shell usage
  */
-char *shell_escape ___P ((const char *fn));
+charp_const_char_p shell_escape;
 
 #endif /* not GSINT_H */
diff --git a/src/main.c b/src/main.c
index a9175db..983217b 100644
--- a/src/main.c
+++ b/src/main.c
@@ -39,10 +39,10 @@ static void open_output_file ();
 static void close_output_file ();
 
 /* Handle options from environment variable <var> */
-static void handle_env_options ___P ((char *var));
+static void_charp handle_env_options;
 
 /* Handle options from <argv> array. */
-static void handle_options ___P ((int argc, char *argv[]));
+static void_int_charpp handle_options;
 
 /* Print usage info. */
 static void usage ();
@@ -358,7 +358,7 @@ int nl = -1;
  * Leave output to the specified file.  As a default result is spooled to
  * printer.
  */
-char *output_file = OUTPUT_FILE_NONE;
+char *output_file = ((void *)OUTPUT_FILE_NONE);
 
 /*
  * -O, --missing-characters
@@ -946,7 +946,7 @@ main (int argc, char *argv[])
 
   /* Create the default TOC format string.  Wow, this is cool! */
   /* xgettext:no-c-format */
-  toc_fmt_string = _("$3v $-40N $3% pages $4L lines  $E $C");
+  toc_fmt_string = gettext("$3v $-40N $3% pages $4L lines  $E $C");
 
   /* Internationalization. */
 #if HAVE_SETLOCALE
@@ -976,8 +976,8 @@ main (int argc, char *argv[])
   /* Get user's passwd entry. */
   passwd = getpwuid (getuid ());
   if (passwd == NULL)
-    FATAL ((stderr, _("couldn't get passwd entry for uid=%d: %s"), getuid (),
-	    strerror (errno)));
+    FATAL_f (stderr, gettext("couldn't get passwd entry for uid=%d: %s"), getuid (),
+	    strerror (errno));
 
   /* Defaults for some options. */
   media_name 		= xstrdup ("A4");
@@ -1043,7 +1043,7 @@ main (int argc, char *argv[])
    */
 
   /* Global config. */
-#define CFG_FILE_NAME "enscript.cfg"
+static char *CFG_FILE_NAME = "enscript.cfg";
   if (!read_config (SYSCONFDIR, CFG_FILE_NAME))
     {
       int saved_errno = errno;
@@ -1068,25 +1068,25 @@ main (int argc, char *argv[])
 		  && !read_config ("../../lib", CFG_FILE_NAME))
 		{
 		  /* No luck, report error from the original config file. */
-		  ERROR ((stderr, _("couldn't read config file \"%s/%s\": %s"),
+		  ERROR_f (stderr, gettext("couldn't read config file \"%s/%s\": %s"),
 			  enscript_library, CFG_FILE_NAME,
-			  strerror (saved_errno)));
-		  ERROR ((stderr,
-			  _("I did also try the following directories:")));
-		  ERROR ((stderr, _("\t%s"), SYSCONFDIR));
-		  ERROR ((stderr, _("\t%s"), enscript_library));
-		  ERROR ((stderr, _("\t%s"), buffer_ptr (&buffer)));
-		  ERROR ((stderr, _("\t../lib")));
-		  ERROR ((stderr, _("\t../../lib")));
-		  ERROR ((stderr,
-_("This is probably an installation error.  Please, try to rebuild:")));
-		  ERROR ((stderr, _("\tmake distclean")));
-		  ERROR ((stderr, _("\t./configure --prefix=PREFIX")));
-		  ERROR ((stderr, _("\tmake")));
-		  ERROR ((stderr, _("\tmake check")));
-		  ERROR ((stderr, _("\tmake install")));
-		  ERROR ((stderr, _("or set the environment variable `ENSCRIPT_LIBRARY'"
-			" to point to your library directory.")));
+			  strerror (saved_errno));
+		  ERROR_f (stderr,
+			  gettext("I did also try the following directories:"));
+		  ERROR_f (stderr, gettext("\t%s"), SYSCONFDIR);
+		  ERROR_f (stderr, gettext("\t%s"), enscript_library);
+		  ERROR_f (stderr, gettext("\t%s"), buffer_ptr (&buffer));
+		  ERROR_f (stderr, gettext("\t../lib"));
+		  ERROR_f (stderr, gettext("\t../../lib"));
+		  ERROR_f (stderr,
+gettext("This is probably an installation error.  Please, try to rebuild:"));
+		  ERROR_f (stderr, gettext("\tmake distclean"));
+		  ERROR_f (stderr, gettext("\t./configure --prefix=PREFIX"));
+		  ERROR_f (stderr, gettext("\tmake"));
+		  ERROR_f (stderr, gettext("\tmake check"));
+		  ERROR_f (stderr, gettext("\tmake install"));
+		  ERROR_f (stderr, gettext("or set the environment variable `ENSCRIPT_LIBRARY'"
+			" to point to your library directory."));
 		  exit (1);
 		}
 
@@ -1158,7 +1158,7 @@ _("This is probably an installation error.  Please, try to rebuild:")));
 	  break;
 	}
   if (!found)
-    FATAL ((stderr, _("unknown encoding: %s"), encoding_name));
+    FATAL_f (stderr, gettext("unknown encoding: %s"), encoding_name);
 
   /* Fonts. */
 
@@ -1177,7 +1177,7 @@ _("This is probably an installation error.  Please, try to rebuild:")));
       char buf[256];
 
       afm_error_to_string (afm_error, buf);
-      FATAL ((stderr, _("couldn't open AFM library: %s"), buf));
+      FATAL_f (stderr, gettext("couldn't open AFM library: %s"), buf);
     }
 
   /*
@@ -1206,7 +1206,7 @@ _("This is probably an installation error.  Please, try to rebuild:")));
   /* List media names. */
   if (list_media)
     {
-      printf (_("known media:\n\
+      printf (gettext("known media:\n\
 name             width\theight\tllx\tlly\turx\tury\n\
 ------------------------------------------------------------\n"));
       for (mentry = media_names; mentry; mentry = mentry->next)
@@ -1225,7 +1225,7 @@ name             width\theight\tllx\tlly\turx\tury\n\
 	break;
       }
   if (media == NULL)
-    FATAL ((stderr, _("do not know anything about media \"%s\""), media_name));
+    FATAL_f (stderr, gettext("do not know anything about media \"%s\""), media_name);
 
   if (margins_spec)
     {
@@ -1267,11 +1267,11 @@ name             width\theight\tllx\tlly\turx\tury\n\
 	      break;
 	    }
 	}
-      MESSAGE (1,
-	       (stderr,
-		_("set new marginals for media `%s' (%dx%d): llx=%d, lly=%d, urx=%d, ury=%d\n"),
+      MESSAGE_f (1,
+	       stderr,
+    gettext("set new marginals for media `%s' (%dx%d): llx=%d, lly=%d, urx=%d, ury=%d\n"),
 		media->name, media->w, media->h, media->llx, media->lly,
-		media->urx, media->ury));
+		media->urx, media->ury);
     }
 
   /* Page label format. */
@@ -1280,7 +1280,7 @@ name             width\theight\tllx\tlly\turx\tury\n\
   else if (MATCH (page_label_format, "long"))
     page_label = LABEL_LONG;
   else
-    FATAL ((stderr, _("illegal page label format \"%s\""), page_label_format));
+    FATAL_f (stderr, gettext("illegal page label format \"%s\""), page_label_format);
 
   /* Non-printable format. */
   if (MATCH (npf_name, "space"))
@@ -1292,7 +1292,7 @@ name             width\theight\tllx\tlly\turx\tury\n\
   else if (MATCH (npf_name, "octal"))
     non_printable_format = NPF_OCTAL;
   else
-    FATAL ((stderr, _("illegal non-printable format \"%s\""), npf_name));
+    FATAL_f (stderr, gettext("illegal non-printable format \"%s\""), npf_name);
 
   /* Mark wrapped lines style. */
   if (mark_wrapped_lines_style_name)
@@ -1306,8 +1306,8 @@ name             width\theight\tllx\tlly\turx\tury\n\
       else if (MATCH (mark_wrapped_lines_style_name, "arrow"))
 	mark_wrapped_lines_style = MWLS_ARROW;
       else
-	FATAL ((stderr, _("illegal style for wrapped line marker: \"%s\""),
-		mark_wrapped_lines_style_name));
+	FATAL_f (stderr, gettext("illegal style for wrapped line marker: \"%s\""),
+		mark_wrapped_lines_style_name);
     }
 
   /* Count N-up stuffs. */
@@ -1316,12 +1316,12 @@ name             width\theight\tllx\tlly\turx\tury\n\
       ui = nup >> i;
 
       if (ui == 0)
-	FATAL ((stderr, _("illegal N-up argument: %d"), nup));
+	FATAL_f (stderr, gettext("illegal N-up argument: %d"), nup);
 
       if (ui & 0x1)
 	{
 	  if (ui != 1)
-	    FATAL ((stderr, _("N-up argument must be power of 2: %d"), nup));
+	    FATAL_f (stderr, gettext("N-up argument must be power of 2: %d"), nup);
 
 	  nup_exp = i;
 	  break;
@@ -1398,7 +1398,7 @@ name             width\theight\tllx\tlly\turx\tury\n\
   if (cp == ul_position)
     {
     malformed_position:
-      FATAL ((stderr, _("malformed underlay position: %s"), ul_position));
+      FATAL_f (stderr, gettext("malformed underlay position: %s"), ul_position);
     }
   if (ul_position[0] == '-')
     ul_x += d_page_w;
@@ -1421,7 +1421,7 @@ name             width\theight\tllx\tlly\turx\tury\n\
   else if (strcmp (ul_style_str, "filled") == 0)
     ul_style = UL_STYLE_FILLED;
   else
-    FATAL ((stderr, _("illegal underlay style: %s"), ul_style_str));
+    FATAL_f (stderr, gettext("illegal underlay style: %s"), ul_style_str);
 
   /*
    * Header.  Note! The header attributes can be changed from
@@ -1448,7 +1448,7 @@ name             width\theight\tllx\tlly\turx\tury\n\
   if (help_highlight)
     {
       /* Create description with states. */
-      printf (_("Highlighting is supported for the following languages and file formats:\n\n"));
+      printf (gettext("Highlighting is supported for the following languages and file formats:\n\n"));
       fflush (stdout);
 
       buffer_clear (&buffer);
@@ -1629,8 +1629,8 @@ name             width\theight\tllx\tlly\turx\tury\n\
 	{
 	  toc_fp = tmpfile ();
 	  if (toc_fp == NULL)
-	    FATAL ((stderr, _("couldn't create temporary toc file: %s"),
-		    strerror (errno)));
+	    FATAL_f (stderr, gettext("couldn't create temporary toc file: %s"),
+		    strerror (errno));
 	}
 
 
@@ -1676,9 +1676,9 @@ name             width\theight\tllx\tlly\turx\tury\n\
 		      process_file (argv[optind], &is, 0);
 		    }
 		  else
-		    ERROR ((stderr, _("couldn't stat input file \"%s\": %s"),
+		    ERROR_f (stderr, gettext("couldn't stat input file \"%s\": %s"),
 			    argv[optind],
-			    strerror (errno)));
+			    strerror (errno));
 
 		  is_close (&is);
 		}
@@ -1696,13 +1696,13 @@ name             width\theight\tllx\tlly\turx\tury\n\
 	  line_numbers = 0;
 
 	  if (fseek (toc_fp, 0, SEEK_SET) != 0)
-	    FATAL ((stderr, _("couldn't rewind toc file: %s"),
-		    strerror (errno)));
+	    FATAL_f (stderr, gettext("couldn't rewind toc file: %s"),
+		    strerror (errno));
 
 	  memcpy (&mod_tm, &run_tm, sizeof (run_tm));
 	  if (is_open (&is, toc_fp, NULL, NULL))
 	    {
-	      process_file (_("Table of Contents"), &is, 1);
+	      process_file (gettext("Table of Contents"), &is, 1);
 	      is_close (&is);
 	    }
 	}
@@ -1728,16 +1728,16 @@ name             width\theight\tllx\tlly\turx\tury\n\
        * The value of <ofp> is not reset in close_output_file(),
        * this is ugly but it saves one flag.
        */
-      MESSAGE (0, (stderr, _("no output generated\n")));
+      MESSAGE_f (0, stderr, gettext("no output generated\n"));
     }
   else if (output_language_pass_through)
     {
-      if (output_file == OUTPUT_FILE_NONE)
-	MESSAGE (0, (stderr, _("output sent to %s\n"),
-		     printer ? printer : _("printer")));
+      if (output_file == ((void *)OUTPUT_FILE_NONE))
+	MESSAGE_f (0, stderr, gettext("output sent to %s\n"),
+		     printer ? printer : gettext("printer"));
       else
-	MESSAGE (0, (stderr, _("output left in %s\n"),
-		     output_file == OUTPUT_FILE_STDOUT ? "-" : output_file));
+	MESSAGE_f (0, stderr, gettext("output left in %s\n"),
+		     output_file == ((char *)OUTPUT_FILE_STDOUT) ? "-" : output_file);
     }
   else
     {
@@ -1761,37 +1761,37 @@ name             width\theight\tllx\tlly\turx\tury\n\
 	       " * ",
 	       ngettext("%d copy", "%d copies", num_copies),
 	       " ]");
-      MESSAGE (0, (stderr, message, real_total_pages, num_copies));
+      MESSAGE_f (0, stderr, message, real_total_pages, num_copies);
 
-      if (output_file == OUTPUT_FILE_NONE)
-	MESSAGE (0, (stderr, _(" sent to %s\n"),
-		     printer ? printer : _("printer")));
+      if (output_file == ((void *)OUTPUT_FILE_NONE))
+	MESSAGE_f (0, stderr, gettext(" sent to %s\n"),
+		     printer ? printer : gettext("printer"));
       else
-	MESSAGE (0, (stderr, _(" left in %s\n"),
-		     output_file == OUTPUT_FILE_STDOUT ? "-" : output_file));
+	MESSAGE_f (0, stderr, gettext(" left in %s\n"),
+		     output_file == ((char *)OUTPUT_FILE_STDOUT) ? "-" : output_file);
       if (num_truncated_lines)
 	{
 	  retval |= 2;
-	  MESSAGE (0, (stderr,
+	  MESSAGE_f (0, stderr,
 		       ngettext("%d line was %s\n",
 				"%d lines were %s\n",
 				num_truncated_lines),
 		       num_truncated_lines,
 		       line_end == LE_TRUNCATE
-		       ? _("truncated") : _("wrapped")));
+		       ? gettext("truncated") : gettext("wrapped"));
 	}
 
       if (num_missing_chars)
 	{
 	  retval |= 4;
-	  MESSAGE (0, (stderr,
+	  MESSAGE_f (0, stderr,
 		       ngettext("%d character was missing\n",
 				"%d characters were missing\n",
 				num_missing_chars),
-		       num_missing_chars));
+		       num_missing_chars);
 	  if (list_missing_characters)
 	    {
-	      MESSAGE (0, (stderr, _("missing character codes (decimal):\n")));
+	      MESSAGE_f (0, stderr, gettext("missing character codes (decimal):\n"));
 	      do_list_missing_characters (missing_chars);
 	    }
 	}
@@ -1799,15 +1799,15 @@ name             width\theight\tllx\tlly\turx\tury\n\
       if (num_non_printable_chars)
 	{
 	  retval |= 8;
-	  MESSAGE (0, (stderr,
+	  MESSAGE_f (0, stderr,
 		       ngettext("%d non-printable character\n",
 				"%d non-printable characters\n",
 				num_non_printable_chars),
-		       num_non_printable_chars));
+		       num_non_printable_chars);
 	  if (list_missing_characters)
 	    {
-	      MESSAGE (0, (stderr,
-			   _("non-printable character codes (decimal):\n")));
+	      MESSAGE_f (0, stderr,
+			   gettext("non-printable character codes (decimal):\n"));
 	      do_list_missing_characters (non_printable_chars);
 	    }
 	}
@@ -1836,7 +1836,7 @@ open_output_file ()
     /* Output file has already been opened, do nothing. */
     return;
 
-  if (output_file == OUTPUT_FILE_NONE)
+  if (output_file == ((void *)OUTPUT_FILE_NONE))
     {
       char spooler_options[512];
 
@@ -1856,17 +1856,17 @@ open_output_file ()
       ofp = printer_open (spooler_command, spooler_options, queue_param,
 			  printer, &printer_context);
       if (ofp == NULL)
-	FATAL ((stderr, _("couldn't open printer `%s': %s"), printer,
-		strerror (errno)));
+	FATAL_f (stderr, gettext("couldn't open printer `%s': %s"), printer,
+		strerror (errno));
     }
-  else if (output_file == OUTPUT_FILE_STDOUT)
+  else if (output_file == ((char *)OUTPUT_FILE_STDOUT))
     ofp = stdout;
   else
     {
       ofp = fopen (output_file, "w");
       if (ofp == NULL)
-	FATAL ((stderr, _("couldn't create output file \"%s\": %s"),
-		output_file, strerror (errno)));
+	FATAL_f (stderr, gettext("couldn't create output file \"%s\": %s"),
+		output_file, strerror (errno));
     }
 }
 
@@ -1878,12 +1878,12 @@ close_output_file ()
     /* Output file hasn't been opened, we are done. */
     return;
 
-  if (output_file == OUTPUT_FILE_NONE)
+  if (output_file == ((void *)OUTPUT_FILE_NONE))
     printer_close (printer_context);
-  else if (output_file != OUTPUT_FILE_STDOUT)
+  else if (output_file != ((char *)OUTPUT_FILE_STDOUT))
     if (fclose (ofp))
-      FATAL ((stderr, _("couldn't close output file \"%s\": %s"),
-	      output_file, strerror (errno)));
+      FATAL_f (stderr, gettext("couldn't close output file \"%s\": %s"),
+	      output_file, strerror (errno));
 
   /* We do not reset <ofp> since its value is needed in diagnostigs. */
 }
@@ -1902,7 +1902,7 @@ handle_env_options (char *var)
   if (string == NULL)
     return;
 
-  MESSAGE (2, (stderr, "handle_env_options(): %s=\"%s\"\n", var, string));
+  MESSAGE_f (2, stderr, "handle_env_options(): %s=\"%s\"\n", var, string);
 
   /* Copy string so we can modify it in place. */
   str = xstrdup (string);
@@ -1940,8 +1940,8 @@ handle_env_options (char *var)
 	  for (; str[i] && str[i] != endch; i++)
 	    ;
 	  if (!str[i])
-	    FATAL ((stderr, _("syntax error in option string %s=\"%s\":\n\
-missing end of quotation: %c"), var, string, endch));
+	    FATAL_f (stderr, gettext("syntax error in option string %s=\"%s\":\n\
+missing end of quotation: %c"), var, string, endch);
 
 	  str[i++] = '\0';
 	}
@@ -1960,9 +1960,9 @@ missing end of quotation: %c"), var, string, endch));
   /* argv[argc] must be NULL. */
   argv[argc] = NULL;
 
-  MESSAGE (2, (stderr, "found following options (argc=%d):\n", argc));
+  MESSAGE_f (2, stderr, "found following options (argc=%d):\n", argc);
   for (i = 0; i < argc; i++)
-    MESSAGE (2, (stderr, "%3d = \"%s\"\n", i, argv[i]));
+    MESSAGE_f (2, stderr, "%3d = \"%s\"\n", i, argv[i]);
 
   /* Process options. */
   handle_options (argc, argv);
@@ -1970,14 +1970,14 @@ missing end of quotation: %c"), var, string, endch));
   /* Check that all got processed. */
   if (optind != argc)
     {
-      MESSAGE (0,
-	       (stderr,
-		_("warning: didn't process following options from \
+      MESSAGE_f (0,
+	       stderr,
+		gettext("warning: didn't process following options from \
 environment variable %s:\n"),
-		var));
+		var);
       for (; optind < argc; optind++)
-	MESSAGE (0, (stderr, _("  option %d = \"%s\"\n"), optind,
-		     argv[optind]));
+	MESSAGE_f (0, stderr, gettext("  option %d = \"%s\"\n"), optind,
+		     argv[optind]);
     }
 
   /* Cleanup. */
@@ -2021,8 +2021,8 @@ handle_options (int argc, char *argv[])
 	    {
 	      num_columns = atoi (optarg);
 	      if (num_columns < 1)
-		FATAL ((stderr,
-			_("number of columns must be larger than zero")));
+		FATAL_f (stderr,
+			gettext("number of columns must be larger than zero"));
 	    }
 	  break;
 
@@ -2080,7 +2080,7 @@ handle_options (int argc, char *argv[])
 	case 'A':		/* file alignment */
 	  file_align = atoi (optarg);
 	  if (file_align == 0)
-	    FATAL ((stderr, _("file alignment must be larger than zero")));
+	    FATAL_f (stderr, gettext("file alignment must be larger than zero"));
 	  break;
 
 	case 'b':		/* page header */
@@ -2105,7 +2105,7 @@ handle_options (int argc, char *argv[])
 	case 'P':
 	  xfree (printer);
 	  printer = xstrdup (optarg);
-	  output_file = OUTPUT_FILE_NONE;
+	  output_file = ((void *)OUTPUT_FILE_NONE);
 	  break;
 
 	case 'D':		/* setpagedevice */
@@ -2135,13 +2135,13 @@ handle_options (int argc, char *argv[])
 
 	case 'f':		/* font */
 	  if (!parse_font_spec (optarg, &Fname, &Fpt, NULL))
-	    FATAL ((stderr, _("malformed font spec: %s"), optarg));
+	    FATAL_f (stderr, gettext("malformed font spec: %s"), optarg);
 	  user_body_font_defined = 1;
 	  break;
 
 	case 'F':		/* header font */
 	  if (!parse_font_spec (optarg, &HFname, &HFpt, NULL))
-	    FATAL ((stderr, _("malformed font spec: %s"), optarg));
+	    FATAL_f (stderr, gettext("malformed font spec: %s"), optarg);
 	  break;
 
 	case 'g':		/* print anyway */
@@ -2156,9 +2156,9 @@ handle_options (int argc, char *argv[])
 	    fancy_header_name = fancy_header_default;
 
 	  if (!file_existsp (fancy_header_name, ".hdr"))
-	    FATAL ((stderr,
-		    _("couldn't find header definition file \"%s.hdr\""),
-		    fancy_header_name));
+	    FATAL_f (stderr,
+		    gettext("couldn't find header definition file \"%s.hdr\""),
+		    fancy_header_name);
 	  break;
 
 	case 'h':		/* no job header */
@@ -2200,9 +2200,9 @@ handle_options (int argc, char *argv[])
 	case 'L':		/* lines per page */
 	  lines_per_page = atoi (optarg);
 	  if (lines_per_page <= 0)
-	    FATAL ((stderr,
-		    _("must print at least one line per each page: %s"),
-		    argv[optind]));
+	    FATAL_f (stderr,
+		    gettext("must print at least one line per each page: %s"),
+		    argv[optind]);
 	  break;
 
 	case 'm':		/* send mail upon completion */
@@ -2221,7 +2221,7 @@ handle_options (int argc, char *argv[])
 	case 'N':		/* newline character */
 	  if (!(optarg[0] == 'n' || optarg[0] == 'r') || optarg[1] != '\0')
 	    {
-	      fprintf (stderr, _("%s: illegal newline character specifier: \
+	      fprintf (stderr, gettext("%s: illegal newline character specifier: \
 '%s': expected 'n' or 'r'\n"),
 		       program, optarg);
 	      goto option_error;
@@ -2236,7 +2236,7 @@ handle_options (int argc, char *argv[])
 	case 'p':		/* output file */
 	  /* Check output file "-". */
 	  if (strcmp (optarg, "-") == 0)
-	    output_file = OUTPUT_FILE_STDOUT;
+	    output_file = ((char *)OUTPUT_FILE_STDOUT);
 	  else
 	    output_file = optarg;
 	  break;
@@ -2309,15 +2309,15 @@ handle_options (int argc, char *argv[])
 	case 'W':		/* a helper application option */
 	  cp = strchr (optarg, ',');
 	  if (cp == NULL)
-	    FATAL ((stderr,
-		    _("malformed argument `%s' for option -W, --option: \
+	    FATAL_f (stderr,
+		    gettext("malformed argument `%s' for option -W, --option: \
 no comma found"),
-		      optarg));
+		      optarg);
 
 	  if (cp - optarg != 1)
-	    FATAL ((stderr, _("helper application specification must be \
+	    FATAL_f (stderr, gettext("helper application specification must be \
 single character: %s"),
-			      optarg));
+			      optarg);
 
 	  /* Take the index of the helper application and update `cp'
              to point to the beginning of the option. */
@@ -2352,7 +2352,7 @@ single character: %s"),
 
 	case 128:		/* underlay font */
 	  if (!parse_font_spec (optarg, &ul_font, &ul_ptsize, NULL))
-	    FATAL ((stderr, _("malformed font spec: %s"), optarg));
+	    FATAL_f (stderr, gettext("malformed font spec: %s"), optarg);
 	  break;
 
 	case 129:		/* underlay gray */
@@ -2411,7 +2411,7 @@ single character: %s"),
 	  slicing = 1;
 	  slice = atoi (optarg);
 	  if (slice <= 0)
-	    FATAL ((stderr, _("slice must be greater than zero")));
+	    FATAL_f (stderr, gettext("slice must be greater than zero"));
 	  break;
 
 	case 141:		/* help-highlight */
@@ -2492,7 +2492,7 @@ single character: %s"),
 
 	case '?':		/* Errors found during getopt_long(). */
 	option_error:
-	  fprintf (stderr, _("Try `%s --help' for more information.\n"),
+	  fprintf (stderr, gettext("Try `%s --help' for more information.\n"),
 		   program);
 	  exit (1);
 	  break;
@@ -2502,7 +2502,7 @@ single character: %s"),
 	  if (optarg)
 	    printf (" with arg %s", optarg);
 	  printf ("\n");
-	  FATAL ((stderr, "This is a bug!"));
+	  FATAL_f (stderr, "This is a bug!");
 	  break;
 	}
     }
@@ -2512,7 +2512,7 @@ single character: %s"),
 static void
 usage ()
 {
-  printf (_("\
+  printf (gettext("\
 Usage: %s [OPTION]... [FILE]...\n\
 Mandatory arguments to long options are mandatory for short options too.\n\
   -#                         an alias for option -n, --copies\n\
@@ -2532,10 +2532,10 @@ Mandatory arguments to long options are mandatory for short options too.\n\
   -e[CHAR], --escapes[=CHAR]       enable special escape interpretation\n"),
           program);
 
-  printf (_("\
+  printf (gettext("\
   -E[LANG], --highlight[=LANG]     highlight source code\n"));
 
-  printf (_("\
+  printf (gettext("\
   -f, --font=NAME            use font NAME for body text\n\
   -F, --header-font=NAME     use font NAME for header texts\n\
   -g, --print-anyway         nothing (compatibility option)\n\
@@ -2553,7 +2553,7 @@ Mandatory arguments to long options are mandatory for short options too.\n\
                                --lines-per-page=66, --no-header, --portrait,\n\
                                --columns=1\n"));
 
-  printf (_("\
+  printf (gettext("\
   -L, --lines-per-page=NUM   specify how many lines are printed on each page\n\
   -m, --mail                 send mail upon completion\n\
   -M, --media=NAME           use output media NAME\n\
@@ -2569,7 +2569,7 @@ Mandatory arguments to long options are mandatory for short options too.\n\
   -r, --landscape            print in landscape mode\n\
   -R, --portrait             print in portrait mode\n"));
 
-  printf (_("\
+  printf (gettext("\
   -s, --baselineskip=NUM     set baselineskip to NUM\n\
   -S, --statusdict=KEY[:VALUE]\n\
                              pass a statusdict definition to the output\n\
@@ -2587,7 +2587,7 @@ Mandatory arguments to long options are mandatory for short options too.\n\
   -Z, --pass-through         pass through PostScript and PCL files\n\
                              without any modifications\n"));
 
-  printf (_("Long-only options:\n\
+  printf (gettext("Long-only options:\n\
   --color[=bool]             create color outputs with states\n\
   --continuous-page-numbers  count page numbers across input files.  Don't\n\
                              restart numbering at beginning of each file.\n\
@@ -2598,7 +2598,7 @@ Mandatory arguments to long options are mandatory for short options too.\n\
   --h-column-height=HEIGHT   set the horizontal column height to HEIGHT\n\
   --help                     print this help and exit\n"));
 
-  printf (_("\
+  printf (gettext("\
   --help-highlight           describe all supported --highlight languages\n\
                              and file formats\n\
   --highlight-bar-gray=NUM   print highlight bars with gray NUM (0 - 1)\n\
@@ -2609,7 +2609,7 @@ Mandatory arguments to long options are mandatory for short options too.\n\
                              mark wrapped lines in the output with STYLE\n\
   --non-printable-format=FMT specify how non-printable chars are printed\n"));
 
-  printf (_("\
+  printf (gettext("\
   --nup-columnwise           layout pages in the N-up printing columnwise\n\
   --nup-xpad=NUM             set the page x-padding of N-up printing to NUM\n\
   --nup-ypad=NUM             set the page y-padding of N-up printing to NUM\n\
@@ -2619,7 +2619,7 @@ Mandatory arguments to long options are mandatory for short options too.\n\
   --printer-options=OPTIONS  pass extra options to the printer command\n\
   --rotate-even-pages        rotate even-numbered pages 180 degrees\n"));
 
-  printf (_("\
+  printf (gettext("\
   --slice=NUM                print vertical slice NUM\n\
   --style=STYLE              use highlight style STYLE\n\
   --swap-even-page-margins   swap left and right side margins for each even\n\
@@ -2633,7 +2633,7 @@ Mandatory arguments to long options are mandatory for short options too.\n\
   --word-wrap                wrap long lines from word boundaries\n\
 "));
 
-  printf (_("\nReport bugs to <%s>.\n"), PACKAGE_BUGREPORT);
+  printf (gettext("\nReport bugs to <%s>.\n"), PACKAGE_BUGREPORT);
 }
 
 
diff --git a/src/mkafmmap.c b/src/mkafmmap.c
index 7632e6e..becd7cf 100644
--- a/src/mkafmmap.c
+++ b/src/mkafmmap.c
@@ -37,7 +37,6 @@
 #endif
 
 #include "gettext.h"
-#define _(String) gettext (String)
 
 #if HAVE_LC_MESSAGES
 #include <locale.h>
@@ -47,20 +46,6 @@
 #include "getopt.h"
 
 
-/*
- * Definitions.
- */
-
-#define HANDLE_ERROR(msg)					\
-  if (error != AFM_SUCCESS)					\
-    {								\
-      char buf[256];						\
-      afm_error_to_string (error, buf);				\
-      fprintf (stderr, "%s: %s: %s\n", program, msg, buf);	\
-      exit (1);							\
-    }
-
-
 /*
  * Prototypes for static functions.
  */
@@ -85,6 +70,20 @@ static char *fname = "font.map";
 
 static char *program;
 
+/*
+ * Definitions.
+ */
+
+static void HANDLE_ERROR(const char *msg, AFMError error) {
+  if (error != AFM_SUCCESS)
+  {
+    char buf[256];
+    afm_error_to_string(error, buf);
+    fprintf(stderr, "%s: %s: %sn", program, msg, buf);
+    exit(1);
+  }
+}
+
 static struct option long_options[] =
 {
   {"output-file",	required_argument,	0, 'p'},
@@ -164,7 +163,7 @@ main (int argc, char *argv[])
     }
 
   /* Open output file. */
-  printf (_("file=%s\n"), fname ? fname : _("stdout"));
+  printf (gettext("file=%s\n"), fname ? fname : gettext("stdout"));
   if (fname)
     {
       ofp = fopen (fname, "w");
@@ -172,7 +171,7 @@ main (int argc, char *argv[])
 	{
 	  char buf[256];
 
-	  sprintf (buf, _("%s: couldn't open output file \"%s\""),
+	  sprintf (buf, gettext("%s: couldn't open output file \"%s\""),
 		   program, fname);
 	  perror (buf);
 	  exit (1);
@@ -186,7 +185,7 @@ main (int argc, char *argv[])
     }
 
   error = afm_create (NULL, 0, &afm);
-  HANDLE_ERROR (_("couldn't create AFM library"));
+  HANDLE_ERROR (gettext("couldn't create AFM library"), error);
 
   for (i = optind; i < argc; i++)
     {
@@ -235,7 +234,7 @@ main (int argc, char *argv[])
 static void
 usage ()
 {
-  printf (_("\
+  printf (gettext("\
 Usage: %s [OPTION]... FILE...\n\
 Mandatory arguments to long options are mandatory for short options too.\n\
   -h, --help              print this help and exit\n\
diff --git a/src/psgen.c b/src/psgen.c
index 21e4c75..0b8ff10 100644
--- a/src/psgen.c
+++ b/src/psgen.c
@@ -33,33 +33,35 @@
 /* Values for token flags. */
 
 /* EPSF. */
-#define F_EPSF_CENTER			0x01
-#define F_EPSF_RIGHT			0x02
-#define M_EPSF_JUSTIFICATION		0x03
+enum {
+	F_EPSF_CENTER = 0x01,
+	F_EPSF_RIGHT = 0x02,
+	M_EPSF_JUSTIFICATION = 0x03,
 
-#define F_EPSF_NO_CPOINT_UPDATE_X	0x04
-#define F_EPSF_NO_CPOINT_UPDATE_Y	0x08
+	F_EPSF_NO_CPOINT_UPDATE_X = 0x04,
+	F_EPSF_NO_CPOINT_UPDATE_Y = 0x08,
 
-#define F_EPSF_ABSOLUTE_X		0x10
-#define F_EPSF_ABSOLUTE_Y		0x20
+	F_EPSF_ABSOLUTE_X = 0x10,
+	F_EPSF_ABSOLUTE_Y = 0x20,
 
-#define F_EPSF_SCALE_X			0x40
-#define F_EPSF_SCALE_Y			0x80
+	F_EPSF_SCALE_X = 0x40,
+	F_EPSF_SCALE_Y = 0x80
+};
 
 
 /* Predicate to check if we are at the correct slice. */
-#define CORRECT_SLICE() (slicing == 0 || current_slice == slice)
+static int CORRECT_SLICE(unsigned int current_slice) { return (slicing == 0 || current_slice == slice); }
 
 /* Predicates for the current body font. */
 
 /* Is character <ch> printable. */
-#define ISPRINT(ch) (font_ctype[(unsigned char) (ch)] != ' ')
+static int ISPRINT(int ch) { return (font_ctype[(unsigned char) (ch)] != ' '); }
 
 /* Does character <ch> exist in current body font? */
-#define EXISTS(ch) (font_ctype[(unsigned char) (ch)] == '*')
+static int EXISTS(int ch) { return (font_ctype[(unsigned char) (ch)] == '*'); }
 
 
-#define RESOURCE_LINE_WIDTH 75
+enum { RESOURCE_LINE_WIDTH = 75 };
 
 /* Token types. */
 typedef enum
@@ -150,11 +152,9 @@ typedef struct gs_token_st Token;
  * Prototypes for static functions.
  */
 
-static void get_next_token ___P ((InputStream *is, double linestart,
-				  double linepos, unsigned int col,
-				  double linew, Token *token));
+static void_InputStreamp_double_double_unsigned_int_double_Tokenp get_next_token;
 
-static void dump_ps_page_header ___P ((char *fname, int empty));
+static void_charp_int dump_ps_page_header;
 
 static void dump_ps_page_trailer ();
 
@@ -166,19 +166,19 @@ static void dump_empty_page ();
  * the PostScript magic `%!' and it has a valid `%%BoundingBox' DSC
  * comment.
  */
-static int recognize_eps_file ___P ((Token *token));
+static int_Tokenp recognize_eps_file;
 
 /*
  * Insert EPS file described by <token> to the output stream.
  */
-static void paste_epsf ___P ((Token *token));
+static void_Tokenp paste_epsf;
 
 /*
  * Check if InputStream <is> contains a file which can be passed
  * through without any modifications.  Returns 1 if file was passed or
  * 0 otherwise.
  */
-static int do_pass_through ___P ((char *fname, InputStream *is));
+static int_charp_InputStreamp do_pass_through;
 
 /*
  * Read one float dimension from InputStream <is>.  If <units> is
@@ -186,23 +186,16 @@ static int do_pass_through ___P ((char *fname, InputStream *is));
  * <horizontal> is true, dimension is horizontal, otherwise it is
  * vertical (this is used to find out how big `line' units are).
  */
-static double read_float ___P ((InputStream *is, int units, int horizontal));
+static double_InputStreamp_int_int read_float;
 
 /*
  * Print linenumber <linenum> to the beginning of the current line.
  * Current line start is specified by point (x, y).
  */
-static void print_line_number ___P ((double x, double y, double space,
-				     double margin, unsigned int linenum));
+static void_double_double_double_double_unsigned_int print_line_number;
 
 /* Send PostScript to the output file. */
-#define OUTPUT(body)	\
-  do {			\
-    if (cofp == NULL)	\
-      cofp = ofp;	\
-    if (do_print)	\
-      fprintf body;	\
-  } while (0)
+static void OUTPUT_f(FILE **file, const char *format, ...);
 
 /* Divert output to tmp file so the total page count can be counted. */
 static void divert ();
@@ -297,57 +290,57 @@ dump_ps_header ()
    * Header.
    */
 
-  OUTPUT ((cofp, "%s\n", output_first_line));
-  OUTPUT ((cofp, "%%%%BoundingBox: %d %d %d %d\n", media->llx, media->lly,
-	   media->urx, media->ury));
-  OUTPUT ((cofp, "%%%%Title: %s\n", title));
-  OUTPUT ((cofp, "%%%%For: %s\n", passwd->pw_gecos));
-  OUTPUT ((cofp, "%%%%Creator: %s\n", PACKAGE_STRING));
-  OUTPUT ((cofp, "%%%%CreationDate: %s\n", date_string));
-  OUTPUT ((cofp, "%%%%Orientation: %s\n",
+  OUTPUT_f (&cofp, "%s\n", output_first_line);
+  OUTPUT_f (&cofp, "%%%%BoundingBox: %d %d %d %d\n", media->llx, media->lly,
+	   media->urx, media->ury);
+  OUTPUT_f (&cofp, "%%%%Title: %s\n", title);
+  OUTPUT_f (&cofp, "%%%%For: %s\n", passwd->pw_gecos);
+  OUTPUT_f (&cofp, "%%%%Creator: %s\n", PACKAGE_STRING);
+  OUTPUT_f (&cofp, "%%%%CreationDate: %s\n", date_string);
+  OUTPUT_f (&cofp, "%%%%Orientation: %s\n",
 	   ((nup > 1) && nup_landscape)
-	   || ((nup == 1) && landscape) ? "Landscape" : "Portrait"));
-  OUTPUT ((cofp, "%%%%Pages: (atend)\n"));
-  OUTPUT ((cofp, "%%%%DocumentMedia: %s %d %d 0 () ()\n",
-	   media->name, media->w, media->h));
-  OUTPUT ((cofp, "%%%%DocumentNeededResources: (atend)\n"));
+	   || ((nup == 1) && landscape) ? "Landscape" : "Portrait");
+  OUTPUT_f (&cofp, "%%%%Pages: (atend)\n");
+  OUTPUT_f (&cofp, "%%%%DocumentMedia: %s %d %d 0 () ()\n",
+	   media->name, media->w, media->h);
+  OUTPUT_f (&cofp, "%%%%DocumentNeededResources: (atend)\n");
 
   if (count_key_value_set (pagedevice) > 0)
-    OUTPUT ((cofp, "%%%%LanguageLevel: 2\n"));
+    OUTPUT_f (&cofp, "%%%%LanguageLevel: 2\n");
 
-  OUTPUT ((cofp, "%%%%EndComments\n"));
+  OUTPUT_f (&cofp, "%%%%EndComments\n");
 
 
   /*
    * Procedure Definitions.
    */
 
-  OUTPUT ((cofp, "%%%%BeginProlog\n"));
+  OUTPUT_f (&cofp, "%%%%BeginProlog\n");
 
   /* Prolog. */
-  OUTPUT ((cofp, "%%%%BeginResource: procset Enscript-Prolog %s\n",
-	   ps_version_string));
+  OUTPUT_f (&cofp, "%%%%BeginResource: procset Enscript-Prolog %s\n",
+	   ps_version_string);
   if (!paste_file ("enscript", ".pro"))
-    FATAL ((stderr, _("couldn't find prolog \"%s\": %s\n"), "enscript.pro",
-	    strerror (errno)));
-  OUTPUT ((cofp, "%%%%EndResource\n"));
+    FATAL_f (stderr, gettext("couldn't find prolog \"%s\": %s\n"), "enscript.pro",
+	    strerror (errno));
+  OUTPUT_f (&cofp, "%%%%EndResource\n");
 
   /* Encoding vector. */
-  OUTPUT ((cofp, "%%%%BeginResource: procset Enscript-Encoding-%s %s\n",
-	   encoding_name, ps_version_string));
+  OUTPUT_f (&cofp, "%%%%BeginResource: procset Enscript-Encoding-%s %s\n",
+	   encoding_name, ps_version_string);
   if (!paste_file (encoding_name, ".enc"))
-    FATAL ((stderr, _("couldn't find encoding file \"%s.enc\": %s\n"),
-	    encoding_name, strerror (errno)));
-  OUTPUT ((cofp, "%%%%EndResource\n"));
+    FATAL_f (stderr, gettext("couldn't find encoding file \"%s.enc\": %s\n"),
+	    encoding_name, strerror (errno));
+  OUTPUT_f (&cofp, "%%%%EndResource\n");
 
-  OUTPUT ((cofp, "%%%%EndProlog\n"));
+  OUTPUT_f (&cofp, "%%%%EndProlog\n");
 
 
   /*
    * Document Setup.
    */
 
-  OUTPUT ((cofp, "%%%%BeginSetup\n"));
+  OUTPUT_f (&cofp, "%%%%BeginSetup\n");
 
   /* Download fonts. */
   for (got = strhash_get_first (download_fonts, &cp, &j, (void **) &cp2); got;
@@ -357,50 +350,50 @@ dump_ps_header ()
   /* For each required font, emit %%IncludeResouce comment. */
   for (got = strhash_get_first (res_fonts, &cp, &j, (void **) &cp2); got;
        got = strhash_get_next (res_fonts, &cp, &j, (void **) &cp2))
-    OUTPUT ((cofp, "%%%%IncludeResource: font %s\n", cp));
+    OUTPUT_f (&cofp, "%%%%IncludeResource: font %s\n", cp);
 
-  OUTPUT ((cofp, "/HFpt_w %g def\n", HFpt.w));
-  OUTPUT ((cofp, "/HFpt_h %g def\n", HFpt.h));
+  OUTPUT_f (&cofp, "/HFpt_w %g def\n", HFpt.w);
+  OUTPUT_f (&cofp, "/HFpt_h %g def\n", HFpt.h);
 
 
   /* Select our fonts. */
 
   /* Header font HF. */
-  OUTPUT ((cofp, "/%s /HF-gs-font MF\n", HFname));
-  OUTPUT ((cofp,
-	   "/HF /HF-gs-font findfont [HFpt_w 0 0 HFpt_h 0 0] makefont def\n"));
+  OUTPUT_f (&cofp, "/%s /HF-gs-font MF\n", HFname);
+  OUTPUT_f (&cofp,
+	   "/HF /HF-gs-font findfont [HFpt_w 0 0 HFpt_h 0 0] makefont def\n");
 
   /* Our default typing font F. */
-  OUTPUT ((cofp, "/%s /F-gs-font MF\n", Fname));
-  OUTPUT ((cofp, "/F-gs-font %g %g SF\n", Fpt.w, Fpt.h));
+  OUTPUT_f (&cofp, "/%s /F-gs-font MF\n", Fname);
+  OUTPUT_f (&cofp, "/F-gs-font %g %g SF\n", Fpt.w, Fpt.h);
 
   /* Underlay. */
   if (underlay != NULL)
     {
-      OUTPUT ((cofp, "/ul_str (%s) def\n", underlay));
-      OUTPUT ((cofp, "/ul_w_ptsize %g def\n", ul_ptsize.w));
-      OUTPUT ((cofp, "/ul_h_ptsize %g def\n", ul_ptsize.h));
-      OUTPUT ((cofp, "/ul_gray %g def\n", ul_gray));
-      OUTPUT ((cofp, "/ul_x %g def\n", ul_x));
-      OUTPUT ((cofp, "/ul_y %g def\n", ul_y));
-      OUTPUT ((cofp, "/ul_angle %g def\n", ul_angle));
-      OUTPUT ((cofp, "/ul_style %d def\n", ul_style));
-      OUTPUT ((cofp, "/%s /F-ul-font MF\n", ul_font));
-      OUTPUT ((cofp, "/ul_font /F-ul-font findfont \
-[ul_w_ptsize 0 0 ul_h_ptsize 0 0] makefont def\n"));
+      OUTPUT_f (&cofp, "/ul_str (%s) def\n", underlay);
+      OUTPUT_f (&cofp, "/ul_w_ptsize %g def\n", ul_ptsize.w);
+      OUTPUT_f (&cofp, "/ul_h_ptsize %g def\n", ul_ptsize.h);
+      OUTPUT_f (&cofp, "/ul_gray %g def\n", ul_gray);
+      OUTPUT_f (&cofp, "/ul_x %g def\n", ul_x);
+      OUTPUT_f (&cofp, "/ul_y %g def\n", ul_y);
+      OUTPUT_f (&cofp, "/ul_angle %g def\n", ul_angle);
+      OUTPUT_f (&cofp, "/ul_style %d def\n", ul_style);
+      OUTPUT_f (&cofp, "/%s /F-ul-font MF\n", ul_font);
+      OUTPUT_f (&cofp, "/ul_font /F-ul-font findfont \
+[ul_w_ptsize 0 0 ul_h_ptsize 0 0] makefont def\n");
     }
 
   /* Number of copies. */
-  OUTPUT ((cofp, "/#copies %d def\n", num_copies));
+  OUTPUT_f (&cofp, "/#copies %d def\n", num_copies);
 
   /* Page prefeed. */
   if (page_prefeed)
-    OUTPUT ((cofp, "true page_prefeed\n"));
+    OUTPUT_f (&cofp, "true page_prefeed\n");
 
   /* Statusdict definitions. */
   if (count_key_value_set (statusdict) > 0)
     {
-      OUTPUT ((cofp, "%% Statustdict definitions:\nstatusdict begin\n  "));
+      OUTPUT_f (&cofp, "%% Statustdict definitions:\nstatusdict begin\n  ");
       i = 2;
       for (got = strhash_get_first (statusdict, &cp, &j, (void **) &cp2); got;
 	   got = strhash_get_next (statusdict, &cp, &j, (void **) &cp2))
@@ -408,21 +401,21 @@ dump_ps_header ()
 	  j = strlen (cp) + 1 + strlen (cp2) + 1;
 	  if (i + j > RESOURCE_LINE_WIDTH)
 	    {
-	      OUTPUT ((cofp, "\n  "));
+	      OUTPUT_f (&cofp, "\n  ");
 	      i = 2;
 	    }
-	  OUTPUT ((cofp, "%s %s ", cp2, cp));
+	  OUTPUT_f (&cofp, "%s %s ", cp2, cp);
 	  i += j;
 	}
-      OUTPUT ((cofp, "\nend\n"));
+      OUTPUT_f (&cofp, "\nend\n");
     }
 
   /* Page device definitions. */
   if (pslevel >= 2 &&
       (count_key_value_set (pagedevice) > 0 || generate_PageSize))
     {
-      OUTPUT ((cofp, "%% Pagedevice definitions:\n"));
-      OUTPUT ((cofp, "gs_languagelevel 1 gt {\n  <<\n    "));
+      OUTPUT_f (&cofp, "%% Pagedevice definitions:\n");
+      OUTPUT_f (&cofp, "gs_languagelevel 1 gt {\n  <<\n    ");
 
       i = 4;
       for (got = strhash_get_first (pagedevice, &cp, &j, (void **) &cp2); got;
@@ -431,10 +424,10 @@ dump_ps_header ()
 	  j = strlen (cp2) + 1 + strlen (cp) + 2;
 	  if (i + j > RESOURCE_LINE_WIDTH)
 	    {
-	      OUTPUT ((cofp, "\n    "));
+	      OUTPUT_f (&cofp, "\n    ");
 	      i = 4;
 	    }
-	  OUTPUT ((cofp, "/%s %s ", cp, cp2));
+	  OUTPUT_f (&cofp, "/%s %s ", cp, cp2);
 	  i += j;
 	}
 
@@ -442,14 +435,14 @@ dump_ps_header ()
 	{
 	  if (i + 21 > RESOURCE_LINE_WIDTH)
 	    {
-	      OUTPUT ((cofp, "\n    "));
+	      OUTPUT_f (&cofp, "\n    ");
 	      i = 4;
 	    }
-	  OUTPUT ((cofp, "/PageSize [%d %d] ", media->w, media->h));
+	  OUTPUT_f (&cofp, "/PageSize [%d %d] ", media->w, media->h);
 	  i += 21;
 	}
 
-      OUTPUT ((cofp, "\n  >> setpagedevice\n} if\n"));
+      OUTPUT_f (&cofp, "\n  >> setpagedevice\n} if\n");
     }
 
   /*
@@ -464,13 +457,13 @@ dump_ps_header ()
       else
 	hdr = fancy_header_name;
 
-      OUTPUT ((cofp, "%%%%BeginResource: procset Enscript-Header-%s %s\n",
-	       hdr, ps_version_string));
+      OUTPUT_f (&cofp, "%%%%BeginResource: procset Enscript-Header-%s %s\n",
+	       hdr, ps_version_string);
       if (!paste_file (hdr, ".hdr"))
-	FATAL ((stderr,
-		_("couldn't find header definition file \"%s.hdr\": %s\n"),
-		hdr, strerror (errno)));
-      OUTPUT ((cofp, "%%%%EndResource\n"));
+	FATAL_f (stderr,
+		gettext("couldn't find header definition file \"%s.hdr\": %s\n"),
+		hdr, strerror (errno));
+      OUTPUT_f (&cofp, "%%%%EndResource\n");
     }
 
   /*
@@ -481,24 +474,24 @@ dump_ps_header ()
   d_output_h = d_page_h - d_header_h - d_footer_h;
 
   /* Dump our current dynamic state. */
-  OUTPUT ((cofp, "/d_page_w %d def\n", d_page_w));
-  OUTPUT ((cofp, "/d_page_h %d def\n", d_page_h));
+  OUTPUT_f (&cofp, "/d_page_w %d def\n", d_page_w);
+  OUTPUT_f (&cofp, "/d_page_h %d def\n", d_page_h);
 
-  OUTPUT ((cofp, "/d_header_x %d def\n", 0));
-  OUTPUT ((cofp, "/d_header_y %d def\n", d_output_h + d_footer_h));
-  OUTPUT ((cofp, "/d_header_w %d def\n", d_header_w));
-  OUTPUT ((cofp, "/d_header_h %d def\n", d_header_h));
+  OUTPUT_f (&cofp, "/d_header_x %d def\n", 0);
+  OUTPUT_f (&cofp, "/d_header_y %d def\n", d_output_h + d_footer_h);
+  OUTPUT_f (&cofp, "/d_header_w %d def\n", d_header_w);
+  OUTPUT_f (&cofp, "/d_header_h %d def\n", d_header_h);
 
-  OUTPUT ((cofp, "/d_footer_x %d def\n", 0));
-  OUTPUT ((cofp, "/d_footer_y %d def\n", 0));
-  OUTPUT ((cofp, "/d_footer_w %d def\n", d_header_w));
-  OUTPUT ((cofp, "/d_footer_h %d def\n", d_footer_h));
+  OUTPUT_f (&cofp, "/d_footer_x %d def\n", 0);
+  OUTPUT_f (&cofp, "/d_footer_y %d def\n", 0);
+  OUTPUT_f (&cofp, "/d_footer_w %d def\n", d_header_w);
+  OUTPUT_f (&cofp, "/d_footer_h %d def\n", d_footer_h);
 
-  OUTPUT ((cofp, "/d_output_w %d def\n", d_output_w));
-  OUTPUT ((cofp, "/d_output_h %d def\n", d_output_h));
-  OUTPUT ((cofp, "/cols %d def\n", num_columns));
+  OUTPUT_f (&cofp, "/d_output_w %d def\n", d_output_w);
+  OUTPUT_f (&cofp, "/d_output_h %d def\n", d_output_h);
+  OUTPUT_f (&cofp, "/cols %d def\n", num_columns);
 
-  OUTPUT ((cofp, "%%%%EndSetup\n"));
+  OUTPUT_f (&cofp, "%%%%EndSetup\n");
 }
 
 
@@ -518,34 +511,34 @@ dump_ps_trailer ()
   nup_subpage = (total_pages - 1) % nup;
   if (nup > 1 && nup_subpage + 1 != nup)
     /* N-up showpage missing. */
-    OUTPUT ((cofp, "_R\nS\n"));
+    OUTPUT_f (&cofp, "_R\nS\n");
 
   /* Trailer. */
 
-  OUTPUT ((cofp, "%%%%Trailer\n"));
+  OUTPUT_f (&cofp, "%%%%Trailer\n");
 
   if (page_prefeed)
-    OUTPUT ((cofp, "false page_prefeed\n"));
+    OUTPUT_f (&cofp, "false page_prefeed\n");
 
-  OUTPUT ((cofp, "%%%%Pages: %d\n", total_pages));
+  OUTPUT_f (&cofp, "%%%%Pages: %d\n", total_pages);
 
   /* Document needed resources. */
 
   /* fonts. */
-  OUTPUT ((cofp, "%%%%DocumentNeededResources: font "));
+  OUTPUT_f (&cofp, "%%%%DocumentNeededResources: font ");
   i = 32;			/* length of the previous string. */
   for (got = strhash_get_first (res_fonts, &cp, &j, &value); got;
        got = strhash_get_next (res_fonts, &cp, &j, &value))
     {
       if (i + strlen (cp) + 1 > RESOURCE_LINE_WIDTH)
 	{
-	  OUTPUT ((cofp, "\n%%%%+ font "));
+	  OUTPUT_f (&cofp, "\n%%%%+ font ");
 	  i = 9;		/* length of the previous string. */
 	}
-      OUTPUT ((cofp, "%s ", cp));
+      OUTPUT_f (&cofp, "%s ", cp);
       i += strlen (cp) + 1;
     }
-  OUTPUT ((cofp, "\n%%%%EOF\n"));
+  OUTPUT_f (&cofp, "\n%%%%EOF\n");
 }
 
 
@@ -585,8 +578,8 @@ process_file (char *fname_arg, InputStream *is, int is_toc)
    * Count possible line number spaces.  This should be enought for 99999
    * lines
    */
-  linenumber_space = CHAR_WIDTH ('0') * 5 + 1.0;
-  linenumber_margin = CHAR_WIDTH (':') + CHAR_WIDTH ('m');
+  linenumber_space = CHAR_WIDTH_char ('0', font_widths) * 5 + 1.0;
+  linenumber_margin = CHAR_WIDTH_char (':', font_widths) + CHAR_WIDTH_char ('m', font_widths);
 
   /* We got a new input file. */
   input_filenum++;
@@ -612,7 +605,7 @@ process_file (char *fname_arg, InputStream *is, int is_toc)
       dump_empty_page ();
     }
 
-  MESSAGE (1, (stderr, _("processing file \"%s\"...\n"), fname));
+  MESSAGE_f (1, stderr, gettext("processing file \"%s\"...\n"), fname);
 
   linewidth = d_output_w / num_columns - 2 * d_output_x_margin
     - line_indent;
@@ -640,7 +633,7 @@ process_file (char *fname_arg, InputStream *is, int is_toc)
 	    + line_indent;
 	  lineend = lx + linewidth;
 
-	  ly = y = d_footer_h + d_output_h - d_output_y_margin - LINESKIP;
+	  ly = y = d_footer_h + d_output_h - d_output_y_margin - LINESKIP();
 	  current_linenum = 0;
 	  line_column = 0;
 
@@ -733,11 +726,11 @@ process_file (char *fname_arg, InputStream *is, int is_toc)
 
 	      /* Print line highlight. */
 	      if (line_column == 0 && line_highlight_gray < 1.0)
-		OUTPUT ((cofp, "%g %g %g %g %g line_highlight\n",
+		OUTPUT_f (&cofp, "%g %g %g %g %g line_highlight\n",
 			 lx, (y - baselineskip
 			      + (font_bbox_lly * Fpt.h / UNITS_PER_POINT)),
 			 linewidth, Fpt.h + baselineskip,
-			 line_highlight_gray));
+			 line_highlight_gray);
 
 	      /* Print line numbers if needed. */
 	      if (line_numbers && line_column == 0 && token.type != tFORMFEED)
@@ -778,32 +771,32 @@ process_file (char *fname_arg, InputStream *is, int is_toc)
 		  break;
 
 		case tSTRING:
-		  if (CORRECT_SLICE ())
+		  if (CORRECT_SLICE (current_slice))
 		    {
 		      if (bggray < 1.0)
 			{
-			  OUTPUT ((cofp, "%g %g %g %g %g (%s) bgs\n", x, y,
+			  OUTPUT_f (&cofp, "%g %g %g %g %g (%s) bgs\n", x, y,
 				   Fpt.h + baselineskip,
 				   baselineskip
 				   - (font_bbox_lly * Fpt.h / UNITS_PER_POINT),
 				   bggray,
-				   token.u.str));
+				   token.u.str);
 			}
 		      else if (user_bgcolorp)
 			{
-			  OUTPUT ((cofp, "%g %g %g %g %g %g %g (%s) bgcs\n",
+			  OUTPUT_f (&cofp, "%g %g %g %g %g %g %g (%s) bgcs\n",
 				   x, y, Fpt.h + baselineskip,
 				   baselineskip
 				   - (font_bbox_lly * Fpt.h / UNITS_PER_POINT),
 				   user_bgcolor.r,
 				   user_bgcolor.g,
 				   user_bgcolor.b,
-				   token.u.str));
+				   token.u.str);
 			}
 		      else
 			{
-			  OUTPUT ((cofp, "%g %g M\n(%s) s\n", x, y,
-				   token.u.str));
+			  OUTPUT_f (&cofp, "%g %g M\n(%s) s\n", x, y,
+				   token.u.str);
 			}
 		    }
 		  x = token.new_x;
@@ -823,7 +816,7 @@ process_file (char *fname_arg, InputStream *is, int is_toc)
 		    {
 		      current_file_linenum++;
 		      current_slice = 1;
-		      y -= LINESKIP;
+		      y -= LINESKIP();
 		    }
 		  else
 		    {
@@ -838,15 +831,15 @@ process_file (char *fname_arg, InputStream *is, int is_toc)
 			      break;
 
 			    case MWLS_PLUS:
-			      OUTPUT ((cofp, "%g %g M (+) s\n", x, y));
+			      OUTPUT_f (&cofp, "%g %g M (+) s\n", x, y);
 			      break;
 
 			    default:
 			      /* Print some fancy graphics. */
-			      OUTPUT ((cofp,
+			      OUTPUT_f (&cofp,
 				       "%g %g %g %g %d wrapped_line_mark\n",
 				       x, y, Fpt.w, Fpt.h,
-				       mark_wrapped_lines_style));
+				       mark_wrapped_lines_style);
 			      break;
 			    }
 
@@ -854,7 +847,7 @@ process_file (char *fname_arg, InputStream *is, int is_toc)
 			   * For wrapped newlines, decrement y only if
 			   * we are not slicing the input.
 			   */
-			  y -= LINESKIP;
+			  y -= LINESKIP();
 			}
 
 		      /* Count the wrapped lines here. */
@@ -910,9 +903,9 @@ process_file (char *fname_arg, InputStream *is, int is_toc)
 			   * At the beginning of the column, warn user
 			   * and print image.
 			   */
-			  MESSAGE (0, (stderr, _("EPS file \"%s\" is too \
+			  MESSAGE_f (0, stderr, gettext("EPS file \"%s\" is too \
 large for page\n"),
-				       token.u.epsf.filename));
+				       token.u.epsf.filename);
 			}
 		      else
 			{
@@ -923,7 +916,7 @@ large for page\n"),
 		    }
 
 		  /* Do paste. */
-		  if (CORRECT_SLICE ())
+		  if (CORRECT_SLICE (current_slice))
 		    paste_epsf (&token);
 
 		  /* Update current point? */
@@ -959,7 +952,7 @@ large for page\n"),
 		       */
 		    }
 
-		  MESSAGE (2, (stderr, "^@font="));
+		  MESSAGE_f (2, stderr, "^@font=");
 		  if (token.u.font.name[0] == '\0')
 		    {
 		      /* Select the default font. */
@@ -967,7 +960,7 @@ large for page\n"),
 		      Fpt.h = default_Fpt.h;
 		      Fname = default_Fname;
 		      encoding = default_Fencoding;
-		      OUTPUT ((cofp, "/F-gs-font %g %g SF\n", Fpt.w, Fpt.h));
+		      OUTPUT_f (&cofp, "/F-gs-font %g %g SF\n", Fpt.w, Fpt.h);
 		      user_fontp = 0;
 		    }
 		  else
@@ -976,14 +969,14 @@ large for page\n"),
 				   strlen (token.u.font.name) + 1,
 				   NULL, NULL);
 		      if (token.u.font.encoding == default_Fencoding)
-			OUTPUT ((cofp, "/%s %g %g SUF\n", token.u.font.name,
-				 token.u.font.size.w, token.u.font.size.h));
+			OUTPUT_f (&cofp, "/%s %g %g SUF\n", token.u.font.name,
+				 token.u.font.size.w, token.u.font.size.h);
 		      else if (token.u.font.encoding == ENC_PS)
-			OUTPUT ((cofp, "/%s %g %g SUF_PS\n", token.u.font.name,
-				 token.u.font.size.w, token.u.font.size.h));
+			OUTPUT_f (&cofp, "/%s %g %g SUF_PS\n", token.u.font.name,
+				 token.u.font.size.w, token.u.font.size.h);
 		      else
-			FATAL ((stderr,
-				_("user font encoding can be only the system's default or `ps'")));
+			FATAL_f (stderr,
+				gettext("user font encoding can be only the system's default or `ps'"));
 
 		      memset  (user_font_name, 0, sizeof(user_font_name));
 		      strncpy (user_font_name, token.u.font.name, sizeof(user_font_name) - 1);
@@ -997,7 +990,7 @@ large for page\n"),
 		      Fname = user_font_name;
 		      encoding = user_font_encoding;
 		    }
-		  MESSAGE (2, (stderr, "%s %g/%gpt\n", Fname, Fpt.w, Fpt.h));
+		  MESSAGE_f (2, stderr, "%s %g/%gpt\n", Fname, Fpt.w, Fpt.h);
 		  read_font_info ();
 
 		  /*
@@ -1011,24 +1004,24 @@ large for page\n"),
 
 		case tCOLOR:
 		  /* Select a new color. */
-		  MESSAGE (2, (stderr, "^@color{%f %f %f}\n",
+		  MESSAGE_f (2, stderr, "^@color{%f %f %f}\n",
 			       token.u.color.r,
 			       token.u.color.g,
-			       token.u.color.b));
+			       token.u.color.b);
 		  if (token.u.color.r == token.u.color.g
 		      && token.u.color.g == token.u.color.b
 		      && token.u.color.b == 0.0)
 		    {
 		      /* Select the default color (black). */
-		      OUTPUT ((cofp, "0 setgray\n"));
+		      OUTPUT_f (&cofp, "0 setgray\n");
 		      user_colorp = 0;
 		    }
 		  else
 		    {
-		      OUTPUT ((cofp, "%g %g %g setrgbcolor\n",
+		      OUTPUT_f (&cofp, "%g %g %g setrgbcolor\n",
 			       token.u.color.r,
 			       token.u.color.g,
-			       token.u.color.b));
+			       token.u.color.b);
 
 		      user_color.r = token.u.color.r;
 		      user_color.g = token.u.color.g;
@@ -1039,10 +1032,10 @@ large for page\n"),
 
 		case tBGCOLOR:
 		  /* Select a new background color. */
-		  MESSAGE (2, (stderr, "^@bgcolor{%f %f %f}\n",
+		  MESSAGE_f (2, stderr, "^@bgcolor{%f %f %f}\n",
 			       token.u.color.r,
 			       token.u.color.g,
-			       token.u.color.b));
+			       token.u.color.b);
 
 		  if (token.u.color.r == token.u.color.g
 		      && token.u.color.g == token.u.color.b
@@ -1083,14 +1076,14 @@ large for page\n"),
 		  break;
 
 		case tPS:
-		  OUTPUT ((cofp, "%g %g M\n%s\n", x, y, token.u.str));
+		  OUTPUT_f (&cofp, "%g %g M\n%s\n", x, y, token.u.str);
 		  xfree (token.u.str);
 		  break;
 
 		case tNONE:
 		default:
-		  FATAL ((stderr, "process_file(): got illegal token %d",
-			  token.type));
+		  FATAL_f (stderr, "process_file(): got illegal token %d",
+			  token.type);
 		  break;
 		}
 	    }
@@ -1137,41 +1130,45 @@ large for page\n"),
 /* Help macros. */
 
 /* Check if character <ch> fits to current line. */
-#define FITS_ON_LINE(ch) ((linepos + CHAR_WIDTH (ch) < linew) || col == 0)
+static int FITS_ON_LINE(int ch, double linepos, double linew, unsigned int col) { return ((linepos + CHAR_WIDTH_int(ch, font_widths) < linew) || col == 0); }
 
 /* Is line buffer empty? */
-#define BUFFER_EMPTY() (bufpos == 0)
+static int BUFFER_EMPTY(unsigned int bufpos) { return (bufpos == 0); }
 
 /* Unconditionally append character <ch> to the line buffer. */
-#define APPEND_CHAR(ch) 				\
-  do {							\
-    if (bufpos >= buflen)				\
-      {							\
-	buflen += 4096;					\
-	buffer = xrealloc (buffer, buflen);		\
-      }							\
-    buffer[bufpos++] = ch;				\
-  } while (0)
+static void APPEND_CHAR(int ch, unsigned int *bufpos, unsigned int *buflen, unsigned char **buffer) {
+	if ((*bufpos) >= (*buflen))
+	{
+		(*buflen) += 4096;
+		(*buffer) = xrealloc((*buffer), (*buflen));
+	}
+	(*buffer)[(*bufpos)++] = ch;
+}
 
 /*
  * Copy character <ch> (it fits to this line) to output buffer and
  * update current point counters.
  */
-#define EMIT(ch) 		\
-  do {				\
-    APPEND_CHAR (ch);		\
-    linepos += CHAR_WIDTH (ch);	\
-    col++;			\
-  } while (0)
-
-#define UNEMIT(ch)		\
-  do {				\
-    linepos -= CHAR_WIDTH (ch); \
-    col--;			\
-  } while (0)
-
-#define ISSPACE(ch) ((ch) == ' ' || (ch) == '\t')
-#define ISOCTAL(ch) ('0' <= (ch) && (ch) <= '7')
+static void EMIT(int ch, double *linepos, unsigned int *col, unsigned int *bufpos, unsigned int *buflen, unsigned char **buffer) {
+	APPEND_CHAR(ch, bufpos, buflen, buffer);
+	(*linepos) += CHAR_WIDTH_int(ch, font_widths);
+	(*col)++;
+}
+
+static void UNEMIT_uchar(unsigned char ch, double *linepos, unsigned int *col) {
+	*linepos -= CHAR_WIDTH_int(ch, font_widths);
+	*col -= 1;
+}
+
+static void UNEMIT_int(int ch, double *linepos, unsigned int *col) {
+	*linepos -= CHAR_WIDTH_int(ch, font_widths);
+	*col -= 1;
+}
+
+static int ISSPACE_uchar(unsigned char ch) { return ((ch) == ' ' || (ch) == '\t'); }
+static int ISSPACE_int(int ch) { return ((ch) == ' ' || (ch) == '\t'); }
+
+static int ISOCTAL(unsigned char ch) { return ('0' <= (ch) && (ch) <= '7'); }
 
 /* Read one special escape from input <fp>. */
 
@@ -1225,7 +1222,7 @@ read_special_escape (InputStream *is, Token *token)
     if (strcmp (escname, escapes[e].name) == 0)
       break;
   if (escapes[e].name == NULL)
-    FATAL ((stderr, _("unknown special escape: %s"), escname));
+    FATAL_f (stderr, gettext("unknown special escape: %s"), escname);
 
   /*
    * The epsf escape takes optional arguments so it must be handled
@@ -1351,13 +1348,13 @@ read_special_escape (InputStream *is, Token *token)
 		  break;
 
 		default:
-		  FATAL ((stderr, _("illegal option %c for ^@epsf escape"),
-			  ch));
+		  FATAL_f (stderr, gettext("illegal option %c for ^@epsf escape"),
+			  ch);
 		}
 	    }
 	  if (ch != ']')
-	    FATAL ((stderr,
-		    _("malformed ^@epsf escape: no ']' after options")));
+	    FATAL_f (stderr,
+		    gettext("malformed ^@epsf escape: no ']' after options"));
 
 	  ch = is_getc (is);
 	}
@@ -1368,18 +1365,18 @@ read_special_escape (InputStream *is, Token *token)
 	    {
 	      token->u.epsf.filename[i] = ch;
 	      if (i + 1 >= sizeof (token->u.epsf.filename))
-		FATAL ((stderr,
-			_("too long file name for ^@epsf escape:\n%.*s"),
-			i, token->u.epsf.filename));
+		FATAL_f (stderr,
+			gettext("too long file name for ^@epsf escape:\n%.*s"),
+			i, token->u.epsf.filename);
 	    }
 	  if (ch == EOF)
-	    FATAL ((stderr, _("unexpected EOF while scanning ^@epsf escape")));
+	    FATAL_f (stderr, gettext("unexpected EOF while scanning ^@epsf escape"));
 
 	  token->u.epsf.filename[i] = '\0';
 	  token->type = tEPSF;
 	}
       else
-	FATAL ((stderr, _("malformed ^@epsf escape: no '{' found")));
+	FATAL_f (stderr, gettext("malformed ^@epsf escape: no '{' found"));
 
       /*
        * Now we have a valid epsf-token in <token>.  Let's read BoundingBox
@@ -1391,7 +1388,7 @@ read_special_escape (InputStream *is, Token *token)
       else
 	{
 	  /* Some fixups for x and y dimensions. */
-	  token->u.epsf.y += LINESKIP - 1;
+	  token->u.epsf.y += LINESKIP() - 1;
 	  if (token->u.epsf.h != 0.0)
 	    token->u.epsf.h -= 1.0;
 
@@ -1437,8 +1434,8 @@ read_special_escape (InputStream *is, Token *token)
       /* Read argument. */
       ch = is_getc (is);
       if (ch != '{')
-	FATAL ((stderr, _("malformed %s escape: no '{' found"),
-		escapes[e].name));
+	FATAL_f (stderr, gettext("malformed %s escape: no '{' found"),
+		escapes[e].name);
 
       parenlevel = 0;
       for (i = 0;
@@ -1451,8 +1448,8 @@ read_special_escape (InputStream *is, Token *token)
 
 	  buf[i] = ch;
 	  if (i + 1 >= sizeof (buf))
-	    FATAL ((stderr, _("too long argument for %s escape:\n%.*s"),
-		    escapes[e].name, i, buf));
+	    FATAL_f (stderr, gettext("too long argument for %s escape:\n%.*s"),
+		    escapes[e].name, i, buf);
 	}
       buf[i] = '\0';
 
@@ -1471,8 +1468,8 @@ read_special_escape (InputStream *is, Token *token)
 	      if (!parse_font_spec (token->u.font.name, &cp,
 				    &token->u.font.size,
 				    &token->u.font.encoding))
-		FATAL ((stderr, _("malformed font spec for ^@font escape: %s"),
-			token->u.font.name));
+		FATAL_f (stderr, gettext("malformed font spec for ^@font escape: %s"),
+			token->u.font.name);
 
 	      memset  (token->u.font.name, 0, sizeof(token->u.font.name));
 	      strncpy (token->u.font.name, cp, sizeof(token->u.font.name) - 1);
@@ -1507,11 +1504,11 @@ read_special_escape (InputStream *is, Token *token)
 		{
 		case 0:
 		case 2:
-		  FATAL ((stderr,
-			  _("malformed color spec for ^@%s escape: %s"),
+		  FATAL_f (stderr,
+			  gettext("malformed color spec for ^@%s escape: %s"),
 			  escapes[e].escape == ESC_COLOR
 			  ? "color" : "bgcolor",
-			  buf));
+			  buf);
 		  break;
 
 		case 1:
@@ -1532,7 +1529,7 @@ read_special_escape (InputStream *is, Token *token)
 	case ESC_SHADE:
 	  line_highlight_gray = atof (buf);
 	  if (line_highlight_gray < 0.0 || line_highlight_gray > 1.0)
-	    FATAL ((stderr, _("invalid value for ^@shade escape: %s"), buf));
+	    FATAL_f (stderr, gettext("invalid value for ^@shade escape: %s"), buf);
 
 	  token->type = tNONE;
 	  break;
@@ -1540,7 +1537,7 @@ read_special_escape (InputStream *is, Token *token)
 	case ESC_BGGRAY:
 	  bggray = atof (buf);
 	  if (bggray < 0.0 || bggray > 1.0)
-	    FATAL ((stderr, _("invalid value for ^@bggray escape: %s"), buf));
+	    FATAL_f (stderr, gettext("invalid value for ^@bggray escape: %s"), buf);
 
 	  token->type = tNONE;
 	  break;
@@ -1617,8 +1614,8 @@ get_next_token (InputStream *is, double linestart, double linepos,
       return;
     }
 
-#define DONE_DONE 1
-#define DONE_WRAP 2
+enum { DONE_DONE = 1 };
+enum { DONE_WRAP = 2 };
 
   while (!done)
     {
@@ -1626,7 +1623,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
       switch (ch)
 	{
 	case EOF:
-	  if (BUFFER_EMPTY ())
+	  if (BUFFER_EMPTY (bufpos))
 	    {
 	      token->type = tEOF;
 	      return;
@@ -1644,7 +1641,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	  if (ch == nl)
 	    {
 	      /* The newline character. */
-	      if (BUFFER_EMPTY ())
+	      if (BUFFER_EMPTY (bufpos))
 		{
 		  token->type = tNEWLINE;
 		  return;
@@ -1658,7 +1655,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	  else
 	    {
 	      /* The carriage return character. */
-	      if (BUFFER_EMPTY ())
+	      if (BUFFER_EMPTY (bufpos))
 		{
 		  token->type = tCARRIAGE_RETURN;
 		  return;
@@ -1677,8 +1674,8 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	      i = tabsize - (col % tabsize);
 	      for (; i > 0; i--)
 		{
-		  if (FITS_ON_LINE (' '))
-		    EMIT (' ');
+		  if (FITS_ON_LINE (' ', linepos, linew, col))
+		    EMIT (' ', &linepos, &col, &bufpos, &buflen, &buffer);
 		  else
 		    {
 		      done = DONE_WRAP;
@@ -1690,7 +1687,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	    {
 	      /* Proportional font. */
 
-	      double grid = tabsize * CHAR_WIDTH (' ');
+	      double grid = tabsize * CHAR_WIDTH_char(' ', font_widths);
 	      col++;
 
 	      /* Move linepos to the next multiple of <grid>. */
@@ -1704,7 +1701,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	  break;
 
 	case '\f':
-	  if (BUFFER_EMPTY ())
+	  if (BUFFER_EMPTY (bufpos))
 	    {
 	      if (interpret_formfeed)
 		token->type = tFORMFEED;
@@ -1723,7 +1720,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	  /* Handle special escapes. */
 	  if (special_escapes && ch == escape_char)
 	    {
-	      if (BUFFER_EMPTY ())
+	      if (BUFFER_EMPTY (bufpos))
 		{
 		  /* Interpret special escapes. */
 		  read_special_escape (is, token);
@@ -1747,10 +1744,10 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	  /* Handle backspace character. */
 	  if (ch == bs)
 	    {
-	      if (BUFFER_EMPTY () || !EXISTS (buffer[bufpos - 1]))
-		linepos -= CHAR_WIDTH ('m');
+	      if (BUFFER_EMPTY (bufpos) || !EXISTS (buffer[bufpos - 1]))
+		linepos -= CHAR_WIDTH_char('m', font_widths);
 	      else
-		linepos -= CHAR_WIDTH (buffer[bufpos - 1]);
+		linepos -= CHAR_WIDTH_uchar(buffer[bufpos - 1], font_widths);
 
 	      done = DONE_DONE;
 	      break;
@@ -1759,7 +1756,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	  /* Check normal characters. */
 	  if (EXISTS (ch))
 	    {
-	      if (FITS_ON_LINE (ch))
+	      if (FITS_ON_LINE (ch, linepos, linew, col))
 		{
 		  /*
 		   * Print control characters (and optionally
@@ -1772,20 +1769,20 @@ get_next_token (InputStream *is, double linestart, double linepos,
 
 		      sprintf (buf, "\\%03o", ch);
 		      for (i = 0; buf[i]; i++)
-			APPEND_CHAR (buf[i]);
+			APPEND_CHAR (buf[i], &bufpos, &buflen, &buffer);
 
 		      /* Update current point counters manually. */
-		      linepos += CHAR_WIDTH (ch);
+		      linepos += CHAR_WIDTH_int(ch, font_widths);
 		      col++;
 		    }
 		  else if (ch == '(' || ch == ')' || ch == '\\')
 		    {
 		      /* These must be quoted in PostScript strings. */
-		      APPEND_CHAR ('\\');
-		      EMIT (ch);
+		      APPEND_CHAR ('\\', &bufpos, &buflen, &buffer);
+		      EMIT (ch, &linepos, &col, &bufpos, &buflen, &buffer);
 		    }
 		  else
-		    EMIT (ch);
+		    EMIT (ch, &linepos, &col, &bufpos, &buflen, &buffer);
 		}
 	      else
 		{
@@ -1796,9 +1793,9 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	  else if (ISPRINT (ch))
 	    {
 	      /* Printable, but do not exists in this font. */
-	      if (FITS_ON_LINE ('?'))
+	      if (FITS_ON_LINE ('?', linepos, linew, col))
 		{
-		  EMIT ('?');
+		  EMIT ('?', &linepos, &col, &bufpos, &buflen, &buffer);
 		  if (missing_chars[ch]++ == 0)
 		    num_missing_chars++;
 		}
@@ -1848,7 +1845,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 
 	      /* Count length. */
 	      for (i = 0; buf[i]; i++)
-		len += CHAR_WIDTH (buf[i]);
+		len += CHAR_WIDTH_char(buf[i], font_widths);
 
 	      if (linepos + len < linew || col == 0)
 		{
@@ -1856,8 +1853,8 @@ get_next_token (InputStream *is, double linestart, double linepos,
 		  for (i = 0; buf[i]; i++)
 		    {
 		      if (buf[i] == '\\')
-			APPEND_CHAR ('\\'); /* Escape '\\' characters. */
-		      EMIT (buf[i]);
+			APPEND_CHAR ('\\', &bufpos, &buflen, &buffer); /* Escape '\\' characters. */
+		      EMIT (buf[i], &linepos, &col, &bufpos, &buflen, &buffer);
 		    }
 		}
 	      else
@@ -1883,21 +1880,21 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	  while ((ch = is_getc (is)) != EOF && ch != nl)
 	    ;
 	}
-      else if (!BUFFER_EMPTY () && line_end == LE_WORD_WRAP)
+      else if (!BUFFER_EMPTY (bufpos) && line_end == LE_WORD_WRAP)
 	{
 	  int w;
 
-	  if (ISSPACE (buffer[bufpos - 1]))
+	  if (ISSPACE_uchar (buffer[bufpos - 1]))
 	    {
 	      /* Skip all whitespace from the end of the wrapped line. */
-	      while ((w = is_getc (is)) != EOF && ISSPACE (w))
+	      while ((w = is_getc (is)) != EOF && ISSPACE_int (w))
 		;
 	      is_ungetc (w, is);
 	    }
 	  else
 	    {
 	      /* Find the previous word boundary for the wrap. */
-	      for (w = bufpos - 1; w >= 0 && !ISSPACE (buffer[w]); w--)
+	      for (w = bufpos - 1; w >= 0 && !ISSPACE_uchar (buffer[w]); w--)
 		;
 	      w++;
 	      if (w > 0 || original_col > 0)
@@ -1923,7 +1920,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 			  && buffer[bufpos - 1] == '\\')
 			{
 			  is_ungetc (buffer[bufpos], is);
-			  UNEMIT (buffer[bufpos]);
+			  UNEMIT_uchar(buffer[bufpos], &linepos, &col);
 			  bufpos--;
 			}
 		      /* Check the octal notations "\\%03o". */
@@ -1973,7 +1970,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 				     + ((buffer[bufpos - 1] - '0') << 3)
 				     + (buffer[bufpos] - '0'));
 			      is_ungetc (tch, is);
-			      UNEMIT (tch);
+			      UNEMIT_int(tch, &linepos, &col);
 			      bufpos -= 3;
 			    }
 			  else
@@ -1985,7 +1982,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 			  /* Normal character, just unget it. */
 			unemit_normal:
 			  is_ungetc (buffer[bufpos], is);
-			  UNEMIT (buffer[bufpos]);
+			  UNEMIT_uchar(buffer[bufpos], &linepos, &col);
 			}
 		    }
 		  while (bufpos > w);
@@ -2008,7 +2005,7 @@ get_next_token (InputStream *is, double linestart, double linepos,
 	pending_token = tEOF;
     }
 
-  APPEND_CHAR ('\0');
+  APPEND_CHAR ('\0', &bufpos, &buflen, &buffer);
   token->type = tSTRING;
   token->u.str = (char *) buffer;
   token->new_x = linepos;
@@ -2046,48 +2043,48 @@ dump_ps_page_header (char *fname, int empty)
 	  switch (page_label)
 	    {
 	    case LABEL_SHORT:
-	      OUTPUT ((cofp, "%%%%Page: (%d-%d) %d\n", current_pagenum,
-		       current_pagenum + nup - 1, total_pages / nup + 1));
+	      OUTPUT_f (&cofp, "%%%%Page: (%d-%d) %d\n", current_pagenum,
+		       current_pagenum + nup - 1, total_pages / nup + 1);
 	      break;
 
 	    case LABEL_LONG:
-	      OUTPUT ((cofp, "%%%%Page: (%s:%3d-%3d) %d\n", ftail,
+	      OUTPUT_f (&cofp, "%%%%Page: (%s:%3d-%3d) %d\n", ftail,
 		       current_pagenum, current_pagenum + nup - 1,
-		       total_pages / nup + 1));
+		       total_pages / nup + 1);
 	      break;
 	    }
 
 	  /* Page setup. */
-	  OUTPUT ((cofp, "%%%%BeginPageSetup\n_S\n"));
+	  OUTPUT_f (&cofp, "%%%%BeginPageSetup\n_S\n");
 
 	  if ((total_pages / nup + 1) % 2 == 0)
 	    /* Two-side binding options for the even pages. */
 	    handle_two_side_options ();
 
-#define PRINT_BOUNDING_BOXES 0
+	  enum { PRINT_BOUNDING_BOXES = 0 };
 
-#if PRINT_BOUNDING_BOXES
-	  OUTPUT ((cofp,
+if (PRINT_BOUNDING_BOXES) {
+	  OUTPUT_f (&cofp,
 		   "%d %d moveto %d %d lineto %d %d lineto %d %d lineto closepath stroke\n",
 		   media->llx, media->lly, media->llx, media->ury,
-		   media->urx, media->ury, media->urx, media->lly));
-#endif
+		   media->urx, media->ury, media->urx, media->lly);
+}
 
 	  if (landscape)
 	    {
 	      if (nup_landscape)
-		OUTPUT ((cofp, "90 rotate\n%d %d translate\n",
-			 media->lly, -media->urx));
+		OUTPUT_f (&cofp, "90 rotate\n%d %d translate\n",
+			 media->lly, -media->urx);
 	      else
-		OUTPUT ((cofp, "%d %d translate\n", media->llx, media->lly));
+		OUTPUT_f (&cofp, "%d %d translate\n", media->llx, media->lly);
 	    }
 	  else
 	    {
 	      if (nup_landscape)
-		OUTPUT ((cofp, "90 rotate\n%d %d translate\n",
-			 media->lly, -media->llx));
+		OUTPUT_f (&cofp, "90 rotate\n%d %d translate\n",
+			 media->lly, -media->llx);
 	      else
-		OUTPUT ((cofp, "%d %d translate\n", media->llx, media->ury));
+		OUTPUT_f (&cofp, "%d %d translate\n", media->llx, media->ury);
 	    }
 	}
     }
@@ -2096,12 +2093,12 @@ dump_ps_page_header (char *fname, int empty)
   switch (page_label)
     {
     case LABEL_SHORT:
-      OUTPUT ((cofp, "%sPage: (%d) %d\n", cstr, current_pagenum, total_pages));
+      OUTPUT_f (&cofp, "%sPage: (%d) %d\n", cstr, current_pagenum, total_pages);
       break;
 
     case LABEL_LONG:
-      OUTPUT ((cofp, "%sPage: (%s:%3d) %d\n", cstr, ftail, current_pagenum,
-	       total_pages));
+      OUTPUT_f (&cofp, "%sPage: (%s:%3d) %d\n", cstr, ftail, current_pagenum,
+	       total_pages);
       break;
     }
 
@@ -2109,13 +2106,13 @@ dump_ps_page_header (char *fname, int empty)
    * Page Setup.
    */
 
-  OUTPUT ((cofp, "%sBeginPageSetup\n_S\n", cstr));
+  OUTPUT_f (&cofp, "%sBeginPageSetup\n_S\n", cstr);
 
   if (nup > 1)
     {
       int xm, ym;
 
-      OUTPUT ((cofp, "%% N-up sub-page %d/%d\n", nup_subpage + 1, nup));
+      OUTPUT_f (&cofp, "%% N-up sub-page %d/%d\n", nup_subpage + 1, nup);
       if (landscape)
 	{
 	  if (nup_columnwise)
@@ -2129,9 +2126,9 @@ dump_ps_page_header (char *fname, int empty)
 	      ym = nup_subpage % nup_rows;
 	    }
 
-	  OUTPUT ((cofp, "%d %d translate\n",
+	  OUTPUT_f (&cofp, "%d %d translate\n",
 		   xm * (nup_width + nup_xpad),
-		   ym * (nup_height + nup_ypad)));
+		   ym * (nup_height + nup_ypad));
 	}
       else
 	{
@@ -2146,15 +2143,15 @@ dump_ps_page_header (char *fname, int empty)
 	      ym = nup_subpage / nup_columns;
 	    }
 
-	  OUTPUT ((cofp, "%d %d translate\n",
+	  OUTPUT_f (&cofp, "%d %d translate\n",
 		   xm * (nup_width + nup_xpad),
-		   -((int) (ym * (nup_height + nup_ypad) + nup_height))));
+		   -((int) (ym * (nup_height + nup_ypad) + nup_height)));
 	}
-      OUTPUT ((cofp, "%g dup scale\n", nup_scale));
+      OUTPUT_f (&cofp, "%g dup scale\n", nup_scale);
 
       /* And finally, the real page setup. */
       if (landscape)
-	OUTPUT ((cofp, "90 rotate\n%d %d translate\n", 0, -d_page_h));
+	OUTPUT_f (&cofp, "90 rotate\n%d %d translate\n", 0, -d_page_h);
     }
   else
     {
@@ -2165,26 +2162,26 @@ dump_ps_page_header (char *fname, int empty)
 	handle_two_side_options ();
 
       if (landscape)
-	OUTPUT ((cofp, "90 rotate\n%d %d translate\n",
-		 media->lly, -media->urx));
+	OUTPUT_f (&cofp, "90 rotate\n%d %d translate\n",
+		 media->lly, -media->urx);
       else
-	OUTPUT ((cofp, "%d %d translate\n", media->llx, media->lly));
+	OUTPUT_f (&cofp, "%d %d translate\n", media->llx, media->lly);
     }
 
   /* Some constants etc. */
-  OUTPUT ((cofp, "/pagenum %d def\n", current_pagenum));
+  OUTPUT_f (&cofp, "/pagenum %d def\n", current_pagenum);
 
   cp = escape_string (fname);
-  OUTPUT ((cofp, "/fname (%s) def\n", cp));
+  OUTPUT_f (&cofp, "/fname (%s) def\n", cp);
   xfree (cp);
 
   cp = escape_string (fdir);
-  OUTPUT ((cofp, "/fdir (%s) def\n", cp));
+  OUTPUT_f (&cofp, "/fdir (%s) def\n", cp);
   xfree (cp);
   xfree (dirc);
 
   cp = escape_string (ftail);
-  OUTPUT ((cofp, "/ftail (%s) def\n", cp));
+  OUTPUT_f (&cofp, "/ftail (%s) def\n", cp);
   xfree (cp);
   xfree (basec);
 
@@ -2192,22 +2189,22 @@ dump_ps_page_header (char *fname, int empty)
   if (user_fontp)
     {
       if (encoding == default_Fencoding)
-	OUTPUT ((cofp, "/%s %g %g SUF\n", Fname, Fpt.w, Fpt.h));
+	OUTPUT_f (&cofp, "/%s %g %g SUF\n", Fname, Fpt.w, Fpt.h);
       else
 	/* This must be the case. */
-	OUTPUT ((cofp, "/%s %g %g SUF_PS\n", Fname, Fpt.w, Fpt.h));
+	OUTPUT_f (&cofp, "/%s %g %g SUF_PS\n", Fname, Fpt.w, Fpt.h);
     }
 
   /* Dump user defined strings. */
   if (count_key_value_set (user_strings) > 0)
     {
-      OUTPUT ((cofp, "%% User defined strings:\n"));
+      OUTPUT_f (&cofp, "%% User defined strings:\n");
       for (got = strhash_get_first (user_strings, &cp, &i, (void **) &cp2);
 	   got;
 	   got = strhash_get_next (user_strings, &cp, &i, (void **) &cp2))
 	{
 	  cp2 = format_user_string ("%Format", cp2);
-	  OUTPUT ((cofp, "/%s (%s) def\n", cp, cp2));
+	  OUTPUT_f (&cofp, "/%s (%s) def\n", cp, cp2);
 	  xfree (cp2);
 	}
     }
@@ -2234,16 +2231,16 @@ dump_ps_page_header (char *fname, int empty)
 	    }
 	}
 
-      OUTPUT ((cofp, "/user_header_p true def\n"));
-      OUTPUT ((cofp, "/user_header_left_str (%s) def\n", h_left));
-      OUTPUT ((cofp, "/user_header_center_str (%s) def\n",
-	       h_center ? h_center : ""));
-      OUTPUT ((cofp, "/user_header_right_str (%s) def\n",
-	       h_right ? h_right : ""));
+      OUTPUT_f (&cofp, "/user_header_p true def\n");
+      OUTPUT_f (&cofp, "/user_header_left_str (%s) def\n", h_left);
+      OUTPUT_f (&cofp, "/user_header_center_str (%s) def\n",
+	       h_center ? h_center : "");
+      OUTPUT_f (&cofp, "/user_header_right_str (%s) def\n",
+	       h_right ? h_right : "");
       xfree (h_left);
     }
   else
-    OUTPUT ((cofp, "/user_header_p false def\n"));
+    OUTPUT_f (&cofp, "/user_header_p false def\n");
 
   /* User supplied footer? */
   if (page_footer)
@@ -2267,18 +2264,18 @@ dump_ps_page_header (char *fname, int empty)
 	    }
 	}
 
-      OUTPUT ((cofp, "/user_footer_p true def\n"));
-      OUTPUT ((cofp, "/user_footer_left_str (%s) def\n", f_left));
-      OUTPUT ((cofp, "/user_footer_center_str (%s) def\n",
-	       f_center ? f_center : ""));
-      OUTPUT ((cofp, "/user_footer_right_str (%s) def\n",
-	       f_right ? f_right : ""));
+      OUTPUT_f (&cofp, "/user_footer_p true def\n");
+      OUTPUT_f (&cofp, "/user_footer_left_str (%s) def\n", f_left);
+      OUTPUT_f (&cofp, "/user_footer_center_str (%s) def\n",
+	       f_center ? f_center : "");
+      OUTPUT_f (&cofp, "/user_footer_right_str (%s) def\n",
+	       f_right ? f_right : "");
       xfree (f_left);
     }
   else
-    OUTPUT ((cofp, "/user_footer_p false def\n"));
+    OUTPUT_f (&cofp, "/user_footer_p false def\n");
 
-  OUTPUT ((cofp, "%%%%EndPageSetup\n"));
+  OUTPUT_f (&cofp, "%%%%EndPageSetup\n");
 
   /*
    * Mark standard page decorations.
@@ -2288,25 +2285,25 @@ dump_ps_page_header (char *fname, int empty)
     {
       /* Highlight bars. */
       if (highlight_bars)
-	OUTPUT ((cofp, "%d %f %d %f highlight_bars\n", highlight_bars,
-		 LINESKIP, d_output_y_margin, highlight_bar_gray));
+	OUTPUT_f (&cofp, "%d %f %d %f highlight_bars\n", highlight_bars,
+		 LINESKIP(), d_output_y_margin, highlight_bar_gray);
 
       /* Underlay. */
       if (underlay != NULL)
 	{
 	  if (ul_position_p || ul_angle_p)
-	    OUTPUT ((cofp, "user_underlay\n"));
+	    OUTPUT_f (&cofp, "user_underlay\n");
 	  else
-	    OUTPUT ((cofp, "underlay\n"));
+	    OUTPUT_f (&cofp, "underlay\n");
 	}
 
       /* Column lines. */
       if (num_columns > 1 && (header == HDR_FANCY || borders))
-	OUTPUT ((cofp, "column_lines\n"));
+	OUTPUT_f (&cofp, "column_lines\n");
 
       /* Borders around columns. */
       if (borders)
-	OUTPUT ((cofp, "column_borders\n"));
+	OUTPUT_f (&cofp, "column_borders\n");
 
       /* Header. */
       switch (header)
@@ -2316,15 +2313,15 @@ dump_ps_page_header (char *fname, int empty)
 
 	case HDR_SIMPLE:
 	case HDR_FANCY:
-	  OUTPUT ((cofp, "do_header\n"));
+	  OUTPUT_f (&cofp, "do_header\n");
 	  break;
 	}
     }
 
   /* Do we have a pending ^@color{} color? */
   if (user_colorp)
-    OUTPUT ((cofp, "%g %g %g setrgbcolor\n", user_color.r, user_color.g,
-	     user_color.b));
+    OUTPUT_f (&cofp, "%g %g %g setrgbcolor\n", user_color.r, user_color.g,
+	     user_color.b);
 }
 
 
@@ -2333,16 +2330,16 @@ dump_ps_page_trailer ()
 {
   unsigned int nup_subpage = (total_pages - 1) % nup;
 
-  OUTPUT ((cofp, "_R\n"));
+  OUTPUT_f (&cofp, "_R\n");
 
   if (nup > 1)
     {
       if (nup_subpage + 1 == nup)
 	/* Real end of page. */
-	OUTPUT ((cofp, "_R\nS\n"));
+	OUTPUT_f (&cofp, "_R\nS\n");
     }
   else
-    OUTPUT ((cofp, "S\n"));
+    OUTPUT_f (&cofp, "S\n");
 }
 
 
@@ -2357,17 +2354,17 @@ dump_empty_page ()
 	{
 	  /* Real start of the page, must do it the harder way. */
 	  dump_ps_page_header ("", 1);
-	  OUTPUT ((cofp, "_R\n"));
+	  OUTPUT_f (&cofp, "_R\n");
 	}
       else
-	OUTPUT ((cofp, "%%Page: (-) %d\n", total_pages));
+	OUTPUT_f (&cofp, "%%Page: (-) %d\n", total_pages);
 
       if (nup_subpage + 1 == nup)
 	/* This is the last page on this sheet, dump us. */
-	OUTPUT ((cofp, "_R\nS\n"));
+	OUTPUT_f (&cofp, "_R\nS\n");
     }
   else
-    OUTPUT ((cofp, "%%%%Page: (-) %d\nS\n", total_pages));
+    OUTPUT_f (&cofp, "%%%%Page: (-) %d\nS\n", total_pages);
 }
 
 
@@ -2381,7 +2378,7 @@ recognize_eps_file (Token *token)
   int valid_epsf;
   float llx, lly, urx, ury;
 
-  MESSAGE (2, (stderr, "^@epsf=\"%s\"\n", token->u.epsf.filename));
+  MESSAGE_f (2, stderr, "^@epsf=\"%s\"\n", token->u.epsf.filename);
 
   i = strlen (token->u.epsf.filename);
 
@@ -2409,8 +2406,8 @@ recognize_eps_file (Token *token)
 	}
       if (token->u.epsf.fp == NULL)
 	{
-	  MESSAGE (0, (stderr, _("couldn't open EPS file \"%s\": %s\n"),
-		       token->u.epsf.filename, strerror (errno)));
+	  MESSAGE_f (0, stderr, gettext("couldn't open EPS file \"%s\": %s\n"),
+		       token->u.epsf.filename, strerror (errno));
 	  return 0;
 	}
     }
@@ -2443,15 +2440,15 @@ recognize_eps_file (Token *token)
 	{
 	  if (buf[0] != '%' || buf[1] != '!')
 	    {
-	      MESSAGE (0,
-		       (stderr,
-			_("EPS file \"%s\" does not start with \"%%!\" magic\n"),
-			token->u.epsf.filename));
+	      MESSAGE_f (0,
+		       stderr,
+			gettext("EPS file \"%s\" does not start with \"%%!\" magic\n"),
+			token->u.epsf.filename);
 	      break;
 	    }
 	}
 
-#define BB_DSC "%%BoundingBox:"
+static const char *BB_DSC = "%%BoundingBox:";
 
       if (strncmp (buf, BB_DSC, strlen (BB_DSC)) == 0)
 	{
@@ -2466,13 +2463,13 @@ recognize_eps_file (Token *token)
 		   buf[i] && (buf[i] == ' ' || buf[i] == '\t');
 		   i++)
 		;
-#define BB_DSC_ATEND "(atend)"
+static const char *BB_DSC_ATEND = "(atend)";
 	      if (strncmp (buf + i, BB_DSC_ATEND, strlen (BB_DSC_ATEND)) != 0)
 		{
 		  /* No, this BoundingBox comment is corrupted. */
-		  MESSAGE (0, (stderr, _("EPS file \"%s\" contains malformed \
+		  MESSAGE_f (0, stderr, gettext("EPS file \"%s\" contains malformed \
 %%%%BoundingBox row:\n\"%.*s\"\n"),
-			       token->u.epsf.filename, strlen (buf) - 1, buf));
+			       token->u.epsf.filename, strlen (buf) - 1, buf);
 		  break;
 		}
 	    }
@@ -2495,8 +2492,8 @@ recognize_eps_file (Token *token)
   /* Check that we found the BoundingBox comment. */
   if (!valid_epsf)
     {
-      MESSAGE (0, (stderr, _("EPS file \"%s\" is not a valid EPS file\n"),
-		   token->u.epsf.filename));
+      MESSAGE_f (0, stderr, gettext("EPS file \"%s\" is not a valid EPS file\n"),
+		   token->u.epsf.filename);
       if (token->u.epsf.pipe)
 	pclose (token->u.epsf.fp);
       else
@@ -2505,9 +2502,9 @@ recognize_eps_file (Token *token)
       return 0;
     }
 
-  MESSAGE (2, (stderr, "BoundingBox: %d %d %d %d\n",
+  MESSAGE_f (2, stderr, "BoundingBox: %d %d %d %d\n",
 	       token->u.epsf.llx, token->u.epsf.lly,
-	       token->u.epsf.urx, token->u.epsf.ury));
+	       token->u.epsf.urx, token->u.epsf.ury);
 
   return 1;
 }
@@ -2520,18 +2517,18 @@ paste_epsf (Token *token)
   int i;
 
   /* EPSF import header. */
-  OUTPUT ((cofp, "BeginEPSF\n"));
-  OUTPUT ((cofp, "%g %g translate\n", token->new_x, token->new_y));
-  OUTPUT ((cofp, "%g %g scale\n", token->u.epsf.xscale, token->u.epsf.yscale));
-  OUTPUT ((cofp, "%d %d translate\n", -token->u.epsf.llx,
-	   -token->u.epsf.lly));
-  OUTPUT ((cofp, "%d %d %d %d Box clip newpath\n",
+  OUTPUT_f (&cofp, "BeginEPSF\n");
+  OUTPUT_f (&cofp, "%g %g translate\n", token->new_x, token->new_y);
+  OUTPUT_f (&cofp, "%g %g scale\n", token->u.epsf.xscale, token->u.epsf.yscale);
+  OUTPUT_f (&cofp, "%d %d translate\n", -token->u.epsf.llx,
+	   -token->u.epsf.lly);
+  OUTPUT_f (&cofp, "%d %d %d %d Box clip newpath\n",
 	   token->u.epsf.llx - 1,
 	   token->u.epsf.lly - 1,
 	   token->u.epsf.urx - token->u.epsf.llx + 2,
-	   token->u.epsf.ury - token->u.epsf.lly + 2));
-  OUTPUT ((cofp, "%%%%BeginDocument: %s%s\n", token->u.epsf.filename,
-	   token->u.epsf.pipe ? "|" : ""));
+	   token->u.epsf.ury - token->u.epsf.lly + 2);
+  OUTPUT_f (&cofp, "%%%%BeginDocument: %s%s\n", token->u.epsf.filename,
+	   token->u.epsf.pipe ? "|" : "");
 
   if (do_print)
     {
@@ -2544,10 +2541,10 @@ paste_epsf (Token *token)
     }
 
   /* Add a newline to keep comments correct */
-  OUTPUT ((cofp, "\n"));
+  OUTPUT_f (&cofp, "\n");
 
   /* EPSF import trailer. */
-  OUTPUT ((cofp, "%%%%EndDocument\nEndEPSF\n"));
+  OUTPUT_f (&cofp, "%%%%EndDocument\nEndEPSF\n");
 
   /* Cleanup. */
   if (token->u.epsf.pipe)
@@ -2567,7 +2564,7 @@ read_float (InputStream *is, int units, int horizontal)
 
   for (i = 0; (i < sizeof (buf) - 1
 	       && (ch = is_getc (is)) != EOF
-	       && ISNUMBERDIGIT (ch));
+	       && ISNUMBERDIGIT_int (ch));
        i++)
     buf[i] = ch;
   buf[i] = '\0';
@@ -2599,9 +2596,9 @@ read_float (InputStream *is, int units, int horizontal)
 
 	case 'l':		/* lines or characters */
 	  if (horizontal)
-	    val *= CHAR_WIDTH ('m');
+	    val *= CHAR_WIDTH_char ('m', font_widths);
 	  else
-	    val *= LINESKIP;
+	    val *= LINESKIP();
 	  break;
 	}
     }
@@ -2635,10 +2632,10 @@ do_pass_through (char *fname, InputStream *is)
   int i, j;
 
   if (output_language_pass_through)
-    MESSAGE (1,
-	     (stderr,
-	      _("passing through all input files for output language `%s'\n"),
-	      output_language));
+    MESSAGE_f (1,
+	     stderr,
+	      gettext("passing through all input files for output language `%s'\n"),
+	      output_language);
   else
     {
       /*
@@ -2684,13 +2681,13 @@ do_pass_through (char *fname, InputStream *is)
 	   * mixes them with the normal ASCII files.
 	   */
 
-	  OUTPUT ((cofp,
+	  OUTPUT_f (&cofp,
 		   "%%%%Page: (%s) -1\n_S\n%%%%BeginDocument: %s\n",
-		   fname, fname));
+		   fname, fname);
 	}
 
-      MESSAGE (1, (stderr, _("passing through %s file \"%s\"\n"),
-		   pass_through_magics[i].name, fname));
+      MESSAGE_f (1, stderr, gettext("passing through %s file \"%s\"\n"),
+		   pass_through_magics[i].name, fname);
     }
 
   /* And now, do the actual pass-through. */
@@ -2712,7 +2709,7 @@ do_pass_through (char *fname, InputStream *is)
 	/*
 	 * XXX How to end a PCL file mixed between ASCII files?
 	 */
-	OUTPUT ((cofp, "%%%%EndDocument\n_R\n"));
+	OUTPUT_f (&cofp, "%%%%EndDocument\n_R\n");
     }
 
   return 1;
@@ -2751,17 +2748,17 @@ print_line_number (double x, double y, double space, double margin,
       Fpt.h = default_Fpt.h;
       encoding = default_Fencoding;
 
-      OUTPUT ((cofp, "/F-gs-font %g %g SF\n", Fpt.w, Fpt.h));
+      OUTPUT_f (&cofp, "/F-gs-font %g %g SF\n", Fpt.w, Fpt.h);
       read_font_info ();
     }
 
   /* Count linenumber string length. */
   sprintf (buf, "%d", linenum);
   for (i = 0; buf[i]; i++)
-    len += CHAR_WIDTH (buf[i]);
+    len += CHAR_WIDTH_char(buf[i], font_widths);
 
   /* Print line numbers. */
-  OUTPUT ((cofp, "%g %g M (%s:) s\n", x + space - len, y, buf));
+  OUTPUT_f (&cofp, "%g %g M (%s:) s\n", x + space - len, y, buf);
 
   if (user_fontp)
     {
@@ -2771,11 +2768,23 @@ print_line_number (double x, double y, double space, double margin,
       Fpt.h = saved_Fpt.h;
       encoding = saved_Fencoding;
 
-      OUTPUT ((cofp, "/%s %g %g SUF\n", Fname, Fpt.w, Fpt.h));
+      OUTPUT_f (&cofp, "/%s %g %g SUF\n", Fname, Fpt.w, Fpt.h);
       read_font_info ();
     }
 }
 
+static void OUTPUT_f(FILE **file, const char *format, ...) {
+  if (*file == NULL) {
+    *file = ofp;
+  }
+  if (do_print) {
+    va_list args;
+    va_start(args, format);
+    vfprintf(*file, format, args);
+    va_end(args);
+  }
+}
+
 
 /*
  * The name of the divert file, shared between divert() and undivert()
@@ -2792,8 +2801,8 @@ divert ()
 
   divertfp = tmpfile ();
   if (divertfp == NULL)
-    FATAL ((stderr, _("couldn't create temporary divert file: %s"),
-	    strerror (errno)));
+    FATAL_f (stderr, gettext("couldn't create temporary divert file: %s"),
+	    strerror (errno));
 
   cofp = divertfp;
 }
@@ -2809,7 +2818,7 @@ undivert ()
   assert (divertfp != NULL);
 
   if (fseek (divertfp, 0, SEEK_SET) != 0)
-    FATAL ((stderr, _("couldn't rewind divert file: %s"), strerror (errno)));
+    FATAL_f (stderr, gettext("couldn't rewind divert file: %s"), strerror (errno));
 
   while (fgets (buf, sizeof (buf), divertfp))
     {
@@ -2858,10 +2867,10 @@ handle_two_side_options ()
 {
   if (rotate_even_pages)
     /* Rotate page 180 degrees. */
-    OUTPUT ((cofp, "180 rotate\n%d %d translate\n",
-	     -media->w, -media->h));
+    OUTPUT_f (&cofp, "180 rotate\n%d %d translate\n",
+	     -media->w, -media->h);
 
   if (swap_even_page_margins)
-    OUTPUT ((cofp, "%d 0 translate\n",
-	     -(media->llx - (media->w - media->urx))));
+    OUTPUT_f (&cofp, "%d 0 translate\n",
+	     -(media->llx - (media->w - media->urx)));
 }
diff --git a/src/util.c b/src/util.c
index 17d89e7..cc74354 100644
--- a/src/util.c
+++ b/src/util.c
@@ -28,14 +28,8 @@
  * Types and definitions.
  */
 
-#define CFG_FATAL(body)						\
-  do {								\
-    fprintf (stderr, "%s:%s:%d: ", program, buffer_ptr(&fname), line); \
-    fprintf body;						\
-    fprintf (stderr, "\n");					\
-    fflush (stderr);						\
-    exit (1);							\
-  } while (0)
+
+static void CFG_FATAL_f(char *fname_buffer_ptr, int line, FILE *file, const char *format, ...);
 
 
 /*
@@ -85,12 +79,13 @@ static struct
  * Global functions.
  */
 
-#define GET_TOKEN(from) (strtok ((from), " \t\n"))
-#define GET_LINE_TOKEN(from) (strtok ((from), "\n"))
+static char *GET_TOKEN(char *from) { return (strtok((from), " \t\n")); }
+static char *GET_LINE_TOKEN(char *from) { return (strtok((from), "\n")); }
 
-#define CHECK_TOKEN() 							\
-  if (token2 == NULL) 							\
-    CFG_FATAL ((stderr, _("missing argument: %s"), token));
+void CHECK_TOKEN(char *token, char *token2, int line) {
+	if (token2 == NULL)
+		CFG_FATAL_f (buffer_ptr(&fname), line, stderr, gettext("missing argument: %s"), token);
+}
 
 int
 read_config (char *path, char *file)
@@ -131,118 +126,118 @@ read_config (char *path, char *file)
       if (MATCH (token, "AcceptCompositeCharacters:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  accept_composites = atoi (token2);
 	}
       else if (MATCH (token, "AFMPath:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (afm_path);
 	  afm_path = xstrdup (token2);
 	}
       else if (MATCH (token, "AppendCtrlD:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  append_ctrl_D = atoi (token2);
 	}
       else if (MATCH (token, "Clean7Bit:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  clean_7bit = atoi (token2);
 	}
       else if (MATCH (token, "DefaultEncoding:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (encoding_name);
 	  encoding_name = xstrdup (token2);
 	}
       else if (MATCH (token, "DefaultFancyHeader:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (fancy_header_default);
 	  fancy_header_default = xstrdup (token2);
 	}
       else if (MATCH (token, "DefaultMedia:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (media_name);
 	  media_name = xstrdup (token2);
 	}
       else if (MATCH (token, "DefaultOutputMethod:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  if (MATCH (token2, "printer"))
-	    output_file = OUTPUT_FILE_NONE;
+	    output_file = ((void *)OUTPUT_FILE_NONE);
 	  else if (MATCH (token2, "stdout"))
-	    output_file = OUTPUT_FILE_STDOUT;
+	    output_file = ((char *)OUTPUT_FILE_STDOUT);
 	  else
-	    CFG_FATAL ((stderr, _("illegal value \"%s\" for option %s"),
-			token2, token));
+	    CFG_FATAL_f (buffer_ptr(&fname), line, stderr, gettext("illegal value \"%s\" for option %s"),
+			token2, token);
 	}
       else if (MATCH (token, "DownloadFont:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  strhash_put (download_fonts, token2, strlen (token2) + 1, NULL,
 		       NULL);
 	}
       else if (MATCH (token, "EscapeChar:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  escape_char = atoi (token2);
 	  if (escape_char < 0 || escape_char > 255)
-	    CFG_FATAL ((stderr, _("invalid value \"%s\" for option %s"),
-			token2, token));
+	    CFG_FATAL_f (buffer_ptr(&fname), line, stderr, gettext("invalid value \"%s\" for option %s"),
+			token2, token);
 	}
       else if (MATCH (token, "FormFeedType:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  if (MATCH (token2, "column"))
 	    formfeed_type = FORMFEED_COLUMN;
 	  else if (MATCH (token2, "page"))
 	    formfeed_type = FORMFEED_PAGE;
 	  else
-	    CFG_FATAL ((stderr, _("illegal value \"%s\" for option %s"),
-			token2, token));
+	    CFG_FATAL_f (buffer_ptr(&fname), line, stderr, gettext("illegal value \"%s\" for option %s"),
+			token2, token);
 	}
       else if (MATCH (token, "GeneratePageSize:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  generate_PageSize = atoi (token2);
 	}
       else if (MATCH (token, "HighlightBarGray:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  highlight_bar_gray = atof (token2);
 	}
       else if (MATCH (token, "HighlightBars:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  highlight_bars = atoi (token2);
 	}
       else if (MATCH (token, "LibraryPath:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (libpath);
 	  libpath = xstrdup (token2);
 	}
       else if (MATCH (token, "MarkWrappedLines:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (mark_wrapped_lines_style_name);
 	  mark_wrapped_lines_style_name = xstrdup (token2);
 	}
@@ -252,31 +247,31 @@ read_config (char *path, char *file)
 	  int w, h, llx, lly, urx, ury;
 
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  name = token2;
 
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  w = atoi (token2);
 
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  h = atoi (token2);
 
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  llx = atoi (token2);
 
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  lly = atoi (token2);
 
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  urx = atoi (token2);
 
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  ury = atoi (token2);
 
 	  add_media (name, w, h, llx, lly, urx, ury);
@@ -284,147 +279,147 @@ read_config (char *path, char *file)
       else if (MATCH (token, "NoJobHeaderSwitch:"))
 	{
 	  token2 = GET_LINE_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (no_job_header_switch);
 	  no_job_header_switch = xstrdup (token2);
 	}
       else if (MATCH (token, "NonPrintableFormat:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (npf_name);
 	  npf_name = xstrdup (token2);
 	}
       else if (MATCH (token, "OutputFirstLine:"))
 	{
 	  token2 = GET_LINE_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (output_first_line);
 	  output_first_line = xstrdup (token2);
 	}
       else if (MATCH (token, "PageLabelFormat:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (page_label_format);
 	  page_label_format = xstrdup (token2);
 	}
       else if (MATCH (token, "PagePrefeed:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  page_prefeed = atoi (token2);
 	}
       else if (MATCH (token, "PostScriptLevel:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  pslevel = atoi (token2);
 	}
       else if (MATCH (token, "Printer:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (printer);
 	  printer = xstrdup (token2);
 	}
       else if (MATCH (token, "QueueParam:"))
 	{
 	  token2 = GET_LINE_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (queue_param);
 	  queue_param = xstrdup (token2);
 	}
       else if (MATCH (token, "SetPageDevice:"))
 	{
 	  token2 = GET_LINE_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  parse_key_value_pair (pagedevice, token2);
 	}
       else if (MATCH (token, "Spooler:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (spooler_command);
 	  spooler_command = xstrdup (token2);
 	}
       else if (MATCH (token, "StatesBinary:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (states_binary);
 	  states_binary = xstrdup (token2);
 	}
       else if (MATCH (token, "StatesColor:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  states_color = atoi (token2);
 	}
       else if (MATCH (token, "StatesConfigFile:"))
 	{
 	  token2 = GET_LINE_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (states_config_file);
 	  states_config_file = xstrdup (token2);
 	}
       else if (MATCH (token, "StatesHighlightStyle:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (states_highlight_style);
 	  states_highlight_style = xstrdup (token2);
 	}
       else if (MATCH (token, "StatesPath:"))
 	{
 	  token2 = GET_LINE_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (states_path);
 	  states_path = xstrdup (token2);
 	}
       else if (MATCH (token, "StatusDict:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  parse_key_value_pair (statusdict, token2);
 	}
       else if (MATCH (token, "TOCFormat:"))
 	{
 	  token2 = GET_LINE_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  toc_fmt_string = xstrdup (token2);
 	}
       else if (MATCH (token, "Underlay:"))
 	{
 	  token2 = GET_LINE_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  underlay = xmalloc (strlen (token2) + 1);
 	  strcpy (underlay, token2);
 	}
       else if (MATCH (token, "UnderlayAngle:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  ul_angle = atof (token2);
 	  ul_angle_p = 1;
 	}
       else if (MATCH (token, "UnderlayFont:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  if (!parse_font_spec (token2, &ul_font, &ul_ptsize, NULL))
-	    CFG_FATAL ((stderr, _("malformed font spec: %s"), token2));
+	    CFG_FATAL_f (buffer_ptr(&fname), line, stderr, gettext("malformed font spec: %s"), token2);
 	}
       else if (MATCH (token, "UnderlayGray:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  ul_gray = atof (token2);
 	}
       else if (MATCH (token, "UnderlayPosition:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (ul_position);
 	  ul_position = xstrdup (token2);
 	  ul_position_p = 1;
@@ -432,12 +427,12 @@ read_config (char *path, char *file)
       else if (MATCH (token, "UnderlayStyle:"))
 	{
 	  token2 = GET_TOKEN (NULL);
-	  CHECK_TOKEN ();
+	  CHECK_TOKEN (token, token2, line);
 	  xfree (ul_style_str);
 	  ul_style_str = xstrdup (token2);
 	}
       else
-	CFG_FATAL ((stderr, _("illegal option: %s"), token));
+	CFG_FATAL_f (buffer_ptr(&fname), line, stderr, gettext("illegal option: %s"), token);
     }
 
   buffer_uninit (&fname);
@@ -450,10 +445,10 @@ add_media (char *name, int w, int h, int llx, int lly, int urx, int ury)
 {
   MediaEntry *entry;
 
-  MESSAGE (2,
-	   (stderr,
+  MESSAGE_f (2,
+	   stderr,
 	    "add_media: name=%s, w=%d, h=%d, llx=%d, lly=%d, urx=%d, ury=%d\n",
-	    name, w, h, llx, lly, urx, ury));
+	    name, w, h, llx, lly, urx, ury);
 
   entry = xcalloc (1, sizeof (*entry));
   entry->name = xmalloc (strlen (name) + 1);
@@ -536,7 +531,7 @@ paste_file (char *name, char *suffix)
     }
 
   /* Find the end of the header. */
-#define HDR_TAG "% -- code follows this line --"
+static const char *HDR_TAG = "% -- code follows this line --";
   while ((fgets (buf, sizeof (buf), fp)))
     {
       line++;
@@ -552,8 +547,8 @@ paste_file (char *name, char *suffix)
       /*
        * Document needed resources?
        */
-#define RESOURCE_DSC 	"%%DocumentNeededResources:"
-#define CONT_DSC 	"%%+"
+static const char *RESOURCE_DSC = "%%DocumentNeededResources:";
+static const char *CONT_DSC = "%%+";
       if (strncmp (buf, RESOURCE_DSC, strlen (RESOURCE_DSC)) == 0)
 	{
 	  char *cp, *cp2;
@@ -604,7 +599,7 @@ paste_file (char *name, char *suffix)
       /*
        * `%Format' directive?
        */
-#define DIRECTIVE_FORMAT "%Format:"
+static const char *DIRECTIVE_FORMAT = "%Format:";
       if (strncmp (buf, DIRECTIVE_FORMAT, strlen (DIRECTIVE_FORMAT)) == 0)
 	{
 	  int i, j;
@@ -616,8 +611,8 @@ paste_file (char *name, char *suffix)
 	  for (i = strlen (DIRECTIVE_FORMAT); buf[i] && isspace (buf[i]); i++)
 	    ;
 	  if (!buf[i])
-	    FATAL ((stderr, _("%s:%d: %%Format: no name"),
-		    buffer_ptr (ctx.fullname), line));
+	    FATAL_f (stderr, gettext("%s:%d: %%Format: no name"),
+		    buffer_ptr (ctx.fullname), line);
 
 	  /* Copy name. */
 	  for (j = 0;
@@ -627,8 +622,8 @@ paste_file (char *name, char *suffix)
 	  name[j] = '\0';
 
 	  if (j >= sizeof (name) - 1)
-	    FATAL ((stderr, _("%s:%d: %%Format: too long name, maxlen=%d"),
-		    buffer_ptr (ctx.fullname), line, sizeof (name) - 1));
+	    FATAL_f (stderr, gettext("%s:%d: %%Format: too long name, maxlen=%d"),
+		    buffer_ptr (ctx.fullname), line, sizeof (name) - 1);
 
 	  /* Find the start of the format string. */
 	  for (; buf[i] && isspace (buf[i]); i++)
@@ -640,7 +635,7 @@ paste_file (char *name, char *suffix)
 	    ;
 	  j++;
 
-	  MESSAGE (2, (stderr, "%%Format: %s %.*s\n", name, j - i, buf + i));
+	  MESSAGE_f (2, stderr, "%%Format: %s %.*s\n", name, j - i, buf + i);
 
 	  cp = xmalloc (j - i + 1);
 	  memcpy (cp, buf + i, j - i);
@@ -649,9 +644,9 @@ paste_file (char *name, char *suffix)
 	  strhash_put (user_strings, name, strlen (name) + 1, cp,
 		       (void **) &cp2);
 	  if (cp2)
-	    FATAL ((stderr,
-		    _("%s:%d: %%Format: name \"%s\" is already defined"),
-		    buffer_ptr (ctx.fullname), line, name));
+	    FATAL_f (stderr,
+		    gettext("%s:%d: %%Format: name \"%s\" is already defined"),
+		    buffer_ptr (ctx.fullname), line, name);
 
 	  /* All done with the `%Format' directive. */
 	  continue;
@@ -660,7 +655,7 @@ paste_file (char *name, char *suffix)
       /*
        * `%HeaderHeight' directive?
        */
-#define DIRECTIVE_HEADERHEIGHT "%HeaderHeight:"
+static const char *DIRECTIVE_HEADERHEIGHT = "%HeaderHeight:";
       if (strncmp (buf, DIRECTIVE_HEADERHEIGHT,
 		   strlen (DIRECTIVE_HEADERHEIGHT)) == 0)
 	  {
@@ -671,18 +666,18 @@ paste_file (char *name, char *suffix)
 		 buf[i] && !isspace (buf[i]); i++)
 	      ;
 	    if (!buf[i])
-	      FATAL ((stderr, _("%s:%d: %%HeaderHeight: no argument"),
-		      buffer_ptr (ctx.fullname), line));
+	      FATAL_f (stderr, gettext("%s:%d: %%HeaderHeight: no argument"),
+		      buffer_ptr (ctx.fullname), line);
 
 	    d_header_h = atoi (buf + i);
-	    MESSAGE (2, (stderr, "%%HeaderHeight: %d\n", d_header_h));
+	    MESSAGE_f (2, stderr, "%%HeaderHeight: %d\n", d_header_h);
 	    continue;
 	  }
 
       /*
        * `%FooterHeight' directive?
        */
-#define DIRECTIVE_FOOTERHEIGHT "%FooterHeight:"
+static const char *DIRECTIVE_FOOTERHEIGHT = "%FooterHeight:";
       if (strncmp (buf, DIRECTIVE_FOOTERHEIGHT,
 		   strlen (DIRECTIVE_FOOTERHEIGHT)) == 0)
 	{
@@ -693,11 +688,11 @@ paste_file (char *name, char *suffix)
 	       buf[i] && !isspace (buf[i]); i++)
 	    ;
 	  if (!buf[i])
-	    FATAL ((stderr, _("%s:%d: %%FooterHeight: no argument"),
-		    buffer_ptr (ctx.fullname), line));
+	    FATAL_f (stderr, gettext("%s:%d: %%FooterHeight: no argument"),
+		    buffer_ptr (ctx.fullname), line);
 
 	  d_footer_h = atoi (buf + i);
-	  MESSAGE (2, (stderr, "%%FooterHeight: %d\n", d_footer_h));
+	  MESSAGE_f (2, stderr, "%%FooterHeight: %d\n", d_footer_h);
 	  continue;
 	}
 
@@ -748,13 +743,13 @@ parse_font_spec (char *spec_a, char **name_return, FontPoint *size_return,
     {
       /* The old `nameptsize' format. */
       i = strlen (spec) - 1;
-      if (i <= 0 || !ISNUMBERDIGIT (spec[i]))
+      if (i <= 0 || !ISNUMBERDIGIT_char (spec[i]))
 	{
 	  xfree (spec);
 	  return 0;
 	}
 
-      for (i--; i >= 0 && ISNUMBERDIGIT (spec[i]); i--)
+      for (i--; i >= 0 && ISNUMBERDIGIT_char (spec[i]); i--)
 	;
       if (i < 0)
 	{
@@ -764,7 +759,7 @@ parse_font_spec (char *spec_a, char **name_return, FontPoint *size_return,
       if (spec[i] == '/')
 	{
 	  /* We accept one slash for the `pt/pt' format. */
-	  for (i--; i >= 0 && ISNUMBERDIGIT (spec[i]); i--)
+	  for (i--; i >= 0 && ISNUMBERDIGIT_char (spec[i]); i--)
 	    ;
 	  if (i < 0)
 	    {
@@ -834,18 +829,18 @@ parse_font_spec (char *spec_a, char **name_return, FontPoint *size_return,
     }
   xfree (spec);
 
-  MESSAGE (2, (stderr,
+  MESSAGE_f (2, stderr,
 	       "parse_font_spec(): name=%.*s, size=%g/%g, encoding=%s\n", i,
 	       *name_return, size_return->w, size_return->h,
-	       encp));
+	       encp);
 
   if (size_return->w < 0.0 && size_return->h < 0.0)
-    MESSAGE (0, (stderr, _("%s: warning: font size is negative\n"), program));
+    MESSAGE_f (0, stderr, gettext("%s: warning: font size is negative\n"), program);
   else if (size_return->w < 0.0)
-    MESSAGE (0, (stderr, _("%s: warning: font width is negative\n"), program));
+    MESSAGE_f (0, stderr, gettext("%s: warning: font width is negative\n"), program);
   else if (size_return->h < 0.0)
-    MESSAGE (0, (stderr, _("%s: warning: font height is negative\n"),
-		 program));
+    MESSAGE_f (0, stderr, gettext("%s: warning: font height is negative\n"),
+		 program);
 
   return 1;
 }
@@ -863,7 +858,7 @@ read_font_info (void)
   char buf[256];
   Buffer fkey;
 
-  MESSAGE (2, (stderr, _("reading AFM info for font \"%s\"\n"), Fname));
+  MESSAGE_f (2, stderr, gettext("reading AFM info for font \"%s\"\n"), Fname);
 
   if (accept_composites)
     enc_flags = AFM_ENCODE_ACCEPT_COMPOSITES;
@@ -888,23 +883,23 @@ read_font_info (void)
 	  error = afm_open_font (afm, AFM_I_COMPOSITES, Fname, &font);
 	  if (error != AFM_SUCCESS)
 	    {
-#define COUR "Courier"
+static const char *COUR = "Courier";
 	      /*
 	       * Do not report failures for "Courier*" fonts because
 	       * AFM library's default font will fix them.
 	       */
 	      if (strncmp (Fname, COUR, strlen (COUR)) != 0)
-		MESSAGE (0,
-			 (stderr,
-			  _("couldn't open AFM file for font \"%s\", using default\n"),
-			  Fname));
+		MESSAGE_f (0,
+			 stderr,
+			  gettext("couldn't open AFM file for font \"%s\", using default\n"),
+			  Fname);
 	      error = afm_open_default_font (afm, &font);
 	      if (error != AFM_SUCCESS)
 		{
 		  afm_error_to_string (error, buf);
-		  FATAL ((stderr,
-			  _("couldn't open AFM file for the default font: %s"),
-			  buf));
+		  FATAL_f (stderr,
+			  gettext("couldn't open AFM file for the default font: %s"),
+			  buf);
 		}
 	    }
 
@@ -1092,13 +1087,13 @@ download_font (char *name)
 
   /* Ok, fine.  Font was found. */
 
-  MESSAGE (1, (stderr, _("downloading font \"%s\"\n"), name));
+  MESSAGE_f (1, stderr, gettext("downloading font \"%s\"\n"), name);
   fp = fopen (buffer_ptr (&fname), "rb");
   if (fp == NULL)
     {
-      MESSAGE (0, (stderr,
-		   _("couldn't open font description file \"%s\": %s\n"),
-		   buffer_ptr (&fname), strerror (errno)));
+      MESSAGE_f (0, stderr,
+		   gettext("couldn't open font description file \"%s\": %s\n"),
+		   buffer_ptr (&fname), strerror (errno));
       buffer_uninit (&fname);
       return;
     }
@@ -1268,49 +1263,46 @@ escape_string (char *string)
  * Help macros for the format_user_string() function.
  */
 
-#define NEED_NBYTES(n) 				\
-  do {						\
-    if (rbufpos + (n) >= rbuflen)		\
-      {						\
-        rbuflen += (n) + 1024;			\
-        rbuf = xrealloc (rbuf, rbuflen);	\
-      }						\
-  } while (0)
-
-#define APPEND_CH(ch)				\
-  do {						\
-    int a;					\
-    NEED_NBYTES (width);			\
-    if (width && justification < 0)		\
-      rbuf[rbufpos++] = (ch);			\
-    for (a = 0; a < width - 1; a++)		\
-      rbuf[rbufpos++] = ' ';			\
-    if (!width || justification > 0)		\
-      rbuf[rbufpos++] = (ch);			\
-  } while (0)
-
-#define APPEND_STR(str)				\
-  do {						\
-    int len = strlen ((str));			\
-    int nspace;					\
-						\
-    if (len > width)				\
-      nspace = 0;				\
-    else					\
-      nspace = width - len;			\
-						\
-    NEED_NBYTES (nspace + len);			\
-    if (width && justification > 0)		\
-      for (; nspace; nspace--)			\
-	rbuf[rbufpos++] = ' ';			\
-						\
-    memcpy (rbuf + rbufpos, str, len);		\
-    rbufpos += len;				\
-						\
-    if (width && justification < 0)		\
-      for (; nspace; nspace--)			\
-	rbuf[rbufpos++] = ' ';			\
-  } while (0)
+static void NEED_NBYTES(int n, int rbufpos, int *rbuflen, char **rbuf) {
+	if (rbufpos + (n) >= (*rbuflen))
+	{
+		(*rbuflen) += (n) +1024;
+		(*rbuf) = xrealloc((*rbuf), (*rbuflen));
+	}
+}
+
+static void APPEND_CH(int ch, int width, int justification, int *rbufpos, char **rbuf, int *rbuflen) {
+	int a;
+	NEED_NBYTES(width, (*rbufpos), rbuflen, rbuf);
+	if (width && justification < 0)
+		(*rbuf)[(*rbufpos)++] = (ch);
+	for (a = 0; a < width - 1; a++)
+		(*rbuf)[(*rbufpos)++] = ' ';
+	if (!width || justification > 0)
+		(*rbuf)[(*rbufpos)++] = (ch);
+}
+
+static void APPEND_STR(char *str, int width, int justification, int *rbufpos, char **rbuf, int *rbuflen) {
+	int len = strlen((str));
+	int nspace;
+
+	if (len > width)
+		nspace = 0;
+	else
+		nspace = width - len;
+
+	NEED_NBYTES(nspace + len, (*rbufpos), rbuflen, rbuf);
+	if (width && justification > 0)
+		for (; nspace; nspace--)
+			(*rbuf)[(*rbufpos)++] = ' ';
+
+	memcpy((*rbuf) + (*rbufpos), str, len);
+	(*rbufpos) += len;
+
+	if (width && justification < 0)
+		for (; nspace; nspace--)
+			(*rbuf)[(*rbufpos)++] = ' ';
+}
 
 char *
 format_user_string (char *context_name, char *str)
@@ -1355,7 +1347,7 @@ format_user_string (char *context_name, char *str)
 	      switch (str[i])
 		{
 		case '%':	/* `%%' character `%' */
-		  APPEND_CH ('%');
+		  APPEND_CH ('%', width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'c':	/* `%c' trailing component of pwd. */
@@ -1365,18 +1357,18 @@ format_user_string (char *context_name, char *str)
 		    cp++;
 		  else
 		    cp = buf;
-		  APPEND_STR (cp);
+		  APPEND_STR (cp, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'C':	/* `%C' runtime in `hh:mm:ss' format */
 		  sprintf (buf, "%02d:%02d:%02d", run_tm.tm_hour,
 			   run_tm.tm_min, run_tm.tm_sec);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'd':	/* `%d' current working directory */
 		  getcwd (buf, sizeof (buf));
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'D':
@@ -1388,9 +1380,9 @@ format_user_string (char *context_name, char *str)
 			   i++, j++)
 			buf2[j] = str[i];
 		      if (str[i] != '}')
-			FATAL ((stderr,
-				_("%s: too long format for %%D{} escape"),
-				context_name));
+			FATAL_f (stderr,
+				gettext("%s: too long format for %%D{} escape"),
+				context_name);
 
 		      buf2[j] = '\0';
 		      strftime (buf, sizeof (buf), buf2, &run_tm);
@@ -1401,13 +1393,13 @@ format_user_string (char *context_name, char *str)
 		      sprintf (buf, "%02d-%02d-%02d", run_tm.tm_year % 100,
 			       run_tm.tm_mon + 1, run_tm.tm_mday);
 		    }
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'E':	/* `%E' run date in `yy/mm/dd' format */
 		  sprintf (buf, "%02d/%02d/%02d", run_tm.tm_year % 100,
 			   run_tm.tm_mon + 1, run_tm.tm_mday);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'F':	/* `%F' run date in `dd.mm.yyyy' format */
@@ -1415,11 +1407,11 @@ format_user_string (char *context_name, char *str)
 			   run_tm.tm_mday,
 			   run_tm.tm_mon + 1,
 			   run_tm.tm_year + 1900);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'H':	/* `%H' document title */
-		  APPEND_STR (title);
+		  APPEND_STR (title, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'm':	/* `%m' the hostname up to the first `.' */
@@ -1427,16 +1419,16 @@ format_user_string (char *context_name, char *str)
 		  cp = strchr (buf, '.');
 		  if (cp)
 		    *cp = '\0';
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'M':	/* `%M' the full hostname */
 		  (void) gethostname (buf, sizeof (buf));
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'n':	/* `%n' username */
-		  APPEND_STR (passwd->pw_name);
+		  APPEND_STR (passwd->pw_name, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'N':	/* `%N' pw_gecos up to the first `,' char */
@@ -1444,7 +1436,7 @@ format_user_string (char *context_name, char *str)
 		  cp = strchr (buf, ',');
 		  if (cp)
 		    *cp = '\0';
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 't':	/* `%t' runtime in 12-hour am/pm format */
@@ -1453,29 +1445,29 @@ format_user_string (char *context_name, char *str)
 			   ? run_tm.tm_hour - 12 : run_tm.tm_hour,
 			   run_tm.tm_min,
 			   run_tm.tm_hour > 12 ? "pm" : "am");
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'T':	/* `%T' runtime in 24-hour format */
 		  sprintf (buf, "%d:%d", run_tm.tm_hour, run_tm.tm_min);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case '*':	/* `%*' runtime in 24-hour format with secs */
 		  sprintf (buf, "%d:%d:%d", run_tm.tm_hour, run_tm.tm_min,
 			   run_tm.tm_sec);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'W':	/* `%W' run date in `mm/dd/yy' format */
 		  sprintf (buf, "%02d/%02d/%02d", run_tm.tm_mon + 1,
 			   run_tm.tm_mday, run_tm.tm_year % 100);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		default:
-		  FATAL ((stderr, _("%s: unknown `%%' escape `%c' (%d)"),
-			  context_name, str[i], str[i]));
+		  FATAL_f (stderr, gettext("%s: unknown `%%' escape `%c' (%d)"),
+			  context_name, str[i], str[i]);
 		  break;
 		}
 	    }
@@ -1485,7 +1477,7 @@ format_user_string (char *context_name, char *str)
 	      switch (str[i])
 		{
 		case '$':	/* `$$' character `$' */
-		  APPEND_CH ('$');
+		  APPEND_CH ('$', width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case '%':	/* `$%' current page number */
@@ -1493,16 +1485,16 @@ format_user_string (char *context_name, char *str)
 		    sprintf (buf, "%d%c", current_pagenum, slice - 1 + 'A');
 		  else
 		    sprintf (buf, "%d", current_pagenum);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case '=':	/* `$=' number of pages in this file */
-		  APPEND_CH ('\001');
+		  APPEND_CH ('\001', width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'p':	/* `$p' number of pages processed so far */
 		  sprintf (buf, "%d", total_pages);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case '(':	/* $(ENVVAR)  */
@@ -1512,24 +1504,24 @@ format_user_string (char *context_name, char *str)
 		    buf[j++] = str[i];
 
 		  if (str[i] == '\0')
-		    FATAL ((stderr, _("%s: no closing ')' for $() escape"),
-			    context_name));
+		    FATAL_f (stderr, gettext("%s: no closing ')' for $() escape"),
+			    context_name);
 		  if (str[i] != ')')
-		    FATAL ((stderr, _("%s: too long variable name for $() escape"),
-			    context_name));
+		    FATAL_f (stderr, gettext("%s: too long variable name for $() escape"),
+			    context_name);
 
 		  buf[j] = '\0';
 
 		  cp = getenv (buf);
 		  if (cp == NULL)
 		    cp = "";
-		  APPEND_STR (cp);
+		  APPEND_STR (cp, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'C':	/* `$C' modtime in `hh:mm:ss' format */
 		  sprintf (buf, "%02d:%02d:%02d", mod_tm.tm_hour,
 			   mod_tm.tm_min, mod_tm.tm_sec);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'D':
@@ -1541,9 +1533,9 @@ format_user_string (char *context_name, char *str)
 			   i++, j++)
 			buf2[j] = str[i];
 		      if (str[i] != '}')
-			FATAL ((stderr,
-				_("%s: too long format for $D{} escape"),
-				context_name));
+			FATAL_f (stderr,
+				gettext("%s: too long format for $D{} escape"),
+				context_name);
 
 		      buf2[j] = '\0';
 		      strftime (buf, sizeof (buf), buf2, &mod_tm);
@@ -1554,13 +1546,13 @@ format_user_string (char *context_name, char *str)
 		      sprintf (buf, "%02d-%02d-%02d", mod_tm.tm_year % 100,
 			       mod_tm.tm_mon + 1, mod_tm.tm_mday);
 		    }
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'E':	/* `$E' mod date in `yy/mm/dd' format */
 		  sprintf (buf, "%02d/%02d/%02d", mod_tm.tm_year % 100,
 			   mod_tm.tm_mon + 1, mod_tm.tm_mday);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'F':	/* `$F' run date in `dd.mm.yyyy' format */
@@ -1568,7 +1560,7 @@ format_user_string (char *context_name, char *str)
 			   mod_tm.tm_mday,
 			   mod_tm.tm_mon + 1,
 			   mod_tm.tm_year + 1900);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 't':	/* `$t' runtime in 12-hour am/pm format */
@@ -1577,41 +1569,41 @@ format_user_string (char *context_name, char *str)
 			   ? mod_tm.tm_hour - 12 : mod_tm.tm_hour,
 			   mod_tm.tm_min,
 			   mod_tm.tm_hour > 12 ? "pm" : "am");
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'T':	/* `$T' runtime in 24-hour format */
 		  sprintf (buf, "%d:%d", mod_tm.tm_hour, mod_tm.tm_min);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case '*':	/* `$*' runtime in 24-hour format with secs */
 		  sprintf (buf, "%d:%d:%d", mod_tm.tm_hour, mod_tm.tm_min,
 			   mod_tm.tm_sec);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'v':	/* `$v': input file number */
 		  sprintf (buf, "%d", input_filenum);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'V':	/* `$V': input file number in --toc format */
 		  if (toc)
 		    {
 		      sprintf (buf, "%d-", input_filenum);
-		      APPEND_STR (buf);
+		      APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		    }
 		  break;
 
 		case 'W':	/* `$W' run date in `mm/dd/yy' format */
 		  sprintf (buf, "%02d/%02d/%02d", mod_tm.tm_mon + 1,
 			   mod_tm.tm_mday, mod_tm.tm_year % 100);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'N':	/* `$N' the full name of the printed file */
-		  APPEND_STR (fname);
+		  APPEND_STR (fname, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'n':	/* `$n' input file name without directory */
@@ -1620,18 +1612,18 @@ format_user_string (char *context_name, char *str)
 		    cp++;
 		  else
 		    cp = fname;
-		  APPEND_STR (cp);
+		  APPEND_STR (cp, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		case 'L':	/* `$L' number of lines in this file. */
 		  /* This is valid only for TOC-strings. */
 		  sprintf (buf, "%d", current_file_linenum - 1);
-		  APPEND_STR (buf);
+		  APPEND_STR (buf, width, justification, &rbufpos, &rbuf, &rbuflen);
 		  break;
 
 		default:
-		  FATAL ((stderr, _("%s: unknown `$' escape `%c' (%d)"),
-			  context_name, str[i], str[i]));
+		  FATAL_f (stderr, gettext("%s: unknown `$' escape `%c' (%d)"),
+			  context_name, str[i], str[i]);
 		  break;
 		}
 	    }
@@ -1640,9 +1632,9 @@ format_user_string (char *context_name, char *str)
 	  justification = 1;
 	}
       else
-	APPEND_CH (str[i]);
+	APPEND_CH (str[i], width, justification, &rbufpos, &rbuf, &rbuflen);
     }
-  APPEND_CH ('\0');
+  APPEND_CH ('\0', width, justification, &rbufpos, &rbuf, &rbuflen);
 
   /* Escape PS specials. */
   cp = escape_string (rbuf);
@@ -1733,8 +1725,8 @@ file_lookup (char *path, void *context)
   struct stat stat_st;
   int i;
 
-  MESSAGE (2, (stderr, "file_lookup(): %s/%s%s\t", path, ctx->name,
-	       ctx->suffix));
+  MESSAGE_f (2, stderr, "file_lookup(): %s/%s%s\t", path, ctx->name,
+	       ctx->suffix);
 
   len = strlen (path);
   if (len && path[len - 1] == '/')
@@ -1748,7 +1740,7 @@ file_lookup (char *path, void *context)
 
   i = stat (buffer_ptr (ctx->fullname), &stat_st) == 0;
 
-  MESSAGE (2, (stderr, "#%c\n", i ? 't' : 'f'));
+  MESSAGE_f (2, stderr, "#%c\n", i ? 't' : 'f');
 
   return i;
 }
@@ -1821,7 +1813,7 @@ parse_float (char *string, int units, int horizontal)
   val = strtod (string, &end);
   if (end == string)
   malformed_float:
-    ERROR ((stderr, _("malformed float dimension: \"%s\""), string));
+    ERROR_f (stderr, gettext("malformed float dimension: \"%s\""), string);
 
   if (units)
     {
@@ -1843,9 +1835,9 @@ parse_float (char *string, int units, int horizontal)
 
 	case 'l':
 	  if (horizontal)
-	    val *= CHAR_WIDTH ('m');
+	    val *= CHAR_WIDTH_char ('m', font_widths);
 	  else
-	    val *= LINESKIP;
+	    val *= LINESKIP();
 	  break;
 
 	default:
@@ -1942,10 +1934,10 @@ is_open (InputStream *is, FILE *fp, char *fname, char *input_filter)
 
       if (is->fp == NULL)
 	{
-	  ERROR ((stderr,
-		  _("couldn't open input filter \"%s\" for file \"%s\": %s"),
+	  ERROR_f (stderr,
+		  gettext("couldn't open input filter \"%s\" for file \"%s\": %s"),
 		  input_filter, fname ? fname : "(stdin)",
-		  strerror (errno)));
+		  strerror (errno));
 	  return 0;
 	}
     }
@@ -1960,8 +1952,8 @@ is_open (InputStream *is, FILE *fp, char *fname, char *input_filter)
 	  is->fp = fopen (fname, "rb");
 	  if (is->fp == NULL)
 	    {
-	      ERROR ((stderr, _("couldn't open input file \"%s\": %s"), fname,
-		      strerror (errno)));
+	      ERROR_f (stderr, gettext("couldn't open input file \"%s\": %s"), fname,
+		      strerror (errno));
 	      return 0;
 	    }
 	}
@@ -2159,3 +2151,44 @@ shell_escape(const char *fn)
 
   return retval;
 }
+
+void MESSAGE_f(int verbose_level, FILE *file, const char *format, ...) {
+  if (!quiet && verbose >= (verbose_level)) {
+    va_list args;
+    va_start(args, format);
+    vfprintf(file, format, args);
+    va_end(args);
+  }
+}
+
+void ERROR_f(FILE *file, const char *format, ...) {
+  va_list args;
+  fprintf (stderr, "%s: ", program);
+  va_start(args, format);
+  vfprintf(file, format, args);
+  va_end(args);
+  fprintf (stderr, "\n");
+  fflush (stderr);
+}
+
+void FATAL_f(FILE *file, const char *format, ...) {
+  va_list args;
+  fprintf (stderr, "%s: ", program);
+  va_start(args, format);
+  vfprintf(file, format, args);
+  va_end(args);
+  fprintf (stderr, "\n");
+  fflush (stderr);
+  exit (1);
+}
+
+static void CFG_FATAL_f(char *fname_buffer_ptr, int line, FILE *file, const char *format, ...) {
+  va_list args;
+  fprintf (stderr, "%s:%s:%d: ", program, fname_buffer_ptr, line);
+  va_start(args, format);
+  vfprintf(file, format, args);
+  va_end(args);
+  fprintf (stderr, "\n");
+  fflush (stderr);
+  exit (1);
+}
